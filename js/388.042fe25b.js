"use strict";(self["webpackChunkweb_tool_vue"]=self["webpackChunkweb_tool_vue"]||[]).push([[388],{10388:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"icon-generator-container"},[t._m(0),e("div",{staticClass:"main-content"},[e("el-card",{staticClass:"upload-card"},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("上传图片")])]),e("el-upload",{staticClass:"upload-dragger",staticStyle:{height:"auto !important"},attrs:{drag:"","show-file-list":!1,"before-upload":t.handleFileUpload,accept:"image/*"}},[t.originalImage?e("div",{staticClass:"preview-content"},[e("img",{staticClass:"preview-image",attrs:{src:t.originalImage,alt:"预览图"}}),e("div",{staticClass:"upload-overlay"},[e("i",{staticClass:"el-icon-upload2"}),e("p",[t._v("点击重新上传")])])]):e("div",{staticClass:"upload-content"},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"el-upload__text"},[t._v("将图片拖到此处，或"),e("em",[t._v("点击上传")])]),e("div",{staticClass:"el-upload__tip"},[t._v("支持 JPG、PNG、GIF、WebP 等格式")])])])],1),t.originalImage?e("el-card",{staticClass:"config-card"},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("图标配置")])]),e("el-form",{attrs:{model:t.config,"label-width":"120px"}},[e("el-form-item",{attrs:{label:"图标格式"}},[e("el-checkbox-group",{model:{value:t.config.formats,callback:function(e){t.$set(t.config,"formats",e)},expression:"config.formats"}},[e("el-checkbox",{attrs:{label:"ico"}},[t._v("ICO (Windows)")]),e("el-checkbox",{attrs:{label:"icns"}},[t._v("ICNS (macOS)")])],1)],1),e("el-form-item",{attrs:{label:"图标尺寸"}},[e("div",{staticClass:"size-options"},[e("el-checkbox-group",{model:{value:t.config.sizes,callback:function(e){t.$set(t.config,"sizes",e)},expression:"config.sizes"}},t._l(t.availableSizes,(function(a){return e("el-checkbox",{key:a,attrs:{label:a}},[t._v(" "+t._s(a)+"×"+t._s(a)+" ")])})),1)],1)]),e("el-form-item",{attrs:{label:"背景处理"}},[e("el-radio-group",{model:{value:t.config.background,callback:function(e){t.$set(t.config,"background",e)},expression:"config.background"}},[e("el-radio",{attrs:{label:"transparent"}},[t._v("保持透明")]),e("el-radio",{attrs:{label:"white"}},[t._v("白色背景")]),e("el-radio",{attrs:{label:"black"}},[t._v("黑色背景")]),e("el-radio",{attrs:{label:"custom"}},[t._v("自定义颜色")])],1),"custom"===t.config.background?e("el-color-picker",{staticStyle:{"margin-left":"10px"},model:{value:t.config.customColor,callback:function(e){t.$set(t.config,"customColor",e)},expression:"config.customColor"}}):t._e()],1),e("el-form-item",{attrs:{label:"图片质量"}},[e("el-slider",{attrs:{min:.1,max:1,step:.1,"show-tooltip":"","format-tooltip":t.formatQuality},model:{value:t.config.quality,callback:function(e){t.$set(t.config,"quality",e)},expression:"config.quality"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary",loading:t.generating,disabled:0===t.config.formats.length||0===t.config.sizes.length},on:{click:t.generateIcons}},[e("i",{staticClass:"el-icon-magic-stick"}),t._v(" "+t._s(t.generating?"生成中...":"生成图标")+" ")])],1)],1)],1):t._e(),t.generatedIcons.length>0?e("el-card",{staticClass:"preview-card"},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("生成预览")]),e("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",loading:t.downloading},on:{click:t.downloadAll}},[e("i",{staticClass:"el-icon-download"}),t._v(" "+t._s(t.downloading?"打包中...":"打包下载")+" ")])],1),e("div",{staticClass:"icons-grid"},t._l(t.generatedIcons,(function(a){return e("div",{key:`${a.format}-${a.size}`,staticClass:"icon-item"},[e("div",{staticClass:"icon-preview"},[e("img",{attrs:{src:a.dataUrl,alt:`${a.format} ${a.size}x${a.size}`}})]),e("div",{staticClass:"icon-info"},[e("p",{staticClass:"icon-name"},[t._v(t._s(a.format.toUpperCase()))]),e("p",{staticClass:"icon-size"},[t._v(t._s(a.size)+"×"+t._s(a.size))]),e("p",{staticClass:"icon-file-size"},[t._v(t._s(t.formatFileSize(a.size)))])]),e("div",{staticClass:"icon-actions"},[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.downloadSingle(a)}}},[e("i",{staticClass:"el-icon-download"})])],1)])})),0)]):t._e(),e("el-card",{staticClass:"help-card"},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("使用说明")])]),e("div",{staticClass:"help-content"},[e("h4",[t._v("支持的格式")]),e("ul",[e("li",[e("strong",[t._v("ICO")]),t._v(": Windows 系统图标格式，支持多尺寸")]),e("li",[e("strong",[t._v("ICNS")]),t._v(": macOS 系统图标格式，支持 Retina 显示")])]),e("h4",[t._v("推荐尺寸")]),e("ul",[e("li",[e("strong",[t._v("Windows ICO")]),t._v(": 16×16, 32×32, 48×48, 64×64, 128×128, 256×256")]),e("li",[e("strong",[t._v("macOS ICNS")]),t._v(": 16×16, 32×32, 64×64, 128×128, 256×256, 512×512, 1024×1024")])]),e("h4",[t._v("使用建议")]),e("ul",[e("li",[t._v("建议使用正方形、高分辨率的原图")]),e("li",[t._v("图标设计应简洁明了，避免过多细节")]),e("li",[t._v("透明背景适合大多数应用场景")]),e("li",[t._v("生成的图标可直接用于软件开发")])])])])],1)])},s=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-header"},[e("h1",[t._v("图片转软件图标")]),e("p",{staticClass:"page-description"},[t._v(" 将图片转换为软件图标格式（ICO、ICNS），支持多种尺寸，一键打包下载 ")])])}],n=(a(44114),a(95866)),o=a(75912);a(72712),a(16573),a(78100),a(77936),a(48140),a(21903),a(91134),a(28845),a(37467),a(44732),a(79577),a(64979);class l{static async canvasToICO(t,e=[16,32,48]){const a=[];for(const i of e){const e=this.resizeCanvas(t,i,i),s=e.getContext("2d").getImageData(0,0,i,i);a.push({width:i,height:i,data:s.data})}return this.createICOBlob(a)}static resizeCanvas(t,e,a){const i=document.createElement("canvas"),s=i.getContext("2d");return i.width=e,i.height=a,s.imageSmoothingEnabled=!0,s.imageSmoothingQuality="high",s.drawImage(t,0,0,e,a),i}static createICOBlob(t){const e=new ArrayBuffer(6),a=new DataView(e);a.setUint16(0,0,!0),a.setUint16(2,1,!0),a.setUint16(4,t.length,!0);const i=16*t.length,s=new ArrayBuffer(i),n=new DataView(s);let o=6+i;const l=[];t.forEach(((t,e)=>{const a=this.createBMPData(t);l.push(a);const i=16*e;n.setUint8(i+0,256===t.width?0:t.width),n.setUint8(i+1,256===t.height?0:t.height),n.setUint8(i+2,0),n.setUint8(i+3,0),n.setUint16(i+4,1,!0),n.setUint16(i+6,32,!0),n.setUint32(i+8,a.byteLength,!0),n.setUint32(i+12,o,!0),o+=a.byteLength}));const r=6+i+l.reduce(((t,e)=>t+e.byteLength),0),c=new Uint8Array(r);let g=0;return c.set(new Uint8Array(e),g),g+=e.byteLength,c.set(new Uint8Array(s),g),g+=s.byteLength,l.forEach((t=>{c.set(new Uint8Array(t),g),g+=t.byteLength})),new Blob([c],{type:"image/x-icon"})}static createBMPData(t){const{width:e,height:a,data:i}=t,s=4*Math.floor((32*e+31)/32),n=s*a,o=4*Math.floor((e+31)/32)*a,l=40+n+o,r=new ArrayBuffer(l),c=new DataView(r);c.setUint32(0,40,!0),c.setInt32(4,e,!0),c.setInt32(8,2*a,!0),c.setUint16(12,1,!0),c.setUint16(14,32,!0),c.setUint32(16,0,!0),c.setUint32(20,n+o,!0),c.setUint32(24,0,!0),c.setUint32(28,0,!0),c.setUint32(32,0,!0),c.setUint32(36,0,!0);let g=40;for(let f=a-1;f>=0;f--){for(let t=0;t<e;t++){const a=4*(f*e+t);c.setUint8(g++,i[a+2]),c.setUint8(g++,i[a+1]),c.setUint8(g++,i[a+0]),c.setUint8(g++,i[a+3])}while(g%4!==0)c.setUint8(g++,0)}const d=4*Math.floor((e+31)/32);for(let f=a-1;f>=0;f--)for(let t=0;t<d;t++)c.setUint8(g++,0);return r}static async canvasToICNS(t,e=[16,32,64,128,256,512,1024]){const a=[];for(const i of e){const e=this.resizeCanvas(t,i,i),s=e.toDataURL("image/png"),n=await this.dataURLToBlob(s);a.push({size:i,data:await n.arrayBuffer()})}return this.createICNSBlob(a)}static createICNSBlob(t){const e=t.reduce(((t,e)=>e.size>t.size?e:t));return new Blob([e.data],{type:"image/png"})}static dataURLToBlob(t){return new Promise((e=>{const a=t.split(","),i=a[0].match(/:(.*?);/)[1],s=atob(a[1]);let n=s.length;const o=new Uint8Array(n);while(n--)o[n]=s.charCodeAt(n);e(new Blob([o],{type:i}))}))}static isValidIconSize(t){const e=[16,20,24,32,40,48,64,72,96,128,256,512,1024];return e.includes(t)}static getRecommendedSizes(t){return"ico"===t?[16,32,48,64,128,256]:"icns"===t?[16,32,64,128,256,512,1024]:[16,32,48,64,128,256]}}var r=l,c=a(44813),g=a.n(c),d={name:"IconGeneratorView",data(){return{originalImage:null,originalFile:null,generating:!1,downloading:!1,generatedIcons:[],config:{formats:["ico"],sizes:[16,32,48,64,128,256],background:"transparent",customColor:"#ffffff",quality:.9},availableSizes:[16,20,24,32,40,48,64,72,96,128,256,512,1024]}},mounted(){this.$nextTick((()=>{const t=document.querySelectorAll(".el-upload-dragger");t.forEach((t=>{t.style.height="auto",t.style.minHeight="200px"}))}))},methods:{handleFileUpload(t){this.originalFile=t;const e=new FileReader;return e.onload=t=>{this.originalImage=t.target.result},e.readAsDataURL(t),!1},formatQuality(t){return`${Math.round(100*t)}%`},formatFileSize(t){const e=t*t*4;return o.A.formatBytes(e)},async generateIcons(){if(this.originalImage){this.generating=!0,this.generatedIcons=[];try{const t=document.createElement("canvas"),e=t.getContext("2d"),a=new Image;await new Promise((t=>{a.onload=t,a.src=this.originalImage}));for(const i of this.config.formats)for(const s of this.config.sizes){const n=await this.generateSingleIcon(a,s,i,t,e);this.generatedIcons.push(n)}this.$message.success(`成功生成 ${this.generatedIcons.length} 个图标`)}catch(t){console.error("生成图标失败:",t),this.$message.error("生成图标失败: "+t.message)}finally{this.generating=!1}}},async generateSingleIcon(t,e,a,i,s){if(i.width=e,i.height=e,s.clearRect(0,0,e,e),"transparent"!==this.config.background){let t="#ffffff";switch(this.config.background){case"white":t="#ffffff";break;case"black":t="#000000";break;case"custom":t=this.config.customColor;break}s.fillStyle=t,s.fillRect(0,0,e,e)}const n=Math.min(e/t.width,e/t.height),o=t.width*n,l=t.height*n,c=(e-o)/2,g=(e-l)/2;let d,f;return s.drawImage(t,c,g,o,l),"ico"===a?(d=await r.canvasToICO(i,[e]),f=i.toDataURL("image/png",this.config.quality)):(f=i.toDataURL("image/png",this.config.quality),d=await r.dataURLToBlob(f)),{format:a,size:e,dataUrl:f,blob:d}},downloadSingle(t){let e="png";"ico"===t.format?e="ico":"icns"===t.format&&(e="icns");const a=`icon_${t.size}x${t.size}.${e}`;n.A.downloadBlob(t.blob,a)},async downloadAll(){if(0!==this.generatedIcons.length){this.downloading=!0;try{const t=new(g()),e={};this.generatedIcons.forEach((t=>{e[t.format]||(e[t.format]=[]),e[t.format].push(t)}));for(const[s,n]of Object.entries(e)){const e=t.folder(s.toUpperCase());for(const t of n){let a="png";"ico"===s?a="ico":"icns"===s&&(a="icns");const i=`icon_${t.size}x${t.size}.${a}`;e.file(i,t.blob)}}const a=await t.generateAsync({type:"blob"}),i=n.A.generateTimestampFilename("app_icons","zip");n.A.downloadBlob(a,i),this.$message.success("图标包下载成功")}catch(t){console.error("打包下载失败:",t),this.$message.error("打包下载失败: "+t.message)}finally{this.downloading=!1}}}}},f=d,h=a(81656),u=(0,h.A)(f,i,s,!1,null,null,null),m=u.exports}}]);
//# sourceMappingURL=388.042fe25b.js.map