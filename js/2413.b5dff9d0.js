"use strict";(self["webpackChunkweb_tool_vue"]=self["webpackChunkweb_tool_vue"]||[]).push([[2413],{92413:function(t,e,i){i.r(e),i.d(e,{default:function(){return l}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"audio-recorder-container"},[t._m(0),e("div",{staticClass:"recorder-section"},[e("div",{staticClass:"recording-status"},[e("div",{staticClass:"status-indicator",class:{recording:t.isRecording,paused:t.isPaused}},[e("div",{staticClass:"status-dot"}),e("span",{staticClass:"status-text"},[t._v(" "+t._s(t.isRecording?t.isPaused?"å·²æš‚åœ":"å½•åˆ¶ä¸­":"å‡†å¤‡å°±ç»ª")+" ")]),t.isRecording||t.recordingTime>0?e("span",{staticClass:"recording-time"},[t._v(" "+t._s(t.formatTime(t.recordingTime))+" ")]):t._e()])]),e("div",{staticClass:"waveform-container"},[e("canvas",{ref:"waveformCanvas",staticClass:"waveform-canvas"}),t.microphonePermission?t._e():e("div",{staticClass:"permission-placeholder"},[e("div",{staticClass:"placeholder-icon"},[t._v("ðŸŽ¤")]),e("div",{staticClass:"placeholder-text"},[t._v("éœ€è¦éº¦å…‹é£Žæƒé™æ‰èƒ½æ˜¾ç¤ºæ³¢å½¢")])])]),e("div",{staticClass:"control-buttons"},[e("div",{staticClass:"main-controls"},[t.isRecording||t.audioBlob?t.isRecording?[t.isPaused?e("el-button",{attrs:{type:"success",size:"large"},on:{click:t.resumeRecording}},[e("i",{staticClass:"el-icon-video-play"}),t._v(" ç»§ç»­ ")]):e("el-button",{attrs:{type:"warning",size:"large"},on:{click:t.pauseRecording}},[e("i",{staticClass:"el-icon-video-pause"}),t._v(" æš‚åœ ")]),e("el-button",{attrs:{type:"danger",size:"large"},on:{click:t.stopRecording}},[e("i",{staticClass:"el-icon-close"}),t._v(" åœæ­¢ ")])]:t.audioBlob?[e("el-button",{attrs:{type:"primary",size:"large"},on:{click:t.startRecording}},[e("i",{staticClass:"el-icon-refresh"}),t._v(" é‡æ–°å½•éŸ³ ")])]:t._e():e("el-button",{attrs:{type:"primary",size:"large",loading:t.startingRecording},on:{click:t.startRecording}},[e("i",{staticClass:"el-icon-microphone"}),t._v(" å¼€å§‹å½•éŸ³ ")])],2),t.microphonePermission?e("div",{staticClass:"volume-control"},[e("span",{staticClass:"volume-label"},[t._v("éŸ³é‡:")]),e("div",{staticClass:"volume-bar"},[e("div",{staticClass:"volume-level",style:{width:t.volumeLevel+"%"}})]),e("span",{staticClass:"volume-value"},[t._v(t._s(Math.round(t.volumeLevel))+"%")])]):t._e()]),t.audioBlob?e("div",{staticClass:"recording-result"},[e("div",{staticClass:"result-header"},[e("h3",[t._v("å½•éŸ³å®Œæˆ")]),e("div",{staticClass:"recording-info"},[e("span",[t._v("æ—¶é•¿: "+t._s(t.formatTime(t.recordingDuration)))]),e("span",[t._v("å¤§å°: "+t._s(t.formatFileSize(t.audioBlob.size)))])])]),e("div",{staticClass:"audio-player"},[e("audio",{ref:"audioPlayer",attrs:{controls:"",src:t.audioUrl}})]),e("div",{staticClass:"export-options"},[e("h4",[t._v("å¯¼å‡ºé€‰é¡¹")]),e("div",{staticClass:"format-selection"},[e("el-radio-group",{model:{value:t.exportFormat,callback:function(e){t.exportFormat=e},expression:"exportFormat"}},[e("el-radio",{attrs:{label:"webm"}},[t._v("WebM (åŽŸå§‹æ ¼å¼)")]),e("el-radio",{attrs:{label:"wav"}},[t._v("WAV (æ— æŸ)")]),e("el-radio",{attrs:{label:"mp3"}},[t._v("MP3 (åŽ‹ç¼©)")])],1)],1),e("div",{staticClass:"export-buttons"},[e("el-button",{attrs:{type:"success"},on:{click:t.downloadRecording}},[e("i",{staticClass:"el-icon-download"}),t._v(" ä¸‹è½½å½•éŸ³ ")]),t.canShare?e("el-button",{on:{click:t.shareRecording}},[e("i",{staticClass:"el-icon-share"}),t._v(" åˆ†äº« ")]):t._e(),e("el-button",{attrs:{type:"danger"},on:{click:t.deleteRecording}},[e("i",{staticClass:"el-icon-delete"}),t._v(" åˆ é™¤ ")])],1)])]):t._e(),t.recordingHistory.length>0?e("div",{staticClass:"recording-history"},[e("h3",[t._v("å½•éŸ³åŽ†å²")]),e("div",{staticClass:"history-list"},t._l(t.recordingHistory,(function(i,s){return e("div",{key:s,staticClass:"history-item"},[e("div",{staticClass:"history-info"},[e("span",{staticClass:"history-name"},[t._v("å½•éŸ³ "+t._s(s+1))]),e("span",{staticClass:"history-time"},[t._v(t._s(i.timestamp))]),e("span",{staticClass:"history-duration"},[t._v(t._s(t.formatTime(i.duration)))])]),e("div",{staticClass:"history-actions"},[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.playHistoryRecord(i)}}},[t._v("æ’­æ”¾")]),e("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.downloadHistoryRecord(i)}}},[t._v("ä¸‹è½½")]),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.deleteHistoryRecord(s)}}},[t._v("åˆ é™¤")])],1)])})),0),e("div",{staticClass:"history-actions"},[e("el-button",{on:{click:t.clearHistory}},[t._v("æ¸…ç©ºåŽ†å²")])],1)]):t._e()]),e("div",{staticClass:"settings-panel"},[e("h3",[t._v("å½•éŸ³è®¾ç½®")]),e("el-form",{attrs:{"label-width":"120px"}},[e("el-form-item",{attrs:{label:"éŸ³é¢‘è´¨é‡"}},[e("el-select",{on:{change:t.updateAudioSettings},model:{value:t.audioQuality,callback:function(e){t.audioQuality=e},expression:"audioQuality"}},[e("el-option",{attrs:{label:"é«˜è´¨é‡ (48kHz)",value:"high"}}),e("el-option",{attrs:{label:"æ ‡å‡†è´¨é‡ (44.1kHz)",value:"standard"}}),e("el-option",{attrs:{label:"ä½Žè´¨é‡ (22kHz)",value:"low"}})],1)],1),e("el-form-item",{attrs:{label:"å£°é“"}},[e("el-radio-group",{on:{change:t.updateAudioSettings},model:{value:t.audioChannels,callback:function(e){t.audioChannels=e},expression:"audioChannels"}},[e("el-radio",{attrs:{label:1}},[t._v("å•å£°é“")]),e("el-radio",{attrs:{label:2}},[t._v("ç«‹ä½“å£°")])],1)],1),e("el-form-item",{attrs:{label:"è‡ªåŠ¨åœæ­¢"}},[e("el-switch",{model:{value:t.autoStop,callback:function(e){t.autoStop=e},expression:"autoStop"}}),e("span",{staticClass:"setting-desc"},[t._v("å½•éŸ³æ—¶é•¿è¾¾åˆ°é™åˆ¶æ—¶è‡ªåŠ¨åœæ­¢")])],1),t.autoStop?e("el-form-item",{attrs:{label:"æœ€å¤§æ—¶é•¿"}},[e("el-input-number",{attrs:{min:10,max:3600,step:10},model:{value:t.maxDuration,callback:function(e){t.maxDuration=e},expression:"maxDuration"}}),e("span",{staticClass:"setting-desc"},[t._v("ç§’")])],1):t._e()],1)],1)])},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-header"},[e("h1",[t._v("ðŸŽ¤ éŸ³é¢‘å½•éŸ³å™¨")]),e("p",{staticClass:"page-description"},[t._v("åœ¨çº¿å½•åˆ¶éŸ³é¢‘ï¼Œæ”¯æŒå®žæ—¶æ³¢å½¢æ˜¾ç¤ºå’Œå¤šç§æ ¼å¼å¯¼å‡º")])])}],o=(i(44114),i(16573),i(78100),i(77936),i(48140),i(21903),i(91134),i(28845),i(37467),i(44732),i(79577),i(14603),i(47566),i(98721),{name:"AudioRecorderView",metaInfo:{title:"éŸ³é¢‘å½•éŸ³å™¨ - åœ¨çº¿å½•éŸ³å·¥å…·",meta:[{name:"description",content:"åœ¨çº¿éŸ³é¢‘å½•éŸ³å™¨ï¼Œæ”¯æŒå®žæ—¶æ³¢å½¢æ˜¾ç¤ºã€æš‚åœç»§ç»­å½•éŸ³ã€å¤šç§æ ¼å¼å¯¼å‡ºã€‚å¯å½•åˆ¶è¯­éŸ³å¤‡å¿˜ã€éŸ³ä¹ç‰‡æ®µã€ä¼šè®®è®°å½•ç­‰ï¼Œæ”¯æŒWAVã€MP3ã€WebMæ ¼å¼å¯¼å‡ºã€‚"},{name:"keywords",content:"éŸ³é¢‘å½•éŸ³å™¨,åœ¨çº¿å½•éŸ³,è¯­éŸ³å½•åˆ¶,å½•éŸ³å·¥å…·,éŸ³é¢‘å½•åˆ¶,éº¦å…‹é£Žå½•éŸ³,WAVå½•éŸ³,MP3å½•éŸ³,è¯­éŸ³å¤‡å¿˜,ä¼šè®®å½•éŸ³,éŸ³é¢‘ç¼–è¾‘"}]},data(){return{isRecording:!1,isPaused:!1,startingRecording:!1,recordingTime:0,recordingDuration:0,mediaRecorder:null,audioStream:null,audioBlob:null,audioUrl:null,microphonePermission:!1,audioContext:null,analyser:null,dataArray:null,animationId:null,volumeLevel:0,audioQuality:"standard",audioChannels:1,exportFormat:"webm",autoStop:!1,maxDuration:300,recordingHistory:[],recordingTimer:null,canShare:"share"in navigator,audioChunks:[]}},mounted(){this.loadRecordingHistory(),this.checkMicrophonePermission()},beforeDestroy(){this.cleanup()},methods:{async checkMicrophonePermission(){try{const t=await navigator.mediaDevices.getUserMedia({audio:!0});this.microphonePermission=!0,t.getTracks().forEach((t=>t.stop()))}catch(t){this.microphonePermission=!1,console.warn("éº¦å…‹é£Žæƒé™è¢«æ‹’ç»:",t)}},async startRecording(){try{this.startingRecording=!0;const t=this.getAudioConstraints();this.audioStream=await navigator.mediaDevices.getUserMedia(t),this.setupAudioAnalyzer(),this.mediaRecorder=new MediaRecorder(this.audioStream,{mimeType:this.getSupportedMimeType()}),this.audioChunks=[],this.mediaRecorder.ondataavailable=t=>{t.data.size>0&&this.audioChunks.push(t.data)},this.mediaRecorder.onstop=()=>{this.handleRecordingStop()},this.mediaRecorder.start(100),this.isRecording=!0,this.isPaused=!1,this.recordingTime=0,this.startRecordingTimer(),this.startWaveformAnimation(),this.audioBlob&&(URL.revokeObjectURL(this.audioUrl),this.audioBlob=null,this.audioUrl=null),this.$message.success("å¼€å§‹å½•éŸ³")}catch(t){console.error("å¯åŠ¨å½•éŸ³å¤±è´¥:",t),this.$message.error("å¯åŠ¨å½•éŸ³å¤±è´¥: "+t.message)}finally{this.startingRecording=!1}},pauseRecording(){this.mediaRecorder&&"recording"===this.mediaRecorder.state&&(this.mediaRecorder.pause(),this.isPaused=!0,this.stopRecordingTimer(),this.$message.info("å½•éŸ³å·²æš‚åœ"))},resumeRecording(){this.mediaRecorder&&"paused"===this.mediaRecorder.state&&(this.mediaRecorder.resume(),this.isPaused=!1,this.startRecordingTimer(),this.$message.info("ç»§ç»­å½•éŸ³"))},stopRecording(){this.mediaRecorder&&"inactive"!==this.mediaRecorder.state&&(this.mediaRecorder.stop(),this.isRecording=!1,this.isPaused=!1,this.stopRecordingTimer(),this.stopWaveformAnimation(),this.recordingDuration=this.recordingTime,this.$message.success("å½•éŸ³å·²åœæ­¢"))},handleRecordingStop(){this.audioBlob=new Blob(this.audioChunks,{type:this.getSupportedMimeType()}),this.audioUrl=URL.createObjectURL(this.audioBlob),this.saveToHistory(),this.cleanup()},getAudioConstraints(){const t={high:{sampleRate:48e3,channelCount:this.audioChannels},standard:{sampleRate:44100,channelCount:this.audioChannels},low:{sampleRate:22050,channelCount:this.audioChannels}};return{audio:{...t[this.audioQuality],echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}}},getSupportedMimeType(){const t=["audio/webm;codecs=opus","audio/webm","audio/mp4","audio/wav"];for(const e of t)if(MediaRecorder.isTypeSupported(e))return e;return"audio/webm"},setupAudioAnalyzer(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.audioContext.createAnalyser();const t=this.audioContext.createMediaStreamSource(this.audioStream);t.connect(this.analyser),this.analyser.fftSize=256;const e=this.analyser.frequencyBinCount;this.dataArray=new Uint8Array(e)}catch(t){console.warn("éŸ³é¢‘åˆ†æžå™¨è®¾ç½®å¤±è´¥:",t)}},startWaveformAnimation(){const t=this.$refs.waveformCanvas;if(!t||!this.analyser)return;const e=t.getContext("2d"),i=t.width=t.offsetWidth,s=t.height=t.offsetHeight,a=()=>{if(!this.isRecording||this.isPaused)return;this.analyser.getByteFrequencyData(this.dataArray);let t=0;for(let e=0;e<this.dataArray.length;e++)t+=this.dataArray[e];this.volumeLevel=t/this.dataArray.length/255*100,e.fillStyle="#1a1a1a",e.fillRect(0,0,i,s);const o=i/this.dataArray.length*2.5;let r,n=0;for(let i=0;i<this.dataArray.length;i++){r=this.dataArray[i]/255*s;const t=e.createLinearGradient(0,s-r,0,s);t.addColorStop(0,"#409eff"),t.addColorStop(1,"#67c23a"),e.fillStyle=t,e.fillRect(n,s-r,o,r),n+=o+1}this.animationId=requestAnimationFrame(a)};a()},stopWaveformAnimation(){this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null);const t=this.$refs.waveformCanvas;if(t){const e=t.getContext("2d");e.clearRect(0,0,t.width,t.height)}this.volumeLevel=0},startRecordingTimer(){this.recordingTimer=setInterval((()=>{this.recordingTime++,this.autoStop&&this.recordingTime>=this.maxDuration&&(this.stopRecording(),this.$message.warning(`å½•éŸ³æ—¶é•¿å·²è¾¾åˆ° ${this.maxDuration} ç§’ï¼Œè‡ªåŠ¨åœæ­¢`))}),1e3)},stopRecordingTimer(){this.recordingTimer&&(clearInterval(this.recordingTimer),this.recordingTimer=null)},formatTime(t){const e=Math.floor(t/60),i=t%60;return`${e.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},formatFileSize(t){if(0===t)return"0 B";const e=1024,i=["B","KB","MB","GB"],s=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,s)).toFixed(2))+" "+i[s]},downloadRecording(){if(!this.audioBlob)return;const t=(new Date).toISOString().replace(/[:.]/g,"-"),e=this.getFileExtension(),i=`å½•éŸ³_${t}.${e}`,s=URL.createObjectURL(this.audioBlob),a=document.createElement("a");a.href=s,a.download=i,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),this.$message.success("å½•éŸ³ä¸‹è½½æˆåŠŸ")},async shareRecording(){if(this.audioBlob&&this.canShare)try{const t=new File([this.audioBlob],"å½•éŸ³.webm",{type:this.audioBlob.type});await navigator.share({title:"å½•éŸ³åˆ†äº«",text:"æˆ‘å½•åˆ¶äº†ä¸€æ®µéŸ³é¢‘",files:[t]}),this.$message.success("åˆ†äº«æˆåŠŸ")}catch(t){console.error("åˆ†äº«å¤±è´¥:",t),this.$message.error("åˆ†äº«å¤±è´¥")}},deleteRecording(){this.$confirm("ç¡®å®šè¦åˆ é™¤å½“å‰å½•éŸ³å—ï¼Ÿ","ç¡®è®¤åˆ é™¤",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then((()=>{this.audioUrl&&URL.revokeObjectURL(this.audioUrl),this.audioBlob=null,this.audioUrl=null,this.recordingDuration=0,this.$message.success("å½•éŸ³å·²åˆ é™¤")})).catch((()=>{}))},getFileExtension(){const t={webm:"webm",wav:"wav",mp3:"mp3"};return t[this.exportFormat]||"webm"},saveToHistory(){const t={blob:this.audioBlob,url:this.audioUrl,duration:this.recordingDuration,timestamp:(new Date).toLocaleString(),size:this.audioBlob.size};if(this.recordingHistory.unshift(t),this.recordingHistory.length>10){const t=this.recordingHistory.pop();t.url&&URL.revokeObjectURL(t.url)}this.saveRecordingHistory()},playHistoryRecord(t){const e=new Audio(t.url);e.play()},downloadHistoryRecord(t){const e=t.timestamp.replace(/[^\d]/g,""),i=`åŽ†å²å½•éŸ³_${e}.webm`,s=document.createElement("a");s.href=t.url,s.download=i,document.body.appendChild(s),s.click(),document.body.removeChild(s),this.$message.success("åŽ†å²å½•éŸ³ä¸‹è½½æˆåŠŸ")},deleteHistoryRecord(t){this.$confirm("ç¡®å®šè¦åˆ é™¤è¿™æ¡åŽ†å²å½•éŸ³å—ï¼Ÿ","ç¡®è®¤åˆ é™¤",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then((()=>{const e=this.recordingHistory[t];e.url&&URL.revokeObjectURL(e.url),this.recordingHistory.splice(t,1),this.saveRecordingHistory(),this.$message.success("åŽ†å²å½•éŸ³å·²åˆ é™¤")})).catch((()=>{}))},clearHistory(){this.$confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰åŽ†å²å½•éŸ³å—ï¼Ÿ","ç¡®è®¤æ¸…ç©º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then((()=>{this.recordingHistory.forEach((t=>{t.url&&URL.revokeObjectURL(t.url)})),this.recordingHistory=[],this.saveRecordingHistory(),this.$message.success("åŽ†å²è®°å½•å·²æ¸…ç©º")})).catch((()=>{}))},updateAudioSettings(){this.isRecording&&this.$message.info("è®¾ç½®å°†åœ¨ä¸‹æ¬¡å½•éŸ³æ—¶ç”Ÿæ•ˆ")},saveRecordingHistory(){try{const t=this.recordingHistory.map((t=>({duration:t.duration,timestamp:t.timestamp,size:t.size})));localStorage.setItem("audioRecorderHistory",JSON.stringify(t))}catch(t){console.warn("ä¿å­˜å½•éŸ³åŽ†å²å¤±è´¥:",t)}},loadRecordingHistory(){try{const t=localStorage.getItem("audioRecorderHistory");t&&(this.recordingHistory=[])}catch(t){console.warn("åŠ è½½å½•éŸ³åŽ†å²å¤±è´¥:",t)}},cleanup(){this.audioStream&&(this.audioStream.getTracks().forEach((t=>t.stop())),this.audioStream=null),this.audioContext&&(this.audioContext.close(),this.audioContext=null),this.stopRecordingTimer(),this.stopWaveformAnimation()}}}),r=o,n=i(81656),c=(0,n.A)(r,s,a,!1,null,"5aade394",null),l=c.exports}}]);
//# sourceMappingURL=2413.b5dff9d0.js.map