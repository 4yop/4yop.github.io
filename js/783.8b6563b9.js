"use strict";(self["webpackChunkweb_tool_vue"]=self["webpackChunkweb_tool_vue"]||[]).push([[783],{30783:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modern-bg"},[e("el-row",{attrs:{gutter:0,justify:"center"}},[e("el-col",{attrs:{xs:{span:24,offset:0},sm:{span:22,offset:1},md:{span:18,offset:3},lg:{span:14,offset:5},xl:{span:12,offset:6}}},[e("el-card",{staticClass:"modern-card",attrs:{shadow:"hover"}},[e("div",{staticClass:"upload-row"},[e("el-upload",{attrs:{action:"#","auto-upload":!1,multiple:!1,"show-file-list":!1,accept:"image/*","on-change":t.handleUploadChange,disabled:t.loading}},[e("el-button",{attrs:{type:"primary",round:"",disabled:t.loading}},[t._v("选择图片")])],1),e("el-select",{staticStyle:{width:"160px"},attrs:{disabled:t.loading,filterable:""},model:{value:t.style,callback:function(e){t.style=e},expression:"style"}},t._l(t.styleOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),"pixelate"===t.style?e("el-slider",{staticStyle:{width:"140px"},attrs:{min:2,max:50,step:1,disabled:t.loading},model:{value:t.blockSize,callback:function(e){t.blockSize=e},expression:"blockSize"}}):t._e(),"sketch"===t.style?e("el-slider",{staticStyle:{width:"140px"},attrs:{min:.5,max:3,step:.1,disabled:t.loading},model:{value:t.edgeStrength,callback:function(e){t.edgeStrength=e},expression:"edgeStrength"}}):t._e(),"sepia"===t.style?e("el-slider",{staticStyle:{width:"120px"},attrs:{min:.1,max:1,step:.05,disabled:t.loading},model:{value:t.sepiaStrength,callback:function(e){t.sepiaStrength=e},expression:"sepiaStrength"}}):t._e(),"emboss"===t.style?e("el-slider",{staticStyle:{width:"120px"},attrs:{min:.5,max:2,step:.05,disabled:t.loading},model:{value:t.embossStrength,callback:function(e){t.embossStrength=e},expression:"embossStrength"}}):t._e(),"blur"===t.style?e("el-slider",{staticStyle:{width:"120px"},attrs:{min:1,max:10,step:1,disabled:t.loading},model:{value:t.blurRadius,callback:function(e){t.blurRadius=e},expression:"blurRadius"}}):t._e(),"oil"===t.style?e("el-slider",{staticStyle:{width:"120px"},attrs:{min:2,max:20,step:1,disabled:t.loading},model:{value:t.oilBlockSize,callback:function(e){t.oilBlockSize=e},expression:"oilBlockSize"}}):t._e(),"mosaic"===t.style?e("el-slider",{staticStyle:{width:"120px"},attrs:{min:4,max:40,step:1,disabled:t.loading},model:{value:t.mosaicBlockSize,callback:function(e){t.mosaicBlockSize=e},expression:"mosaicBlockSize"}}):t._e(),"highcontrast"===t.style?e("el-slider",{staticStyle:{width:"120px"},attrs:{min:1,max:10,step:.1,disabled:t.loading},model:{value:t.contrastLevel,callback:function(e){t.contrastLevel=e},expression:"contrastLevel"}}):t._e(),e("el-button",{attrs:{type:"success",round:"",disabled:!t.file||t.loading},on:{click:t.handleProcess}},[t._v("一键生成")]),t.resultUrl?e("el-button",{attrs:{type:"primary",size:"mini",disabled:t.loading},on:{click:t.handleDownload}},[t._v("下载图片")]):t._e()],1),t.loading||t.progress>0?e("el-progress",{staticStyle:{margin:"16px 0"},attrs:{percentage:t.progress,status:"success","stroke-width":16,"text-inside":""}}):t._e(),t.error?e("div",{staticStyle:{color:"#f56c6c",margin:"12px 0","text-align":"center"}},[t._v(t._s(t.error))]):t._e(),e("el-row",{staticStyle:{"margin-top":"24px"},attrs:{gutter:16}},[e("el-col",{attrs:{span:12}},[e("div",{staticStyle:{"text-align":"center"}},[e("div",{staticStyle:{"font-weight":"600","margin-bottom":"8px"}},[t._v("原图预览")]),t.imgUrl?e("el-image",{staticStyle:{"max-width":"100%","max-height":"320px","border-radius":"10px","box-shadow":"0 2px 8px rgba(0,0,0,0.08)"},attrs:{src:t.imgUrl,"preview-src-list":t.loading?[]:[t.imgUrl,t.resultUrl],fit:"contain"}}):e("div",{staticStyle:{color:"#ccc"}},[t._v("请上传图片")])],1)]),e("el-col",{staticStyle:{position:"relative"},attrs:{span:12}},[e("div",{staticStyle:{"text-align":"center"}},[e("div",{staticStyle:{"font-weight":"600","margin-bottom":"8px"}},[t._v("风格化预览")]),t.resultUrl?e("el-image",{staticStyle:{"max-width":"100%","border-radius":"10px","box-shadow":"0 2px 8px rgba(0,0,0,0.08)",background:"#f0f9eb"},attrs:{src:t.resultUrl,fit:"contain","preview-src-list":t.loading?[]:[t.resultUrl,t.imgUrl]}}):t._e()],1)])],1)],1)],1)],1)],1)},l=[],s=(a(16573),a(78100),a(77936),a(48140),a(21903),a(91134),a(28845),a(37467),a(44732),a(79577),a(14603),a(47566),a(98721),a(95866)),r={name:"ArtStyleView",data(){return{metaInfo:{title:"在线图片风格化 - 艺术滤镜转化照片",meta:[{name:"description",content:"将普通照片转换为艺术风格，如素描、水彩、油画风等，快速生成独特图像效果。"},{name:"keywords",content:"图片风格化,艺术滤镜,照片转画,在线风格转换,图像艺术化"}]},file:null,imgUrl:"",resultUrl:"",style:"pixelate",blockSize:10,edgeStrength:1,loading:!1,progress:0,progressText:"",error:"",sepiaStrength:1,embossStrength:1,blurRadius:2,oilBlockSize:6,mosaicBlockSize:12,contrastLevel:2}},computed:{styleOptions(){return[{label:"像素化风格",value:"pixelate"},{label:"素描/边缘检测",value:"sketch"},{label:"灰度",value:"grayscale"},{label:"反色",value:"invert"},{label:"怀旧",value:"sepia"},{label:"浮雕",value:"emboss"},{label:"模糊",value:"blur"},{label:"油画",value:"oil"},{label:"马赛克",value:"mosaic"},{label:"高对比",value:"highcontrast"}]}},methods:{handleUploadChange(t,e){e.length>0?(this.file=e[e.length-1].raw||e[e.length-1],this.imgUrl=URL.createObjectURL(this.file),this.resultUrl="",this.error=""):(this.file=null,this.imgUrl="",this.resultUrl="",this.error="")},async handleProcess(){if(this.file){this.loading=!0,this.progress=0,this.progressText="处理中...",this.error="";try{let t="";switch(this.style){case"pixelate":t=await this.pixelateImage(this.file,this.blockSize);break;case"sketch":t=await this.sketchImage(this.file,this.edgeStrength);break;case"grayscale":t=await this.grayscaleImage(this.file);break;case"invert":t=await this.invertImage(this.file);break;case"sepia":t=await this.sepiaImage(this.file,this.sepiaStrength);break;case"emboss":t=await this.embossImage(this.file,this.embossStrength);break;case"blur":t=await this.blurImage(this.file,this.blurRadius);break;case"oil":t=await this.oilImage(this.file,this.oilBlockSize);break;case"mosaic":t=await this.mosaicImage(this.file,this.mosaicBlockSize);break;case"highcontrast":t=await this.highContrastImage(this.file,this.contrastLevel);break}this.resultUrl=t}catch(t){this.error="处理失败："+(t.message||t)}this.loading=!1,this.progress=0,this.progressText=""}},async pixelateImage(t,e){const a=await this.loadImageFromFile(t),i=a.width,l=a.height,s=document.createElement("canvas");s.width=i,s.height=l;const r=s.getContext("2d");return r.imageSmoothingEnabled=!1,r.clearRect(0,0,i,l),r.drawImage(a,0,0,i/e,l/e),r.drawImage(s,0,0,i/e,l/e,0,0,i,l),s.toDataURL("image/png")},async sketchImage(t,e){const a=await this.loadImageFromFile(t),i=a.width,l=a.height,s=document.createElement("canvas");s.width=i,s.height=l;const r=s.getContext("2d");r.drawImage(a,0,0,i,l);let o=r.getImageData(0,0,i,l);for(let h=0;h<o.data.length;h+=4){const t=(o.data[h]+o.data[h+1]+o.data[h+2])/3;o.data[h]=o.data[h+1]=o.data[h+2]=t}const n=[-1,0,1,-2,0,2,-1,0,1],c=[-1,-2,-1,0,0,0,1,2,1],d=o.data,g=new Uint8ClampedArray(d.length);for(let h=1;h<l-1;h++)for(let t=1;t<i-1;t++){let a=0,l=0;for(let e=-1;e<=1;e++)for(let s=-1;s<=1;s++){const r=4*((h+e)*i+(t+s)),o=d[r],g=3*(e+1)+(s+1);a+=n[g]*o,l+=c[g]*o}const s=Math.sqrt(a*a+l*l)*e,r=4*(h*i+t);g[r]=g[r+1]=g[r+2]=255-Math.min(255,s),g[r+3]=255}return o.data.set(g),r.putImageData(o,0,0),s.toDataURL("image/png")},async grayscaleImage(t){const e=await this.loadImageFromFile(t),a=e.width,i=e.height,l=document.createElement("canvas");l.width=a,l.height=i;const s=l.getContext("2d");s.drawImage(e,0,0,a,i);let r=s.getImageData(0,0,a,i);for(let o=0;o<r.data.length;o+=4){const t=(r.data[o]+r.data[o+1]+r.data[o+2])/3;r.data[o]=r.data[o+1]=r.data[o+2]=t}return s.putImageData(r,0,0),l.toDataURL("image/png")},async invertImage(t){const e=await this.loadImageFromFile(t),a=e.width,i=e.height,l=document.createElement("canvas");l.width=a,l.height=i;const s=l.getContext("2d");s.drawImage(e,0,0,a,i);let r=s.getImageData(0,0,a,i);for(let o=0;o<r.data.length;o+=4)r.data[o]=255-r.data[o],r.data[o+1]=255-r.data[o+1],r.data[o+2]=255-r.data[o+2];return s.putImageData(r,0,0),l.toDataURL("image/png")},async sepiaImage(t,e=1){const a=await this.loadImageFromFile(t),i=a.width,l=a.height,s=document.createElement("canvas");s.width=i,s.height=l;const r=s.getContext("2d");r.drawImage(a,0,0,i,l);let o=r.getImageData(0,0,i,l);for(let n=0;n<o.data.length;n+=4){const t=o.data[n],a=o.data[n+1],i=o.data[n+2];o.data[n]=Math.min(255,t*(1-.607*e)+.769*a*e+.189*i*e),o.data[n+1]=Math.min(255,.349*t*e+a*(1-.314*e)+.168*i*e),o.data[n+2]=Math.min(255,.272*t*e+.534*a*e+i*(1-.869*e))}return r.putImageData(o,0,0),s.toDataURL("image/png")},async embossImage(t,e=1){const a=await this.loadImageFromFile(t),i=a.width,l=a.height,s=document.createElement("canvas");s.width=i,s.height=l;const r=s.getContext("2d");r.drawImage(a,0,0,i,l);let o=r.getImageData(0,0,i,l);const n=o.data;for(let c=1;c<l;c++)for(let t=1;t<i;t++){const a=4*(c*i+t),l=4*((c-1)*i+(t-1));for(let t=0;t<3;t++){const i=n[a+t]-n[l+t]+128;n[a+t]=Math.max(0,Math.min(255,i*e))}}return r.putImageData(o,0,0),s.toDataURL("image/png")},async blurImage(t,e=2){const a=await this.loadImageFromFile(t),i=a.width,l=a.height,s=document.createElement("canvas");s.width=i,s.height=l;const r=s.getContext("2d");return r.filter=`blur(${e}px)`,r.drawImage(a,0,0,i,l),r.filter="none",s.toDataURL("image/png")},async oilImage(t,e=6){const a=await this.loadImageFromFile(t),i=a.width,l=a.height,s=document.createElement("canvas");s.width=i,s.height=l;const r=s.getContext("2d");r.drawImage(a,0,0,i,l);let o=r.getImageData(0,0,i,l);const n=o.data;for(let c=0;c<l;c+=e)for(let t=0;t<i;t+=e){const a={};let l=0,s=[0,0,0];for(let r=0;r<e;r++)for(let o=0;o<e;o++){const e=4*((c+r)*i+(t+o));if(e>=n.length)continue;const d=`${n[e]},${n[e+1]},${n[e+2]}`;a[d]=(a[d]||0)+1,a[d]>l&&(l=a[d],s=[n[e],n[e+1],n[e+2]])}for(let r=0;r<e;r++)for(let a=0;a<e;a++){const e=4*((c+r)*i+(t+a));e>=n.length||(n[e]=s[0],n[e+1]=s[1],n[e+2]=s[2])}}return r.putImageData(o,0,0),s.toDataURL("image/png")},async mosaicImage(t,e=12){const a=await this.loadImageFromFile(t),i=a.width,l=a.height,s=document.createElement("canvas");s.width=i,s.height=l;const r=s.getContext("2d");r.drawImage(a,0,0,i,l);let o=r.getImageData(0,0,i,l);const n=o.data;for(let c=0;c<l;c+=e)for(let t=0;t<i;t+=e){let a=0,l=0,s=0,r=0;for(let o=0;o<e;o++)for(let d=0;d<e;d++){const e=4*((c+o)*i+(t+d));e>=n.length||(a+=n[e],l+=n[e+1],s+=n[e+2],r++)}a=Math.round(a/r),l=Math.round(l/r),s=Math.round(s/r);for(let o=0;o<e;o++)for(let r=0;r<e;r++){const e=4*((c+o)*i+(t+r));e>=n.length||(n[e]=a,n[e+1]=l,n[e+2]=s)}}return r.putImageData(o,0,0),s.toDataURL("image/png")},async highContrastImage(t,e=2){const a=await this.loadImageFromFile(t),i=a.width,l=a.height,s=document.createElement("canvas");s.width=i,s.height=l;const r=s.getContext("2d");r.drawImage(a,0,0,i,l);let o=r.getImageData(0,0,i,l);const n=259*(e+255)/(255*(259-e));for(let c=0;c<o.data.length;c+=4)o.data[c]=Math.max(0,Math.min(255,n*(o.data[c]-128)+128)),o.data[c+1]=Math.max(0,Math.min(255,n*(o.data[c+1]-128)+128)),o.data[c+2]=Math.max(0,Math.min(255,n*(o.data[c+2]-128)+128));return r.putImageData(o,0,0),s.toDataURL("image/png")},loadImageFromFile(t){return new Promise(((e,a)=>{const i=new window.Image;i.onload=()=>e(i),i.onerror=a,i.src=URL.createObjectURL(t)}))},handleDownload(){if(!this.resultUrl)return;const t="pixelate"===this.style?"pixelated.png":"sketch.png";s.A.downloadImage(this.resultUrl,t)}},beforeDestroy(){this.imgUrl&&URL.revokeObjectURL(this.imgUrl),this.imgUrl="",this.resultUrl=""}},o=r,n=a(81656),c=(0,n.A)(o,i,l,!1,null,"7e8f2581",null),d=c.exports}}]);
//# sourceMappingURL=783.8b6563b9.js.map