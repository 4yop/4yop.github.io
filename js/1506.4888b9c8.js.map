{"version":3,"file":"js/1506.4888b9c8.js","mappings":"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","sources":["webpack://web-tool-vue/./src/views/img/ScrambleView.vue","webpack://web-tool-vue/src/views/img/ScrambleView.vue","webpack://web-tool-vue/./src/views/img/ScrambleView.vue?9554","webpack://web-tool-vue/./src/views/img/ScrambleView.vue?7873","webpack://web-tool-vue/./src/util/DownloadUtil.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"modern-bg\"},[_c('el-row',{attrs:{\"gutter\":0,\"justify\":\"center\"}},[_c('el-col',{attrs:{\"xs\":{span: 24, offset: 0},\"sm\":{span: 22, offset: 1},\"md\":{span: 18, offset: 3},\"lg\":{span: 14, offset: 5},\"xl\":{span: 12, offset: 6}}},[_c('el-card',{staticClass:\"modern-card\",attrs:{\"shadow\":\"hover\"}},[_c('div',{staticClass:\"upload-row\"},[_c('el-upload',{attrs:{\"action\":\"#\",\"auto-upload\":false,\"multiple\":false,\"show-file-list\":false,\"accept\":\"image/*\",\"on-change\":_vm.handleUploadChange,\"disabled\":_vm.loading}},[_c('el-button',{attrs:{\"type\":\"primary\",\"round\":\"\",\"disabled\":_vm.loading}},[_vm._v(\"选择图片\")])],1),_c('el-select',{staticStyle:{\"width\":\"120px\",\"margin-left\":\"16px\"},attrs:{\"filterable\":\"\",\"placeholder\":\"切割份数\",\"disabled\":_vm.loading},model:{value:(_vm.n),callback:function ($$v) {_vm.n=$$v},expression:\"n\"}},_vm._l((_vm.nOptions),function(opt){return _c('el-option',{key:opt,attrs:{\"label\":opt + '份',\"value\":opt}})}),1),_c('el-button',{attrs:{\"type\":\"success\",\"round\":\"\",\"disabled\":!_vm.file || _vm.loading},on:{\"click\":_vm.handleScramble}},[_vm._v(\"切割并打乱\")]),(_vm.scrambledUrl)?_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\",\"disabled\":_vm.loading},on:{\"click\":_vm.handleDownload}},[_vm._v(\"下载拼图\")]):_vm._e()],1),(_vm.loading || _vm.progress > 0)?_c('el-progress',{staticStyle:{\"margin\":\"16px 0\"},attrs:{\"percentage\":_vm.progress,\"status\":\"success\",\"stroke-width\":16,\"text-inside\":\"\"}}):_vm._e(),(_vm.error)?_c('div',{staticStyle:{\"color\":\"#f56c6c\",\"margin\":\"12px 0\",\"text-align\":\"center\"}},[_vm._v(_vm._s(_vm.error))]):_vm._e(),_c('el-row',{staticStyle:{\"margin-top\":\"24px\"},attrs:{\"gutter\":16}},[_c('el-col',{attrs:{\"span\":12}},[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('div',{staticStyle:{\"font-weight\":\"600\",\"margin-bottom\":\"8px\"}},[_vm._v(\"原图预览\")]),(_vm.imgUrl)?_c('el-image',{staticStyle:{\"max-width\":\"100%\",\"max-height\":\"320px\",\"border-radius\":\"10px\",\"box-shadow\":\"0 2px 8px rgba(0,0,0,0.08)\"},attrs:{\"src\":_vm.imgUrl,\"preview-src-list\":_vm.loading ? [] : [_vm.imgUrl,_vm.scrambledUrl],\"fit\":\"contain\"}}):_c('div',{staticStyle:{\"color\":\"#ccc\"}},[_vm._v(\"请上传图片\")])],1)]),_c('el-col',{staticStyle:{\"position\":\"relative\"},attrs:{\"span\":12}},[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('div',{staticStyle:{\"font-weight\":\"600\",\"margin-bottom\":\"8px\"}},[_vm._v(\"打乱拼图预览\")]),_c('div',{staticClass:\"img-mask-wrap\"},[_c('div',{staticClass:\"img-mask-inner\",staticStyle:{\"position\":\"relative\"}},[(_vm.scrambledUrl)?_c('el-image',{ref:\"scrambledImg\",staticStyle:{\"max-width\":\"100%\",\"border-radius\":\"10px\",\"box-shadow\":\"0 2px 8px rgba(0,0,0,0.08)\",\"background\":\"#f0f9eb\"},attrs:{\"src\":_vm.scrambledUrl,\"max-height\":'auto',\"fit\":\"contain\",\"preview-src-list\":_vm.loading ? [] : [_vm.scrambledUrl,_vm.imgUrl]}}):_vm._e(),(_vm.showMask && _vm.loading)?_c('div',{staticClass:\"scramble-mask-overlay\",style:(_vm.scrambleMaskStyle)},[_c('div',{staticClass:\"scramble-mask-content\"})]):_vm._e(),(_vm.loading && _vm.progress > 0 && _vm.progress < 100)?_c('div',{staticClass:\"scramble-progress-overlay\"},[_c('span',[_vm._v(_vm._s(_vm.progressText))])]):_vm._e()],1)])])])],1)],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\r\nimport DownloadUtil from '@/util/DownloadUtil'\r\n\r\nexport default {\r\n  name: 'ScrambleView',\r\n  metaInfo: {\r\n    title: '图片切割打乱工具 - 生成混乱拼图效果',\r\n    meta: [\r\n      { name: 'description', content: '将图片均匀分块并打乱顺序，可用于生成拼图谜题、视觉干扰图或趣味图像实验。' },\r\n      { name: 'keywords', content: '图片打乱,图片碎片,拼图工具,在线图像切割,图像干扰' }\r\n    ]\r\n  },\r\n  data() {\r\n    return {\r\n\r\n      file: null,\r\n      imgUrl: '',\r\n      n: 9,\r\n      nOptions:  [] ,\r\n      scrambledUrl: '',\r\n      loading: false,\r\n      error: '',\r\n      showMask: false,\r\n      progress: 0,\r\n      progressText: '',\r\n      scrambleMaskStyle: {}\r\n    }\r\n  },\r\n  created() {\r\n      if (window.__PRERENDER_INJECTED__) return;\r\n      this.nOptions = Array.from({length: 100}, (_, i) => (i+2)*(i+2)).filter(n => n <= 1000000);\r\n  },\r\n  methods: {\r\n    handleUploadChange(file, fileList) {\r\n      if (fileList.length > 0) {\r\n        this.file = fileList[fileList.length - 1].raw || fileList[fileList.length - 1];\r\n        this.imgUrl = URL.createObjectURL(this.file);\r\n        this.scrambledUrl = '';\r\n        this.error = '';\r\n      } else {\r\n        this.file = null;\r\n        this.imgUrl = '';\r\n        this.scrambledUrl = '';\r\n        this.error = '';\r\n      }\r\n    },\r\n    async handleScramble() {\r\n      if (!this.file || !this.n) return;\r\n      // 校验n为完全平方数\r\n      const size = Math.sqrt(this.n);\r\n      if (size % 1 !== 0) {\r\n        this.$message.error('份数必须是完全平方数（如4、9、16、25...）');\r\n        return;\r\n      }\r\n      this.loading = true;\r\n      this.showMask = true;\r\n      this.progress = 0;\r\n      this.progressText = '切割图片中...';\r\n      this.error = '';\r\n      try {\r\n        const url = await this.splitAndShuffleImage(this.file, this.n);\r\n        this.scrambledUrl = url;\r\n      } catch (e) {\r\n        this.error = '处理失败：' + (e.message || e);\r\n      }\r\n      this.loading = false;\r\n      this.showMask = false;\r\n      this.progress = 0;\r\n      this.progressText = '';\r\n    },\r\n    async splitAndShuffleImage(file, n) {\r\n      const size = Math.sqrt(n);\r\n      if (size % 1 !== 0) throw new Error('N 必须是完全平方数');\r\n      const img = await this.loadImageFromFile(file);\r\n      const blockW = Math.floor(img.width / size);\r\n      const blockH = Math.floor(img.height / size);\r\n      // 生成打乱顺序\r\n      const indices = Array.from({length: n}, (_, i) => i);\r\n      for (let i = n - 1; i > 0; i--) {\r\n        const j = Math.floor(Math.random() * (i + 1));\r\n        [indices[i], indices[j]] = [indices[j], indices[i]];\r\n      }\r\n      // 合并目标canvas\r\n      const outCanvas = document.createElement('canvas');\r\n      outCanvas.width = blockW * size;\r\n      outCanvas.height = blockH * size;\r\n      const outCtx = outCanvas.getContext('2d');\r\n      // 边切割边合并边释放\r\n      for (let k = 0; k < n; k++) {\r\n        const idx = indices[k];\r\n        const sx = (idx % size) * blockW;\r\n        const sy = Math.floor(idx / size) * blockH;\r\n        // 切割一块\r\n        const canvas = document.createElement('canvas');\r\n        canvas.width = blockW;\r\n        canvas.height = blockH;\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.drawImage(img, sx, sy, blockW, blockH, 0, 0, blockW, blockH);\r\n        // 合并到目标canvas\r\n        const dx = (k % size) * blockW;\r\n        const dy = Math.floor(k / size) * blockH;\r\n        outCtx.drawImage(canvas, dx, dy);\r\n        // 移除绘制数字进度到图片的代码\r\n        // 进度条\r\n        this.progress = Math.round(((k+1) / n) * 100);\r\n        this.progressText = `切割合并 ${k+1}/${n}`;\r\n        await new Promise(r => setTimeout(r, 0));\r\n      }\r\n      this.progress = 100;\r\n      this.progressText = '完成';\r\n      await this.$nextTick();\r\n      return outCanvas.toDataURL('image/png');\r\n    },\r\n    loadImageFromFile(file) {\r\n      return new Promise((resolve, reject) => {\r\n        const img = new window.Image();\r\n        img.onload = () => resolve(img);\r\n        img.onerror = reject;\r\n        img.src = URL.createObjectURL(file);\r\n      });\r\n    },\r\n    handleDownload() {\r\n      if (!this.scrambledUrl) return;\r\n      DownloadUtil.downloadImage(this.scrambledUrl, 'scrambled.png');\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    if (this.imgUrl) URL.revokeObjectURL(this.imgUrl);\r\n    this.imgUrl = '';\r\n    this.scrambledUrl = '';\r\n    // 其它临时blob已在splitAndShuffleImage中释放或未生成\r\n  },\r\n  watch: {\r\n    showMask(val) {\r\n      if (val) {\r\n        this.$nextTick(() => {\r\n          const imgDiv = this.$refs.scrambledImg && this.$refs.scrambledImg.$el;\r\n          if (imgDiv) {\r\n            this.scrambleMaskStyle = {\r\n              width: imgDiv.offsetWidth + 'px',\r\n              height: imgDiv.offsetHeight + 'px',\r\n              borderRadius: '10px'\r\n            };\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div class=\"modern-bg\">\r\n    <el-row :gutter=\"0\" justify=\"center\">\r\n      <el-col :xs=\"{span: 24, offset: 0}\" :sm=\"{span: 22, offset: 1}\" :md=\"{span: 18, offset: 3}\" :lg=\"{span: 14, offset: 5}\" :xl=\"{span: 12, offset: 6}\">\r\n        <el-card shadow=\"hover\" class=\"modern-card\">\r\n          <div class=\"upload-row\">\r\n            <el-upload\r\n              action=\"#\"\r\n              :auto-upload=\"false\"\r\n              :multiple=\"false\"\r\n              :show-file-list=\"false\"\r\n              accept=\"image/*\"\r\n              :on-change=\"handleUploadChange\"\r\n              :disabled=\"loading\"\r\n            >\r\n              <el-button type=\"primary\" round :disabled=\"loading\">选择图片</el-button>\r\n            </el-upload>\r\n            <el-select v-model=\"n\" filterable placeholder=\"切割份数\" style=\"width: 120px; margin-left: 16px;\"\r\n              :disabled=\"loading\"\r\n            >\r\n              <el-option v-for=\"opt in nOptions\" :key=\"opt\" :label=\"opt + '份'\" :value=\"opt\" />\r\n            </el-select>\r\n            <el-button type=\"success\" round :disabled=\"!file || loading\" @click=\"handleScramble\">切割并打乱</el-button>\r\n            <el-button v-if=\"scrambledUrl\" type=\"primary\" size=\"mini\" @click=\"handleDownload\" :disabled=\"loading\">下载拼图</el-button>\r\n          </div>\r\n          <el-progress v-if=\"loading || progress > 0\" :percentage=\"progress\" status=\"success\" :stroke-width=\"16\" text-inside style=\"margin: 16px 0;\" />\r\n          <div v-if=\"error\" style=\"color: #f56c6c; margin: 12px 0; text-align: center;\">{{error}}</div>\r\n          <el-row :gutter=\"16\" style=\"margin-top: 24px;\">\r\n            <el-col :span=\"12\">\r\n              <div style=\"text-align:center;\">\r\n                <div style=\"font-weight:600; margin-bottom:8px;\">原图预览</div>\r\n                <el-image v-if=\"imgUrl\" :src=\"imgUrl\"   :preview-src-list=\"loading ? [] : [imgUrl,scrambledUrl]\" style=\"max-width:100%;max-height:320px;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,0.08);\" fit=\"contain\" />\r\n                <div v-else style=\"color:#ccc;\">请上传图片</div>\r\n              </div>\r\n            </el-col>\r\n            <el-col :span=\"12\" style=\"position:relative;\">\r\n              <div style=\"text-align:center;\">\r\n                <div style=\"font-weight:600; margin-bottom:8px;\">打乱拼图预览</div>\r\n                <div class=\"img-mask-wrap\">\r\n                  <div class=\"img-mask-inner\" style=\"position:relative;\">\r\n                    <el-image\r\n                      v-if=\"scrambledUrl\"\r\n                      ref=\"scrambledImg\"\r\n                      :src=\"scrambledUrl\"\r\n                      :max-height=\"'auto'\"\r\n                      style=\"max-width:100%;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,0.08);background:#f0f9eb;\"\r\n                      fit=\"contain\"\r\n                      :preview-src-list=\"loading ? [] : [scrambledUrl,imgUrl]\"\r\n                    />\r\n                    <div\r\n                      v-if=\"showMask && loading\"\r\n                      class=\"scramble-mask-overlay\"\r\n                      :style=\"scrambleMaskStyle\"\r\n                    >\r\n                      <div class=\"scramble-mask-content\"></div>\r\n                    </div>\r\n                    <!-- 新增：合并进度数字覆盖层 -->\r\n                    <div v-if=\"loading && progress > 0 && progress < 100\" class=\"scramble-progress-overlay\">\r\n                      <span>{{progressText}}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </el-col>\r\n          </el-row>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.el-image{\r\n    max-height: 100% !important;\r\n}\r\n.modern-bg {\r\n  //min-height: 100vh;\r\n  background: #f6f8fa;\r\n  //padding: 32px 0;\r\n}\r\n.modern-card {\r\n  border-radius: 16px;\r\n  box-shadow: 0 4px 24px rgba(0,0,0,0.08);\r\n  margin-bottom: 32px;\r\n}\r\n.upload-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n}\r\n.img-mask-wrap {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n.img-mask-inner {\r\n  position: relative;\r\n  width: 100%;\r\n  min-height: 320px; /* 新增，确保进度字能居中 */\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.scramble-mask-overlay {\r\n  position: absolute;\r\n  left: 0; top: 0; right: 0; bottom: 0;\r\n  background: rgba(255,255,255,0.85);\r\n  z-index: 10;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 10px;\r\n  pointer-events: auto;\r\n}\r\n.scramble-mask-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 100%;\r\n  height: 100%;\r\n  text-align: center;\r\n}\r\n.scramble-progress-overlay {\r\n  position: absolute;\r\n  left: 0; top: 0; right: 0; bottom: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 3em;\r\n  font-weight: bold;\r\n  color: #fff;\r\n  background: rgba(0,0,0,0.25);\r\n  z-index: 20;\r\n  pointer-events: none;\r\n  border-radius: 10px;\r\n  text-shadow: 0 2px 8px #000, 0 0 2px #fff;\r\n}\r\n.scramble-progress-overlay span {\r\n  width: 100%;\r\n  text-align: center;\r\n  line-height: 1.2;\r\n  display: block;\r\n}\r\n@media screen and (max-width: 768px) {\r\n  .el-row[style*=\"margin-top: 24px;\"] {\r\n    flex-direction: column !important;\r\n  }\r\n  .el-col {\r\n    width: 100% !important;\r\n    max-width: 100% !important;\r\n    flex: 0 0 100% !important;\r\n  }\r\n}\r\n</style> ","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ScrambleView.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ScrambleView.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ScrambleView.vue?vue&type=template&id=0c93bea1&scoped=true\"\nimport script from \"./ScrambleView.vue?vue&type=script&lang=js\"\nexport * from \"./ScrambleView.vue?vue&type=script&lang=js\"\nimport style0 from \"./ScrambleView.vue?vue&type=style&index=0&id=0c93bea1&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0c93bea1\",\n  null\n  \n)\n\nexport default component.exports","/**\n * 下载工具类\n * 封装各种下载功能，避免重复代码\n */\nexport class DownloadUtil {\n    /**\n     * 下载文本文件\n     * @param {string} content - 文件内容\n     * @param {string} filename - 文件名\n     * @param {string} mimeType - MIME类型\n     */\n    static downloadText(content, filename, mimeType = 'text/plain') {\n        const blob = new Blob([content], { type: mimeType })\n        this.downloadBlob(blob, filename)\n    }\n\n    /**\n     * 下载JSON文件\n     * @param {Object} data - JSON数据\n     * @param {string} filename - 文件名\n     */\n    static downloadJSON(data, filename = 'data.json') {\n        const content = JSON.stringify(data, null, 2)\n        this.downloadText(content, filename, 'application/json')\n    }\n\n    /**\n     * 下载CSV文件\n     * @param {Array} data - CSV数据数组\n     * @param {string} filename - 文件名\n     * @param {Array} headers - 表头数组\n     */\n    static downloadCSV(data, filename = 'data.csv', headers = null) {\n        let csvContent = ''\n        \n        // 添加表头\n        if (headers && headers.length > 0) {\n            csvContent += headers.join(',') + '\\n'\n        }\n        \n        // 添加数据行\n        data.forEach(row => {\n            if (Array.isArray(row)) {\n                csvContent += row.map(field => `\"${field}\"`).join(',') + '\\n'\n            } else if (typeof row === 'object') {\n                const values = headers ? headers.map(header => row[header] || '') : Object.values(row)\n                csvContent += values.map(field => `\"${field}\"`).join(',') + '\\n'\n            }\n        })\n        \n        // 添加BOM以支持中文\n        const BOM = '\\uFEFF'\n        this.downloadText(BOM + csvContent, filename, 'text/csv;charset=utf-8')\n    }\n\n    /**\n     * 下载图片文件\n     * @param {string} dataURL - 图片DataURL\n     * @param {string} filename - 文件名\n     */\n    static downloadImage(dataURL, filename = 'image.png') {\n        const link = document.createElement('a')\n        link.download = filename\n        link.href = dataURL\n        document.body.appendChild(link)\n        link.click()\n        document.body.removeChild(link)\n    }\n\n    /**\n     * 下载Canvas为图片\n     * @param {HTMLCanvasElement} canvas - Canvas元素\n     * @param {string} filename - 文件名\n     * @param {string} format - 图片格式\n     * @param {number} quality - 图片质量(0-1)\n     */\n    static downloadCanvas(canvas, filename = 'canvas.png', format = 'image/png', quality = 1.0) {\n        const dataURL = canvas.toDataURL(format, quality)\n        this.downloadImage(dataURL, filename)\n    }\n\n    /**\n     * 下载Blob对象\n     * @param {Blob} blob - Blob对象\n     * @param {string} filename - 文件名\n     */\n    static downloadBlob(blob, filename) {\n        const url = URL.createObjectURL(blob)\n        const link = document.createElement('a')\n        link.href = url\n        link.download = filename\n        document.body.appendChild(link)\n        link.click()\n        document.body.removeChild(link)\n        URL.revokeObjectURL(url)\n    }\n\n    /**\n     * 下载URL指向的文件\n     * @param {string} url - 文件URL\n     * @param {string} filename - 文件名\n     */\n    static downloadURL(url, filename) {\n        const link = document.createElement('a')\n        link.href = url\n        link.download = filename\n        link.target = '_blank'\n        document.body.appendChild(link)\n        link.click()\n        document.body.removeChild(link)\n    }\n\n    /**\n     * 批量下载文件为ZIP\n     * @param {Array} files - 文件数组 [{name: string, content: string|Blob}]\n     * @param {string} zipName - ZIP文件名\n     */\n    static async downloadZip(files, zipName = 'files.zip') {\n        // 动态导入JSZip\n        const JSZip = (await import('jszip')).default\n        const zip = new JSZip()\n\n        // 添加文件到ZIP\n        files.forEach(file => {\n            if (file.content instanceof Blob) {\n                zip.file(file.name, file.content)\n            } else {\n                zip.file(file.name, file.content)\n            }\n        })\n\n        // 生成ZIP并下载\n        try {\n            const content = await zip.generateAsync({ type: 'blob' })\n            this.downloadBlob(content, zipName)\n            return true\n        } catch (error) {\n            console.error('生成ZIP文件失败:', error)\n            return false\n        }\n    }\n\n    /**\n     * 从URL获取Blob\n     * @param {string} url - 文件URL\n     * @returns {Promise<Blob>} Blob对象\n     */\n    static async fetchBlob(url) {\n        try {\n            const response = await fetch(url)\n            if (!response.ok) {\n                throw new Error(`HTTP error! status: ${response.status}`)\n            }\n            return await response.blob()\n        } catch (error) {\n            console.error('获取文件失败:', error)\n            throw error\n        }\n    }\n\n    /**\n     * 生成带时间戳的文件名\n     * @param {string} baseName - 基础文件名\n     * @param {string} extension - 文件扩展名\n     * @returns {string} 带时间戳的文件名\n     */\n    static generateTimestampFilename(baseName, extension) {\n        const timestamp = new Date().toISOString().replace(/[:.]/g, '-').slice(0, -5)\n        return `${baseName}_${timestamp}.${extension}`\n    }\n\n    /**\n     * 获取文件大小的可读格式\n     * @param {number} bytes - 字节数\n     * @returns {string} 格式化的文件大小\n     */\n    static formatFileSize(bytes) {\n        if (bytes === 0) return '0 Bytes'\n        \n        const k = 1024\n        const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB']\n        const i = Math.floor(Math.log(bytes) / Math.log(k))\n        \n        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n    }\n}\n\nexport default DownloadUtil\n"],"names":["render","_vm","this","_c","_self","staticClass","attrs","span","offset","handleUploadChange","loading","_v","staticStyle","model","value","n","callback","$$v","expression","_l","nOptions","opt","key","file","on","handleScramble","scrambledUrl","handleDownload","_e","progress","error","_s","imgUrl","ref","showMask","style","scrambleMaskStyle","progressText","staticRenderFns","name","metaInfo","title","meta","content","data","created","window","__PRERENDER_INJECTED__","Array","from","length","_","i","filter","methods","fileList","raw","URL","createObjectURL","size","Math","sqrt","url","splitAndShuffleImage","e","message","$message","Error","img","loadImageFromFile","blockW","floor","width","blockH","height","indices","j","random","outCanvas","document","createElement","outCtx","getContext","k","idx","sx","sy","canvas","ctx","drawImage","dx","dy","round","Promise","r","setTimeout","$nextTick","toDataURL","resolve","reject","Image","onload","onerror","src","DownloadUtil","downloadImage","beforeDestroy","revokeObjectURL","watch","val","imgDiv","$refs","scrambledImg","$el","offsetWidth","offsetHeight","borderRadius","component","downloadText","filename","mimeType","blob","Blob","type","downloadBlob","downloadJSON","JSON","stringify","downloadCSV","headers","csvContent","join","forEach","row","isArray","map","field","values","header","Object","BOM","dataURL","link","download","href","body","appendChild","click","removeChild","downloadCanvas","format","quality","downloadURL","target","downloadZip","files","zipName","JSZip","default","zip","generateAsync","console","fetchBlob","response","fetch","ok","status","generateTimestampFilename","baseName","extension","timestamp","Date","toISOString","replace","slice","formatFileSize","bytes","sizes","log","parseFloat","pow","toFixed"],"sourceRoot":""}