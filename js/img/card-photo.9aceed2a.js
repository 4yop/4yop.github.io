(function(){"use strict";var t={66540:function(t,e,a){var n=a(66848),s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-photo-container"},[e("el-card",{staticClass:"box-card",attrs:{"body-style":{padding:"0px"}}},[e("div",{staticClass:"top-controls"},[e("span",{staticClass:"control-label"},[t._v("证件要求:")]),e("el-select",{staticStyle:{width:"120px","margin-right":"10px"},attrs:{size:"small",disabled:t.saveIng},on:{change:t.changeStandard},model:{value:t.params.standard,callback:function(e){t.$set(t.params,"standard",e)},expression:"params.standard"}},t._l(t.standards,(function(t){return e("el-option",{key:t.label,attrs:{label:t.label,value:t.label}})})),1),e("span",{staticClass:"control-label"},[t._v("宽度:")]),e("el-input-number",{staticStyle:{width:"110px"},attrs:{min:100,size:"small",type:"number",disabled:t.saveIng},model:{value:t.params.width,callback:function(e){t.$set(t.params,"width",e)},expression:"params.width"}}),e("span",{staticClass:"unit"},[t._v("px")]),e("span",{staticClass:"control-label"},[t._v("高度:")]),e("el-input-number",{staticStyle:{width:"110px"},attrs:{min:100,size:"small",disabled:t.saveIng,type:"number"},model:{value:t.params.height,callback:function(e){t.$set(t.params,"height",e)},expression:"params.height"}}),e("span",{staticClass:"unit"},[t._v("px")]),e("span",{staticClass:"control-label"},[t._v("背景颜色:")]),e("el-select",{staticStyle:{width:"100px","margin-right":"10px"},attrs:{size:"small",disabled:t.saveIng},model:{value:t.params.background,callback:function(e){t.$set(t.params,"background",e)},expression:"params.background"}},t._l(t.backgrounds,(function(a){return e("el-option",{key:a.value,attrs:{label:a.label,value:a.value}},[e("span",{staticClass:"color-swatch",style:{background:a.value}}),t._v(" "+t._s(a.label)+" ")])})),1),e("el-color-picker",{model:{value:t.params.background,callback:function(e){t.$set(t.params,"background",e)},expression:"params.background"}}),e("el-button",{attrs:{type:"primary",size:"small",loading:t.imgInfo.snapping,disabled:t.imgInfo.snapping||!t.imgInfo.img||t.saveIng},on:{click:function(e){return t.removeBg()}}},[t._v(" "+t._s(t.imgInfo.snapping?"抠图中...":"开始抠图")+" ")])],1),e("div",{staticClass:"main-content-wrapper"},[e("el-row",{attrs:{gutter:0}},[e("el-col",{staticClass:"preview-area",attrs:{xs:{span:24,offset:0},sm:{span:24,offset:0},md:{span:12,offset:0},lg:{span:6,offset:0},xl:{span:6,offset:0}}},[e("div",{staticClass:"canvas-wrapper"},[e("el-upload",{staticClass:"upload-overlay",attrs:{action:"#","show-file-list":!1,"auto-upload":!1,"on-change":t.handleUploadChange,accept:"image/*"}},[t.imgInfo.img?e("img",{staticClass:"original-image-preview",attrs:{src:t.imgInfo.img,alt:"Uploaded Original Image"}}):e("div",{staticClass:"upload-text"},[e("i",{staticClass:"el-icon-picture-outline"}),e("p",[t._v("点击选择图片")])])]),t._e()],1)]),e("el-col",{staticClass:"placeholder-area",attrs:{md:{span:12,offset:0},lg:{span:6,offset:0},xl:{span:6,offset:0}}},[t.imgInfo.snapImg?e("div",[e("span",{staticClass:"control-label"},[t._v("宽:")]),e("el-input-number",{staticStyle:{width:"110px"},attrs:{size:"small",disabled:t.saveIng,type:"number"},on:{change:t.changeAfterWidth},model:{value:t.afterImgStyle.width,callback:function(e){t.$set(t.afterImgStyle,"width",e)},expression:"afterImgStyle.width"}}),e("span",{staticClass:"unit"},[t._v("px")]),e("span",{staticClass:"control-label"},[t._v("左:")]),e("el-input-number",{staticStyle:{width:"110px"},attrs:{size:"small",disabled:t.saveIng,type:"number"},model:{value:t.afterImgStyle.left,callback:function(e){t.$set(t.afterImgStyle,"left",e)},expression:"afterImgStyle.left"}}),e("span",{staticClass:"unit"},[t._v("px")]),e("span",{staticClass:"control-label"},[t._v("上:")]),e("el-input-number",{staticStyle:{width:"110px"},attrs:{size:"small",disabled:t.saveIng,type:"number"},model:{value:t.afterImgStyle.top,callback:function(e){t.$set(t.afterImgStyle,"top",e)},expression:"afterImgStyle.top"}}),e("span",{staticClass:"unit"},[t._v("px")]),e("el-button",{attrs:{type:"success",size:"small",loading:t.saveIng,disabled:t.saveIng},on:{click:function(e){return t.saveFile()}}},[t._v(" 另存为 ")])],1):t._e(),e("div",{staticStyle:{position:"relative",overflow:"hidden",display:"block",margin:"0",padding:"0"},style:{width:t.params.width+"px",height:t.params.height+"px",background:t.params.background},attrs:{id:"card-photo-container"}},[t.imgInfo.snapImg?e("img",{staticStyle:{position:"absolute",display:"block",margin:"0",padding:"0"},style:{width:t.afterImgStyle.width+"px",height:t.afterImgStyle.height+"px",top:t.afterImgStyle.top+"px",left:t.afterImgStyle.left+"px"},attrs:{src:t.imgInfo.snapImg,alt:"扣图后的"},on:{load:t.loadSnapImg}}):e("div",{staticClass:"info-text"},[e("p",[t._v("证件照标准信息和操作提示")]),e("p",[t._v("当前尺寸: "+t._s(t.params.width)+"x"+t._s(t.params.height)+" px")]),e("p",[t._v("当前背景: "+t._s(t.params.background))]),t.isPreloaded?t._e():e("p",{staticStyle:{color:"orange","font-weight":"bold"}},[t._v("模型正在后台加载...")]),t.imgInfo.snapping?e("div",[e("p",[t._v("用时:"+t._s((t.imgInfo.endTime-t.imgInfo.startTime)/1e3)+"秒")]),e("p",[t._v("说明:"+t._s(t.imgInfo.msg))]),t.imgInfo.imgError.length>0?e("p",[t._v("错误:"+t._s(t.imgInfo.imgError))]):t._e()]):t._e()])])])],1)],1),t._e()]),e("el-row",{attrs:{gutter:0,justify:"center"}},[e("el-col",{attrs:{xs:{span:24,offset:0},sm:{span:22,offset:1},md:{span:18,offset:3},lg:{span:14,offset:5},xl:{span:12,offset:6}}},[e("el-card",{staticClass:"modern-card",attrs:{shadow:"hover"}},[e("h3",{staticClass:"modern-title"},[t._v("模型加载进度("+t._s(t.isPreloaded?"已加载":"加载中")+")")]),e("el-divider"),e("el-table",{staticStyle:{width:"100%","max-width":"900px",margin:"0 auto"},attrs:{data:Object.values(t.loadModelProcess),border:""}},[e("el-table-column",{attrs:{label:"模型",prop:"key",align:"center"}}),e("el-table-column",{attrs:{label:"尺寸",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.current)+"/"+t._s(e.row.total))]}}])}),e("el-table-column",{attrs:{label:"进度",prop:"progress",align:"center"}})],1)],1)],1)],1)],1)},i=[],r=(a(14603),a(47566),a(98721),a(29132)),l=a(54675),o=a(78015),c=a(75912),d=a(45492),g=new WeakMap,u=new WeakMap;class p{constructor(){(0,r.A)(this,g,{}),(0,r.A)(this,u,!1)}getProcess(){return(0,o.A)(g,this)}getIsPreloaded(){return(0,o.A)(u,this)}loadModel(){if(window.__PRERENDER_INJECTED__)return void(0,l.A)(u,this,!0);let t={debug:!0,proxyToWorker:!0,model:"small",output:{format:"image/png",quality:1,type:"foreground"},progress:(t,e,a)=>{void 0===(0,o.A)(g,this)[t]&&((0,o.A)(g,this)[t]={key:t,current:0,total:0}),(0,o.A)(g,this)[t]={key:t,current:c.A.formatBytes(e),total:c.A.formatBytes(a),progress:100*e/a+"%"},console.log(`Downloading ${t}: ${e} of ${a}`)}};(0,d.uv)(t).then((()=>{(0,l.A)(u,this,!0),console.log("Background removal resources preloaded")}))}async removeBg(t){const e=await(0,d.Ay)(t);return{blob:e,url:URL.createObjectURL(e)}}async snap(t){try{if(null!==t.snapImg)return;if(t.imgError)return void(t.msg="选择的图片文件有误");if(!t.img)return void(t.msg="没上传");if(t.snapping)return;console.log(30),t.msg="扣图中...",t.snapping=!0,t.startTime=(new Date).getTime(),t.timer=setInterval((()=>{t.endTime=(new Date).getTime()}));const e=await(0,d.Ay)(t.img);t.timer=null,t.endTime=(new Date).getTime(),t.snapImg=URL.createObjectURL(e),t.snapImgFile=e,t.snapping=!1,t.msg="完成"}catch(e){t.msg=e.msg}finally{t.timer&&(clearInterval(t.timer),t.timer=null)}return t}}const m=new p;m.loadModel();var f=m,h=a(97515),v={name:"CardPhotoView",metaInfo:{title:"证件照生成工具",meta:[{name:"description",content:"免费在线 AI 证件照生成工具。支持一寸、二寸等多种标准尺寸，自动精准抠图、智能换红/蓝/白底色。快速制作合格的专业证件照片，无需下载，一键保存。"},{name:"keywords",content:"证件照制作, 证件照生成, 证件照换底色, 证件照尺寸, 一寸证件照, 二寸证件照, 证件照在线制作, AI 抠图"}]},data(){return{standards:[{label:"一寸 (295x413px)",width:295,height:413,ratio:1.4},{label:"二寸 (413x579px)",width:413,height:579,ratio:1.4}],backgrounds:[{label:"白底",value:"#ffffff"},{label:"蓝底",value:"#0070c0"},{label:"红底",value:"#d0021b"},{label:"浅蓝",value:"#00BFFF"},{label:"证件蓝",value:"#4169E1"},{label:"柔和淡蓝",value:"#D1EEEE"}],params:{standard:"一寸 (295x413px)",width:295,height:413,background:"#0070c0"},afterImgStyle:{source_width:0,source_height:0,width:0,height:0,top:0,left:0},loadModelProcess:{},isPreloaded:!1,saveIng:!1,imgInfo:{img:"",imgFile:null,snapImg:null,snapImgSize:0,snapImgFile:null,imgError:!1,startTime:(new Date).getTime(),endTime:(new Date).getTime(),timer:null,snapping:!1,msg:""}}},computed:{},mounted(){this.checkMatting()},methods:{changeAfterWidth(){const t=this.afterImgStyle.source_width/this.afterImgStyle.width;console.log(t),this.afterImgStyle.height=this.afterImgStyle.source_height/t,console.log("changeAfterWidth")},changeStandard(){for(const t of this.standards)if(this.params.standard===t.label){this.params.width=t.width,this.params.height=t.height;break}},loadSnapImg(t){const e=t.target,a=e.naturalWidth,n=e.naturalHeight;this.afterImgStyle.source_width=a,this.afterImgStyle.source_height=n,console.log(this.afterImgStyle);const s=this.afterImgStyle.source_width/this.params.width;this.afterImgStyle.height=this.afterImgStyle.source_height/s,this.afterImgStyle.width=this.params.width,this.afterImgStyle.top=this.params.height-this.afterImgStyle.height},async saveFile(){this.saveIng=!0;try{const t=await h.A.elementToImage("#card-photo-container");await c.A.download(t,"证件照.tool.4yop.com.png"),this.$message.success("保存成功")}catch(t){console.log(t),this.$message.error("出错:"+t.message)}finally{this.saveIng=!1}},async removeBg(){this.imgInfo=await f.snap(this.imgInfo),this.afterImgStyle={source_width:0,source_height:0,width:0,height:0,top:0,left:0}},handleUploadChange(t){const e=t.raw||t;if(!e.type.startsWith("image/"))return this.$alert("必须选择的是图片");if(e.type.startsWith("image/gif"))return this.$alert("不能用gif图");let a={img:URL.createObjectURL(e),imgFile:e,snapImg:null,snapImgSize:0,snapImgFile:null,imgError:!1,startTime:(new Date).getTime(),endTime:(new Date).getTime(),timer:null,snapping:!1,msg:""};this.imgInfo=a},checkMatting(){const t=setInterval((()=>{this.isPreloaded=f.getIsPreloaded(),this.loadModelProcess=f.getProcess(),this.isPreloaded&&clearInterval(t)}),3e3)}},watch:{}},b=v,y=a(81656),w=(0,y.A)(b,s,i,!1,null,"d5d85722",null),I=w.exports,_=a(89143),x=a.n(_);n["default"].config.productionTip=!1,n["default"].use(x()),new n["default"]({render:t=>t(I),mounted(){document.dispatchEvent(new Event("render-event"))}}).$mount("#app")}},e={};function a(n){var s=e[n];if(void 0!==s)return s.exports;var i=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=t,function(){a.amdD=function(){throw new Error("define cannot be used indirect")}}(),function(){a.amdO={}}(),function(){var t=[];a.O=function(e,n,s,i){if(!n){var r=1/0;for(d=0;d<t.length;d++){n=t[d][0],s=t[d][1],i=t[d][2];for(var l=!0,o=0;o<n.length;o++)(!1&i||r>=i)&&Object.keys(a.O).every((function(t){return a.O[t](n[o])}))?n.splice(o--,1):(l=!1,i<r&&(r=i));if(l){t.splice(d--,1);var c=s();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[n,s,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){var t,e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__};a.t=function(n,s){if(1&s&&(n=this(n)),8&s)return n;if("object"===typeof n&&n){if(4&s&&n.__esModule)return n;if(16&s&&"function"===typeof n.then)return n}var i=Object.create(null);a.r(i);var r={};t=t||[null,e({}),e([]),e(e)];for(var l=2&s&&n;"object"==typeof l&&!~t.indexOf(l);l=e(l))Object.getOwnPropertyNames(l).forEach((function(t){r[t]=function(){return n[t]}}));return r["default"]=function(){return n},a.d(i,r),i}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.e=function(){return Promise.resolve()}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){a.j=6463}(),function(){var t={6463:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var s,i,r=n[0],l=n[1],o=n[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(s in l)a.o(l,s)&&(a.m[s]=l[s]);if(o)var d=o(a)}for(e&&e(n);c<r.length;c++)i=r[c],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(d)},n=self["webpackChunkweb_tool_vue"]=self["webpackChunkweb_tool_vue"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504,996],(function(){return a(66540)}));n=a.O(n)})();