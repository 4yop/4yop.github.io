(function(){"use strict";var t={60446:function(t,e,r){var n=r(66848),o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modern-bg"},[e("el-row",{attrs:{gutter:0,justify:"center"}},[e("el-col",{attrs:{xs:{span:24,offset:0},sm:{span:22,offset:1},md:{span:18,offset:3},lg:{span:14,offset:5},xl:{span:12,offset:6}}},[e("el-card",{staticClass:"modern-card",attrs:{shadow:"hover"}},[e("div",{staticClass:"upload-row"},[e("el-upload",{attrs:{action:"#","auto-upload":!1,multiple:!1,"show-file-list":!1,accept:"image/*","on-change":t.handleUploadChange,disabled:t.loading}},[e("el-button",{attrs:{type:"primary",round:"",disabled:t.loading}},[t._v("选择图片")])],1),e("el-select",{staticStyle:{width:"120px","margin-left":"16px"},attrs:{filterable:"",placeholder:"切割份数",disabled:t.loading},model:{value:t.n,callback:function(e){t.n=e},expression:"n"}},t._l(t.nOptions,(function(t){return e("el-option",{key:t,attrs:{label:t+"份",value:t}})})),1),e("el-button",{attrs:{type:"success",round:"",disabled:!t.file||t.loading},on:{click:t.handleScramble}},[t._v("切割并打乱")]),t.scrambledUrl?e("el-button",{attrs:{type:"primary",size:"mini",disabled:t.loading},on:{click:t.handleDownload}},[t._v("下载拼图")]):t._e()],1),t.loading||t.progress>0?e("el-progress",{staticStyle:{margin:"16px 0"},attrs:{percentage:t.progress,status:"success","stroke-width":16,"text-inside":""}}):t._e(),t.error?e("div",{staticStyle:{color:"#f56c6c",margin:"12px 0","text-align":"center"}},[t._v(t._s(t.error))]):t._e(),e("el-row",{staticStyle:{"margin-top":"24px"},attrs:{gutter:16}},[e("el-col",{attrs:{span:12}},[e("div",{staticStyle:{"text-align":"center"}},[e("div",{staticStyle:{"font-weight":"600","margin-bottom":"8px"}},[t._v("原图预览")]),t.imgUrl?e("el-image",{staticStyle:{"max-width":"100%","max-height":"320px","border-radius":"10px","box-shadow":"0 2px 8px rgba(0,0,0,0.08)"},attrs:{src:t.imgUrl,"preview-src-list":t.loading?[]:[t.imgUrl,t.scrambledUrl],fit:"contain"}}):e("div",{staticStyle:{color:"#ccc"}},[t._v("请上传图片")])],1)]),e("el-col",{staticStyle:{position:"relative"},attrs:{span:12}},[e("div",{staticStyle:{"text-align":"center"}},[e("div",{staticStyle:{"font-weight":"600","margin-bottom":"8px"}},[t._v("打乱拼图预览")]),e("div",{staticClass:"img-mask-wrap"},[e("div",{staticClass:"img-mask-inner",staticStyle:{position:"relative"}},[t.scrambledUrl?e("el-image",{ref:"scrambledImg",staticStyle:{"max-width":"100%","border-radius":"10px","box-shadow":"0 2px 8px rgba(0,0,0,0.08)",background:"#f0f9eb"},attrs:{src:t.scrambledUrl,"max-height":"auto",fit:"contain","preview-src-list":t.loading?[]:[t.scrambledUrl,t.imgUrl]}}):t._e(),t.showMask&&t.loading?e("div",{staticClass:"scramble-mask-overlay",style:t.scrambleMaskStyle},[e("div",{staticClass:"scramble-mask-content"})]):t._e(),t.loading&&t.progress>0&&t.progress<100?e("div",{staticClass:"scramble-progress-overlay"},[e("span",[t._v(t._s(t.progressText))])]):t._e()],1)])])])],1)],1)],1)],1)],1)},i=[],a=(r(16280),r(14603),r(47566),r(98721),r(95866)),s={name:"ScrambleView",metaInfo:{title:"图片切割打乱工具 - 生成混乱拼图效果",meta:[{name:"description",content:"将图片均匀分块并打乱顺序，可用于生成拼图谜题、视觉干扰图或趣味图像实验。"},{name:"keywords",content:"图片打乱,图片碎片,拼图工具,在线图像切割,图像干扰"}]},data(){return{file:null,imgUrl:"",n:9,nOptions:[],scrambledUrl:"",loading:!1,error:"",showMask:!1,progress:0,progressText:"",scrambleMaskStyle:{}}},created(){window.__PRERENDER_INJECTED__||(this.nOptions=Array.from({length:100},((t,e)=>(e+2)*(e+2))).filter((t=>t<=1e6)))},methods:{handleUploadChange(t,e){e.length>0?(this.file=e[e.length-1].raw||e[e.length-1],this.imgUrl=URL.createObjectURL(this.file),this.scrambledUrl="",this.error=""):(this.file=null,this.imgUrl="",this.scrambledUrl="",this.error="")},async handleScramble(){if(!this.file||!this.n)return;const t=Math.sqrt(this.n);if(t%1===0){this.loading=!0,this.showMask=!0,this.progress=0,this.progressText="切割图片中...",this.error="";try{const t=await this.splitAndShuffleImage(this.file,this.n);this.scrambledUrl=t}catch(e){this.error="处理失败："+(e.message||e)}this.loading=!1,this.showMask=!1,this.progress=0,this.progressText=""}else this.$message.error("份数必须是完全平方数（如4、9、16、25...）")},async splitAndShuffleImage(t,e){const r=Math.sqrt(e);if(r%1!==0)throw new Error("N 必须是完全平方数");const n=await this.loadImageFromFile(t),o=Math.floor(n.width/r),i=Math.floor(n.height/r),a=Array.from({length:e},((t,e)=>e));for(let c=e-1;c>0;c--){const t=Math.floor(Math.random()*(c+1));[a[c],a[t]]=[a[t],a[c]]}const s=document.createElement("canvas");s.width=o*r,s.height=i*r;const l=s.getContext("2d");for(let c=0;c<e;c++){const t=a[c],s=t%r*o,d=Math.floor(t/r)*i,u=document.createElement("canvas");u.width=o,u.height=i;const f=u.getContext("2d");f.drawImage(n,s,d,o,i,0,0,o,i);const h=c%r*o,m=Math.floor(c/r)*i;l.drawImage(u,h,m),this.progress=Math.round((c+1)/e*100),this.progressText=`切割合并 ${c+1}/${e}`,await new Promise((t=>setTimeout(t,0)))}return this.progress=100,this.progressText="完成",await this.$nextTick(),s.toDataURL("image/png")},loadImageFromFile(t){return new Promise(((e,r)=>{const n=new window.Image;n.onload=()=>e(n),n.onerror=r,n.src=URL.createObjectURL(t)}))},handleDownload(){this.scrambledUrl&&a.A.downloadImage(this.scrambledUrl,"scrambled.png")}},beforeDestroy(){this.imgUrl&&URL.revokeObjectURL(this.imgUrl),this.imgUrl="",this.scrambledUrl=""},watch:{showMask(t){t&&this.$nextTick((()=>{const t=this.$refs.scrambledImg&&this.$refs.scrambledImg.$el;t&&(this.scrambleMaskStyle={width:t.offsetWidth+"px",height:t.offsetHeight+"px",borderRadius:"10px"})}))}}},l=s,c=r(81656),d=(0,c.A)(l,o,i,!1,null,"16b7db50",null),u=d.exports,f=r(89143),h=r.n(f);n["default"].config.productionTip=!1,n["default"].use(h()),new n["default"]({render:t=>t(u),mounted(){document.dispatchEvent(new Event("render-event"))}}).$mount("#app")}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=t,function(){r.amdD=function(){throw new Error("define cannot be used indirect")}}(),function(){r.amdO={}}(),function(){var t=[];r.O=function(e,n,o,i){if(!n){var a=1/0;for(d=0;d<t.length;d++){n=t[d][0],o=t[d][1],i=t[d][2];for(var s=!0,l=0;l<n.length;l++)(!1&i||a>=i)&&Object.keys(r.O).every((function(t){return r.O[t](n[l])}))?n.splice(l--,1):(s=!1,i<a&&(a=i));if(s){t.splice(d--,1);var c=o();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[n,o,i]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){var t,e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__};r.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if("object"===typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&"function"===typeof n.then)return n}var i=Object.create(null);r.r(i);var a={};t=t||[null,e({}),e([]),e(e)];for(var s=2&o&&n;"object"==typeof s&&!~t.indexOf(s);s=e(s))Object.getOwnPropertyNames(s).forEach((function(t){a[t]=function(){return n[t]}}));return a["default"]=function(){return n},r.d(i,a),i}}(),function(){r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){r.f={},r.e=function(t){return Promise.all(Object.keys(r.f).reduce((function(e,n){return r.f[n](t,e),e}),[]))}}(),function(){r.u=function(t){return"js/"+t+"."+{2407:"98dca01c",9479:"fea5b1b8"}[t]+".js"}}(),function(){r.miniCssF=function(t){}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="web-tool-vue:";r.l=function(n,o,i,a){if(t[n])t[n].push(o);else{var s,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==e+i){s=u;break}}s||(l=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",e+i),s.src=n),t[n]=[o];var f=function(e,r){s.onerror=s.onload=null,clearTimeout(h);var o=t[n];if(delete t[n],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((function(t){return t(r)})),e)return e(r)},h=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){r.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){r.j=5775}(),function(){r.p="/"}(),function(){var t={5775:0};r.f.j=function(e,n){var o=r.o(t,e)?t[e]:void 0;if(0!==o)if(o)n.push(o[2]);else{var i=new Promise((function(r,n){o=t[e]=[r,n]}));n.push(o[2]=i);var a=r.p+r.u(e),s=new Error,l=function(n){if(r.o(t,e)&&(o=t[e],0!==o&&(t[e]=void 0),o)){var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;s.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,o[1](s)}};r.l(a,l,"chunk-"+e,e)}},r.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,i,a=n[0],s=n[1],l=n[2],c=0;if(a.some((function(e){return 0!==t[e]}))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(l)var d=l(r)}for(e&&e(n);c<a.length;c++)i=a[c],r.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return r.O(d)},n=self["webpackChunkweb_tool_vue"]=self["webpackChunkweb_tool_vue"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=r.O(void 0,[504,996],(function(){return r(60446)}));n=r.O(n)})();