(function(){"use strict";var e={27508:function(e,t,a){var r=a(66848),i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-container"},[e._m(0),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{xs:24,sm:24,md:8,lg:8,xl:8}},[t("el-card",{staticClass:"config-card"},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("æ°´å°è®¾ç½®")])]),t("el-form",{attrs:{"label-width":"80px"}},[t("el-form-item",{attrs:{label:"æ°´å°ç±»åž‹"}},[t("el-radio-group",{model:{value:e.watermarkType,callback:function(t){e.watermarkType=t},expression:"watermarkType"}},[t("el-radio",{attrs:{label:"text"}},[e._v("æ–‡å­—æ°´å°")]),t("el-radio",{attrs:{label:"image"}},[e._v("å›¾ç‰‡æ°´å°")])],1)],1),"text"===e.watermarkType?t("el-form-item",{attrs:{label:"æ°´å°æ–‡å­—"}},[t("el-input",{attrs:{placeholder:"è¯·è¾“å…¥æ°´å°æ–‡å­—"},model:{value:e.watermarkText,callback:function(t){e.watermarkText=t},expression:"watermarkText"}})],1):e._e(),"image"===e.watermarkType?t("el-form-item",{attrs:{label:"æ°´å°å›¾ç‰‡"}},[t("el-upload",{attrs:{action:"","show-file-list":!1,"before-upload":e.handleWatermarkUpload,accept:"image/*"}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("é€‰æ‹©æ°´å°å›¾ç‰‡")])],1),e.watermarkImage?t("div",{staticClass:"watermark-preview"},[t("img",{attrs:{src:e.watermarkImage,alt:"æ°´å°é¢„è§ˆ"}})]):e._e()],1):e._e(),t("el-form-item",{attrs:{label:"æ°´å°ä½ç½®"}},[t("el-select",{staticStyle:{width:"100%"},model:{value:e.watermarkPosition,callback:function(t){e.watermarkPosition=t},expression:"watermarkPosition"}},[t("el-option",{attrs:{label:"å·¦ä¸Šè§’",value:"top-left"}}),t("el-option",{attrs:{label:"ä¸Šä¸­",value:"top-center"}}),t("el-option",{attrs:{label:"å³ä¸Šè§’",value:"top-right"}}),t("el-option",{attrs:{label:"å·¦ä¸­",value:"middle-left"}}),t("el-option",{attrs:{label:"å±…ä¸­",value:"center"}}),t("el-option",{attrs:{label:"å³ä¸­",value:"middle-right"}}),t("el-option",{attrs:{label:"å·¦ä¸‹è§’",value:"bottom-left"}}),t("el-option",{attrs:{label:"ä¸‹ä¸­",value:"bottom-center"}}),t("el-option",{attrs:{label:"å³ä¸‹è§’",value:"bottom-right"}})],1)],1),t("el-form-item",{attrs:{label:"é€æ˜Žåº¦"}},[t("el-slider",{attrs:{min:0,max:100,"show-input":""},model:{value:e.watermarkOpacity,callback:function(t){e.watermarkOpacity=t},expression:"watermarkOpacity"}})],1),"text"===e.watermarkType?t("el-form-item",{attrs:{label:"å­—ä½“å¤§å°"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{min:12,max:200},model:{value:e.fontSize,callback:function(t){e.fontSize=t},expression:"fontSize"}})],1):e._e(),"text"===e.watermarkType?t("el-form-item",{attrs:{label:"å­—ä½“é¢œè‰²"}},[t("el-color-picker",{model:{value:e.fontColor,callback:function(t){e.fontColor=t},expression:"fontColor"}})],1):e._e(),"image"===e.watermarkType?t("el-form-item",{attrs:{label:"æ°´å°å¤§å°"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{min:10,max:500},model:{value:e.watermarkSize,callback:function(t){e.watermarkSize=t},expression:"watermarkSize"}})],1):e._e(),t("el-form-item",{attrs:{label:"è¾¹è·"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,max:200},model:{value:e.watermarkMargin,callback:function(t){e.watermarkMargin=t},expression:"watermarkMargin"}})],1)],1)],1)],1),t("el-col",{attrs:{xs:24,sm:24,md:16,lg:16,xl:16}},[t("el-card",{staticClass:"upload-card"},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("å›¾ç‰‡ä¸Šä¼ ")]),t("div",{staticStyle:{float:"right"}},[t("el-button",{attrs:{size:"small"},on:{click:e.clearAll}},[e._v("æ¸…ç©ºæ‰€æœ‰")])],1)]),t("el-upload",{staticClass:"upload-dragger",attrs:{drag:"",action:"","auto-upload":!1,"on-change":e.handleFileChange,"show-file-list":!1,multiple:"",accept:"image/*"}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("å°†å›¾ç‰‡æ‹–åˆ°æ­¤å¤„ï¼Œæˆ–"),t("em",[e._v("ç‚¹å‡»ä¸Šä¼ ")])]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("æ”¯æŒ JPGã€PNGã€WebP æ ¼å¼ï¼Œå¯æ‰¹é‡ä¸Šä¼ ")])]),e.imageList.length>0?t("div",{staticClass:"image-list"},e._l(e.imageList,(function(a,r){return t("div",{key:r,staticClass:"image-item"},[t("div",{staticClass:"image-preview"},[t("img",{attrs:{src:a.preview,alt:a.name}}),t("div",{staticClass:"image-overlay"},[t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.removeImage(r)}}},[e._v("åˆ é™¤")])],1)]),t("div",{staticClass:"image-info"},[t("div",{staticClass:"image-name"},[e._v(e._s(a.name))]),t("div",{staticClass:"image-size"},[e._v(e._s(e.formatFileSize(a.size)))])])])})),0):e._e(),e.imageList.length>0?t("div",{staticClass:"action-buttons"},[t("el-button",{attrs:{type:"primary",loading:e.processing},on:{click:e.processImages}},[t("i",{staticClass:"el-icon-magic-stick"}),e._v(" æ‰¹é‡æ·»åŠ æ°´å° ")]),t("el-button",{attrs:{disabled:0===e.processedImages.length},on:{click:e.downloadAll}},[t("i",{staticClass:"el-icon-download"}),e._v(" ä¸‹è½½å…¨éƒ¨ ")])],1):e._e(),e.processing?t("div",{staticClass:"progress-section"},[t("el-progress",{attrs:{percentage:e.progress,status:e.progressStatus}}),t("p",[e._v("æ­£åœ¨å¤„ç†ç¬¬ "+e._s(e.currentIndex+1)+" / "+e._s(e.imageList.length)+" å¼ å›¾ç‰‡...")])],1):e._e(),e.processedImages.length>0?t("div",{staticClass:"result-section"},[t("h3",[e._v("å¤„ç†ç»“æžœ")]),t("div",{staticClass:"result-list"},e._l(e.processedImages,(function(a,r){return t("div",{key:r,staticClass:"result-item"},[t("div",{staticClass:"result-preview"},[t("el-image",{attrs:{src:a.dataUrl,alt:a.name,"preview-src-list":e.processedImages.map((e=>e.dataUrl))}})],1),t("div",{staticClass:"result-info"},[t("div",{staticClass:"result-name"},[e._v(e._s(a.name))]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.downloadSingle(a)}}},[e._v("ä¸‹è½½")])],1)])})),0)]):e._e()],1)],1)],1)],1)},s=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"tool-header"},[t("h1",[e._v("ðŸ’§ æ‰¹é‡å›¾ç‰‡åŠ æ°´å°")]),t("p",[e._v("ä¸ºå¤šå¼ å›¾ç‰‡æ‰¹é‡æ·»åŠ æ–‡å­—æˆ–å›¾ç‰‡æ°´å°ï¼Œæ”¯æŒä½ç½®ã€é€æ˜Žåº¦ã€å¤§å°è°ƒèŠ‚")])])}],n=(a(16280),a(44114),{name:"WatermarkView",metaInfo:{title:"æ‰¹é‡å›¾ç‰‡åŠ æ°´å° - åœ¨çº¿å›¾ç‰‡æ°´å°æ·»åŠ å·¥å…·",meta:[{name:"description",content:"æ‰¹é‡ä¸ºå›¾ç‰‡æ·»åŠ æ–‡å­—æˆ–å›¾ç‰‡æ°´å°ï¼Œæ”¯æŒä½ç½®ã€é€æ˜Žåº¦ã€å¤§å°è°ƒèŠ‚ï¼Œçº¯å‰ç«¯å¤„ç†ï¼Œä¿æŠ¤éšç§ã€‚"},{name:"keywords",content:"å›¾ç‰‡æ°´å°,æ‰¹é‡åŠ æ°´å°,æ–‡å­—æ°´å°,å›¾ç‰‡æ°´å°,æ°´å°å·¥å…·,å›¾ç‰‡å¤„ç†"}]},data(){return{watermarkType:"text",watermarkText:"Â© ç‰ˆæƒæ‰€æœ‰",watermarkImage:null,watermarkPosition:"bottom-right",watermarkOpacity:50,fontSize:24,fontColor:"#ffffff",watermarkSize:100,watermarkMargin:20,imageList:[],processedImages:[],processing:!1,progress:0,progressStatus:"",currentIndex:0}},methods:{handleFileChange(e){const t=["image/jpeg","image/png","image/webp","image/gif"];if(!t.includes(e.raw.type))return this.$message.error("åªæ”¯æŒ JPGã€PNGã€WebPã€GIF æ ¼å¼çš„å›¾ç‰‡"),!1;if(e.raw.size>10485760)return this.$message.error("å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 10MB"),!1;const a=new FileReader;a.onload=t=>{this.imageList.push({file:e.raw,name:e.name,size:e.raw.size,preview:t.target.result})},a.readAsDataURL(e.raw)},handleWatermarkUpload(e){const t=["image/jpeg","image/png","image/webp","image/gif"];if(!t.includes(e.type))return this.$message.error("æ°´å°å›¾ç‰‡åªæ”¯æŒ JPGã€PNGã€WebPã€GIF æ ¼å¼"),!1;const a=new FileReader;return a.onload=e=>{this.watermarkImage=e.target.result},a.readAsDataURL(e),!1},removeImage(e){this.imageList.splice(e,1)},clearAll(){this.imageList=[],this.processedImages=[],this.progress=0,this.currentIndex=0},async processImages(){if(0!==this.imageList.length)if("text"!==this.watermarkType||this.watermarkText.trim())if("image"!==this.watermarkType||this.watermarkImage){this.processing=!0,this.processedImages=[],this.progress=0,this.progressStatus="";try{for(let e=0;e<this.imageList.length;e++){this.currentIndex=e;const t=this.imageList[e],a=await this.addWatermark(t);this.processedImages.push(a),this.progress=Math.round((e+1)/this.imageList.length*100)}this.progressStatus="success",this.$message.success(`æˆåŠŸå¤„ç† ${this.imageList.length} å¼ å›¾ç‰‡`)}catch(e){this.progressStatus="exception",this.$message.error("å¤„ç†å›¾ç‰‡æ—¶å‡ºé”™ï¼š"+e.message)}finally{this.processing=!1}}else this.$message.warning("è¯·é€‰æ‹©æ°´å°å›¾ç‰‡");else this.$message.warning("è¯·è¾“å…¥æ°´å°æ–‡å­—");else this.$message.warning("è¯·å…ˆä¸Šä¼ å›¾ç‰‡")},addWatermark(e){return new Promise(((t,a)=>{const r=document.createElement("canvas"),i=r.getContext("2d"),s=new Image;s.onload=()=>{if(r.width=s.width,r.height=s.height,i.drawImage(s,0,0),i.globalAlpha=this.watermarkOpacity/100,"text"!==this.watermarkType)return void this.addImageWatermark(i,r.width,r.height).then((()=>{const a=r.toDataURL("image/png",.9);t({name:e.name.replace(/\.[^/.]+$/,"_watermark.png"),dataUrl:a})})).catch(a);this.addTextWatermark(i,r.width,r.height);const n=r.toDataURL("image/png",.9);t({name:e.name.replace(/\.[^/.]+$/,"_watermark.png"),dataUrl:n})},s.onerror=()=>a(new Error("å›¾ç‰‡åŠ è½½å¤±è´¥")),s.src=e.preview}))},addTextWatermark(e,t,a){e.font=`${this.fontSize}px Arial`,e.fillStyle=this.fontColor,e.textAlign="left",e.textBaseline="top";const r=e.measureText(this.watermarkText),i=r.width,s=this.fontSize,n=this.calculatePosition(t,a,i,s);e.fillText(this.watermarkText,n.x,n.y)},addImageWatermark(e,t,a){return new Promise(((r,i)=>{const s=new Image;s.onload=()=>{const i=s.width/s.height;let n=this.watermarkSize,l=this.watermarkSize/i;const o=this.calculatePosition(t,a,n,l);e.drawImage(s,o.x,o.y,n,l),r()},s.onerror=()=>i(new Error("æ°´å°å›¾ç‰‡åŠ è½½å¤±è´¥")),s.src=this.watermarkImage}))},calculatePosition(e,t,a,r){let i,s;switch(this.watermarkPosition){case"top-left":i=this.watermarkMargin,s=this.watermarkMargin;break;case"top-center":i=(e-a)/2,s=this.watermarkMargin;break;case"top-right":i=e-a-this.watermarkMargin,s=this.watermarkMargin;break;case"middle-left":i=this.watermarkMargin,s=(t-r)/2;break;case"center":i=(e-a)/2,s=(t-r)/2;break;case"middle-right":i=e-a-this.watermarkMargin,s=(t-r)/2;break;case"bottom-left":i=this.watermarkMargin,s=t-r-this.watermarkMargin;break;case"bottom-center":i=(e-a)/2,s=t-r-this.watermarkMargin;break;case"bottom-right":default:i=e-a-this.watermarkMargin,s=t-r-this.watermarkMargin;break}return{x:i,y:s}},downloadSingle(e){const t=document.createElement("a");t.download=e.name,t.href=e.dataUrl,t.click()},downloadAll(){this.processedImages.forEach((e=>{this.downloadSingle(e)}))},formatFileSize(e){if(0===e)return"0 B";const t=1024,a=["B","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,r)).toFixed(2))+" "+a[r]}}}),l=n,o=a(81656),m=(0,o.A)(l,i,s,!1,null,"d6694ea8",null),c=m.exports,d=a(89143),u=a.n(d);r["default"].config.productionTip=!1,r["default"].use(u()),new r["default"]({render:e=>e(c),mounted(){document.dispatchEvent(new Event("render-event"))}}).$mount("#app")}},t={};function a(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(s.exports,s,s.exports,a),s.loaded=!0,s.exports}a.m=e,function(){a.amdD=function(){throw new Error("define cannot be used indirect")}}(),function(){a.amdO={}}(),function(){var e=[];a.O=function(t,r,i,s){if(!r){var n=1/0;for(c=0;c<e.length;c++){r=e[c][0],i=e[c][1],s=e[c][2];for(var l=!0,o=0;o<r.length;o++)(!1&s||n>=s)&&Object.keys(a.O).every((function(e){return a.O[e](r[o])}))?r.splice(o--,1):(l=!1,s<n&&(n=s));if(l){e.splice(c--,1);var m=i();void 0!==m&&(t=m)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[r,i,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.j=3660}(),function(){var e={3660:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var i,s,n=r[0],l=r[1],o=r[2],m=0;if(n.some((function(t){return 0!==e[t]}))){for(i in l)a.o(l,i)&&(a.m[i]=l[i]);if(o)var c=o(a)}for(t&&t(r);m<n.length;m++)s=n[m],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(c)},r=self["webpackChunkweb_tool_vue"]=self["webpackChunkweb_tool_vue"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[504],(function(){return a(27508)}));r=a.O(r)})();