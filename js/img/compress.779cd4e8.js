(function(){"use strict";var e={28842:function(e,t,a){var i=a(66848),n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modern-bg"},[t("el-row",{attrs:{gutter:0,justify:"center"}},[t("el-col",{attrs:{xs:{span:22,offset:1},sm:{span:20,offset:2},md:{span:16,offset:4},lg:{span:12,offset:6},xl:{span:10,offset:7}}},[t("el-card",{staticClass:"modern-card",attrs:{shadow:"hover"}},[t("h2",{staticClass:"modern-title"},[e._v("图片压缩")]),t("el-divider"),t("el-upload",{staticClass:"modern-upload",attrs:{"auto-upload":!1,multiple:!0,action:"#","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-change":e.handleChange}},[t("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),t("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),t("div",{staticClass:"block modern-slider-block"},[t("div",[t("span",{staticClass:"demonstration"},[e._v("压缩率")]),t("el-slider",{staticClass:"modern-slider",attrs:{"show-input":""},model:{value:e.compressVal,callback:function(t){e.compressVal=t},expression:"compressVal"}})],1),t("div",[t("span",{staticClass:"demonstration"},[e._v("保存格式")]),t("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择保存格式"},model:{value:e.saveFormat,callback:function(t){e.saveFormat=t},expression:"saveFormat"}},e._l(e.formatOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("div",{staticClass:"modern-btn-group"},[t("el-button",{attrs:{type:"primary",round:""},on:{click:e.startCompress}},[e._v("开始压缩")]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.compressFileList.length>0,expression:"compressFileList.length > 0"}],attrs:{type:"success",round:""},on:{click:e.startDownload}},[e._v("下载")]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.compressFileList.length>0,expression:"compressFileList.length > 0"}],attrs:{type:"warning",round:""},on:{click:e.startDownloadAsZip}},[e._v("打包下载")])],1)])],1)],1)],1),t("el-row",{attrs:{gutter:0,justify:"center"}},[t("el-col",{attrs:{xs:{span:22,offset:1},sm:{span:20,offset:2},md:{span:16,offset:4},lg:{span:12,offset:6},xl:{span:10,offset:7}}},[t("el-card",{staticClass:"modern-card",attrs:{shadow:"hover"}},[t("h3",{staticClass:"modern-title"},[e._v("压缩"+e._s(e.compressValue)+"%结果")]),t("el-divider"),t("el-row",{staticClass:"row-bg",attrs:{gutter:16}},e._l(e.compressFileList,(function(a){return t("el-col",{key:a.k,attrs:{xs:{span:12},sm:{span:8},md:{span:6},lg:{span:6},xl:{span:4}}},[t("el-card",{staticClass:"img-card",attrs:{shadow:"always"}},[t("el-image",{staticStyle:{width:"100px",height:"100px","border-radius":"12px","box-shadow":"0 2px 8px rgba(0,0,0,0.08)"},attrs:{src:a.file_url,"preview-src-list":e.compressFileList.map((e=>e.file_url)),fit:"scale-down"}}),t("div",{staticClass:"img-info"},[e._v("压缩前:"+e._s(a.before_size))]),t("div",{staticClass:"img-info"},[e._v("压缩后:"+e._s(a.after_size))])],1)],1)})),1)],1)],1)],1)],1)},o=[],s=(a(44114),a(14603),a(47566),a(98721),a(97515)),r=a(75912),l=a(95866),c={name:"CompressView",metaInfo:{title:"在线图片压缩与格式转换 - 支持JPG/PNG/WebP",meta:[{name:"description",content:"上传图片后可一键压缩，保持清晰度的同时大幅减小文件体积，支持多种格式相互转换。"},{name:"keywords",content:"在线图片压缩,JPG压缩,PNG压缩,WebP转换,图片格式转换,免费压缩工具,批量压缩"}]},data(){return{fileList:[],compressFileList:[],dialogImageUrl:"",dialogVisible:!1,disabled:!1,compressVal:50,compressValue:0,saveFormat:"original",formatOptions:[{label:"原格式",value:"original"},{label:"image/jpeg",value:"image/jpeg"},{label:"image/jpg",value:"image/jpg"},{label:"image/png",value:"image/png"},{label:"image/webp",value:"image/webp"},{label:"image/gif",value:"image/gif"}]}},mounted(){},methods:{async startDownload(){this.compressFileList.forEach(((e,t)=>{var a,i;const n=null!==(a=this.fileList[t])&&void 0!==a&&a.name?this.fileList[t].name.replace(/\.[^.]+$/,""):t,o="original"===this.saveFormat?r.A.getExt((null===(i=this.fileList[t])||void 0===i?void 0:i.name)||e.save_name):"jpg"===this.saveFormat.replace("image/","")?"jpg":this.saveFormat.replace("image/",""),s=n+"."+o;l.A.downloadBlob(e.file,s)}))},async startDownloadAsZip(){const e=this.$loading({lock:!0,text:"打包下载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});try{const e=this.compressFileList.map(((e,t)=>{var a,i;const n=null!==(a=this.fileList[t])&&void 0!==a&&a.name?this.fileList[t].name.replace(/\.[^.]+$/,""):t,o="original"===this.saveFormat?r.A.getExt((null===(i=this.fileList[t])||void 0===i?void 0:i.name)||e.save_name):"jpg"===this.saveFormat.replace("image/","")?"jpg":this.saveFormat.replace("image/",""),s=n+"."+o;return{file:e.file,save_name:s}})),t=l.A.generateTimestampFilename("compressed_images","zip");await l.A.downloadAsZip(e,t,"file","save_name")}catch(t){console.log("startDownloadAsZip err"+t.message)}e.close()},async startCompress(){this.compressFileList=[];let e=0;const t=this.$loading({lock:!0,text:"压缩中图片中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.compressValue=this.compressVal;for(const i of this.fileList)try{let t,a="";"original"===this.saveFormat?(a=i.raw.type,["image/png","image/jpeg","image/jpg","image/webp","image/gif"].includes(a)||(a="image/jpeg")):a=this.saveFormat,t="image/gif"===a?i.raw:await s.A.compressImage(i.raw,(100-this.compressValue)/100,a);const n="image/png"===a?"png":"image/jpeg"===a?"jpeg":"image/jpg"===a?"jpg":"image/webp"===a?"webp":"image/gif"===a?"gif":r.A.getExt(i.name),o=s.A.fileToBlob(t);this.compressFileList.push({before_size:s.A.formatBytes(i.size),file:o,save_name:e+"."+n,file_url:URL.createObjectURL(o),after_size:s.A.formatBytes(t.size||0),k:e++})}catch(a){console.error("Compression Error:",a.message)}t.close()},handleRemove(e){console.log(e)},handlePictureCardPreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleDownload(e){console.log(e)},handleChange(e,t){this.fileList=t}}},u=c,d=a(81656),f=(0,d.A)(u,n,o,!1,null,"41d96912",null),p=f.exports,m=a(89143),g=a.n(m);i["default"].config.productionTip=!1,i["default"].use(g()),new i["default"]({render:e=>e(p),mounted(){this.$nextTick((()=>{document.dispatchEvent(new Event("render-event"))}))}}).$mount("#app")}},t={};function a(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=e,function(){a.amdD=function(){throw new Error("define cannot be used indirect")}}(),function(){a.amdO={}}(),function(){var e=[];a.O=function(t,i,n,o){if(!i){var s=1/0;for(u=0;u<e.length;u++){i=e[u][0],n=e[u][1],o=e[u][2];for(var r=!0,l=0;l<i.length;l++)(!1&o||s>=o)&&Object.keys(a.O).every((function(e){return a.O[e](i[l])}))?i.splice(l--,1):(r=!1,o<s&&(s=o));if(r){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[i,n,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};a.t=function(i,n){if(1&n&&(i=this(i)),8&n)return i;if("object"===typeof i&&i){if(4&n&&i.__esModule)return i;if(16&n&&"function"===typeof i.then)return i}var o=Object.create(null);a.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var r=2&n&&i;"object"==typeof r&&!~e.indexOf(r);r=t(r))Object.getOwnPropertyNames(r).forEach((function(e){s[e]=function(){return i[e]}}));return s["default"]=function(){return i},a.d(o,s),o}}(),function(){a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,i){return a.f[i](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+"."+{2407:"98dca01c",9479:"fea5b1b8"}[e]+".js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="web-tool-vue:";a.l=function(i,n,o,s){if(e[i])e[i].push(n);else{var r,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==i||d.getAttribute("data-webpack")==t+o){r=d;break}}r||(l=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,a.nc&&r.setAttribute("nonce",a.nc),r.setAttribute("data-webpack",t+o),r.src=i),e[i]=[n];var f=function(t,a){r.onerror=r.onload=null,clearTimeout(p);var n=e[i];if(delete e[i],r.parentNode&&r.parentNode.removeChild(r),n&&n.forEach((function(e){return e(a)})),t)return t(a)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=f.bind(null,r.onerror),r.onload=f.bind(null,r.onload),l&&document.head.appendChild(r)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.j=2986}(),function(){a.p="/"}(),function(){var e={2986:0};a.f.j=function(t,i){var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)i.push(n[2]);else{var o=new Promise((function(a,i){n=e[t]=[a,i]}));i.push(n[2]=o);var s=a.p+a.u(t),r=new Error,l=function(i){if(a.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var o=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;r.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",r.name="ChunkLoadError",r.type=o,r.request=s,n[1](r)}};a.l(s,l,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,i){var n,o,s=i[0],r=i[1],l=i[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(n in r)a.o(r,n)&&(a.m[n]=r[n]);if(l)var u=l(a)}for(t&&t(i);c<s.length;c++)o=s[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(u)},i=self["webpackChunkweb_tool_vue"]=self["webpackChunkweb_tool_vue"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=a.O(void 0,[504,996],(function(){return a(28842)}));i=a.O(i)})();