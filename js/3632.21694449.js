"use strict";(self["webpackChunkweb_tool_vue"]=self["webpackChunkweb_tool_vue"]||[]).push([[3632],{3632:function(e,t,i){i.r(t),i.d(t,{default:function(){return l}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"camera-recorder-container"},[e._m(0),t("div",{staticClass:"recorder-section"},[t("div",{staticClass:"camera-preview"},[t("video",{ref:"videoPreview",class:{recording:e.isRecording},attrs:{autoplay:"",muted:"",playsinline:""},domProps:{muted:!0}}),e.isRecording?t("div",{staticClass:"recording-indicator"},[t("div",{staticClass:"recording-dot"}),t("span",[e._v("å½•åˆ¶ä¸­ "+e._s(e.formatTime(e.recordingTime)))])]):e._e(),e.cameraStarted?e._e():t("div",{staticClass:"camera-placeholder"},[t("div",{staticClass:"placeholder-icon"},[e._v("ðŸ“¹")]),t("div",{staticClass:"placeholder-text"},[e._v("ç‚¹å‡»å¯åŠ¨æ‘„åƒå¤´")])])]),t("div",{staticClass:"control-buttons"},[t("div",{staticClass:"main-controls"},[e.cameraStarted?[e.isRecording?t("el-button",{attrs:{type:"warning",size:"large"},on:{click:e.stopRecording}},[t("i",{staticClass:"el-icon-video-pause"}),e._v(" åœæ­¢å½•åˆ¶ ")]):t("el-button",{attrs:{type:"danger",size:"large",disabled:!e.canRecord},on:{click:e.startRecording}},[t("i",{staticClass:"el-icon-video-play"}),e._v(" å¼€å§‹å½•åˆ¶ ")]),t("el-button",{attrs:{size:"large",disabled:e.isRecording},on:{click:e.takePhoto}},[t("i",{staticClass:"el-icon-camera"}),e._v(" æ‹ç…§ ")]),t("el-button",{attrs:{size:"large"},on:{click:e.stopCamera}},[t("i",{staticClass:"el-icon-switch-button"}),e._v(" å…³é—­æ‘„åƒå¤´ ")])]:t("el-button",{attrs:{type:"primary",size:"large",loading:e.startingCamera},on:{click:e.startCamera}},[t("i",{staticClass:"el-icon-video-camera"}),e._v(" å¯åŠ¨æ‘„åƒå¤´ ")])],2),e.cameraStarted?t("div",{staticClass:"settings-controls"},[t("div",{staticClass:"setting-item"},[t("label",[e._v("æ‘„åƒå¤´:")]),t("el-select",{attrs:{size:"small"},on:{change:e.switchCamera},model:{value:e.selectedCamera,callback:function(t){e.selectedCamera=t},expression:"selectedCamera"}},e._l(e.availableCameras,(function(e){return t("el-option",{key:e.deviceId,attrs:{label:e.label||`æ‘„åƒå¤´ ${e.deviceId.substr(0,8)}`,value:e.deviceId}})})),1)],1),t("div",{staticClass:"setting-item"},[t("label",[e._v("åˆ†è¾¨çŽ‡:")]),t("el-select",{attrs:{size:"small"},on:{change:e.changeResolution},model:{value:e.selectedResolution,callback:function(t){e.selectedResolution=t},expression:"selectedResolution"}},[t("el-option",{attrs:{label:"720p (1280x720)",value:"720p"}}),t("el-option",{attrs:{label:"1080p (1920x1080)",value:"1080p"}}),t("el-option",{attrs:{label:"4K (3840x2160)",value:"4k"}})],1)],1),t("div",{staticClass:"setting-item"},[t("el-checkbox",{attrs:{disabled:e.isRecording},model:{value:e.includeAudio,callback:function(t){e.includeAudio=t},expression:"includeAudio"}},[e._v(" å½•åˆ¶éŸ³é¢‘ ")])],1)]):e._e()]),e.recordings.length>0||e.photos.length>0?t("div",{staticClass:"recordings-section"},[t("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e.recordings.length>0?t("el-tab-pane",{attrs:{label:"ðŸ“¹ å½•åˆ¶è§†é¢‘",name:"videos"}},[t("div",{staticClass:"recordings-list"},e._l(e.recordings,(function(i,s){return t("div",{key:s,staticClass:"recording-item"},[t("video",{staticClass:"recording-preview",attrs:{src:i.url,controls:""}}),t("div",{staticClass:"recording-info"},[t("div",{staticClass:"recording-name"},[e._v("è§†é¢‘ "+e._s(s+1))]),t("div",{staticClass:"recording-details"},[t("span",[e._v("æ—¶é•¿: "+e._s(e.formatTime(i.duration)))]),t("span",[e._v("å¤§å°: "+e._s(e.formatFileSize(i.size)))]),t("span",[e._v("æ—¶é—´: "+e._s(i.timestamp))])]),t("div",{staticClass:"recording-actions"},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.downloadRecording(i,s)}}},[t("i",{staticClass:"el-icon-download"}),e._v(" ä¸‹è½½ ")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.deleteRecording(s)}}},[t("i",{staticClass:"el-icon-delete"}),e._v(" åˆ é™¤ ")])],1)])])})),0)]):e._e(),e.photos.length>0?t("el-tab-pane",{attrs:{label:"ðŸ“· æ‹æ‘„ç…§ç‰‡",name:"photos"}},[t("div",{staticClass:"photos-grid"},e._l(e.photos,(function(i,s){return t("div",{key:s,staticClass:"photo-item"},[t("img",{attrs:{src:i.url,alt:`ç…§ç‰‡ ${s+1}`}}),t("div",{staticClass:"photo-overlay"},[t("div",{staticClass:"photo-actions"},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.downloadPhoto(i,s)}}},[t("i",{staticClass:"el-icon-download"})]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.deletePhoto(s)}}},[t("i",{staticClass:"el-icon-delete"})])],1)])])})),0)]):e._e()],1)],1):e._e(),e.cameraStarted||0!==e.recordings.length||0!==e.photos.length?e._e():t("div",{staticClass:"empty-state"},[t("div",{staticClass:"empty-icon"},[e._v("ðŸ“¹")]),t("div",{staticClass:"empty-text"},[e._v("å¼€å§‹ä½¿ç”¨æ‘„åƒå¤´å½•åˆ¶å™¨")]),e._m(1)])]),t("el-dialog",{attrs:{title:"ðŸ“¹ æ‘„åƒå¤´æƒé™",visible:e.showPermissionDialog,width:"400px",center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.showPermissionDialog=t}}},[t("div",{staticStyle:{"text-align":"center",padding:"20px"}},[t("div",{staticStyle:{"font-size":"48px","margin-bottom":"20px"}},[e._v("ðŸ”’")]),t("p",{staticStyle:{"font-size":"16px",color:"#2c3e50","margin-bottom":"15px"}},[e._v(" éœ€è¦è®¿é—®æ‚¨çš„æ‘„åƒå¤´å’Œéº¦å…‹é£Žæƒé™ ")]),t("p",{staticStyle:{color:"#7f8c8d","font-size":"14px"}},[e._v(' è¯·åœ¨æµè§ˆå™¨å¼¹å‡ºçš„æƒé™è¯·æ±‚ä¸­ç‚¹å‡»"å…è®¸" ')])]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.showPermissionDialog=!1}}},[e._v("å–æ¶ˆ")]),t("el-button",{attrs:{type:"primary"},on:{click:e.requestPermission}},[e._v("é‡æ–°è¯·æ±‚")])],1)])],1)},a=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-header"},[t("h1",[e._v("ðŸ“¹ æ‘„åƒå¤´å½•åˆ¶å™¨")]),t("p",{staticClass:"page-description"},[e._v("è°ƒç”¨æ‘„åƒå¤´è¿›è¡Œè§†é¢‘å½•åˆ¶å’Œæ‹ç…§ï¼Œæ”¯æŒéŸ³é¢‘å½•åˆ¶")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"empty-tips"},[t("p",[e._v("åŠŸèƒ½ç‰¹ç‚¹ï¼š")]),t("ul",[t("li",[e._v("âœ… é«˜æ¸…è§†é¢‘å½•åˆ¶")]),t("li",[e._v("âœ… éŸ³é¢‘åŒæ­¥å½•åˆ¶")]),t("li",[e._v("âœ… å®žæ—¶æ‹ç…§åŠŸèƒ½")]),t("li",[e._v("âœ… å¤šæ‘„åƒå¤´åˆ‡æ¢")]),t("li",[e._v("âœ… åˆ†è¾¨çŽ‡è°ƒèŠ‚")]),t("li",[e._v("âœ… æœ¬åœ°å­˜å‚¨ä¸‹è½½")])])])}],r=(i(44114),i(14603),i(47566),i(98721),{name:"CameraRecorderView",metaInfo:{title:"åœ¨çº¿æ‘„åƒå¤´å½•åˆ¶å™¨ - å…è´¹è§†é¢‘å½•åƒã€éº¦å…‹é£Žå½•éŸ³å’Œæ‹ç…§å·¥å…· | æµè§ˆå™¨è°ƒç”¨",meta:[{name:"description",content:"å…è´¹åœ¨çº¿è°ƒç”¨æ‘„åƒå¤´å’Œéº¦å…‹é£Žè¿›è¡Œè§†é¢‘å½•åˆ¶ã€é«˜æ¸…æ‹ç…§å’ŒéŸ³é¢‘å½•éŸ³ã€‚æ— éœ€å®‰è£…è½¯ä»¶ï¼Œä¸€é”®å¼€å§‹å½•åˆ¶ï¼Œæ”¯æŒä¿å­˜åˆ°æœ¬åœ°ï¼Œä¿æŠ¤æ‚¨çš„éšç§ã€‚é€‚ç”¨äºŽå¿«é€Ÿå½•åˆ¶æ•™ç¨‹æˆ–è‡ªæ‹ã€‚"},{name:"keywords",content:"æ‘„åƒå¤´å½•åˆ¶å™¨, åœ¨çº¿æ‹ç…§, æµè§ˆå™¨å½•åƒ, å…è´¹è§†é¢‘å½•åˆ¶, éº¦å…‹é£Žå½•éŸ³, æ‘„åƒå¤´æµ‹è¯•, Webcam Recorder"}]},data(){return{cameraStarted:!1,startingCamera:!1,isRecording:!1,canRecord:!1,includeAudio:!0,recordingTime:0,selectedCamera:"",selectedResolution:"720p",availableCameras:[],currentStream:null,mediaRecorder:null,recordedChunks:[],recordingTimer:null,recordings:[],photos:[],activeTab:"videos",showPermissionDialog:!1}},methods:{async startCamera(){this.startingCamera=!0;try{await this.getAvailableDevices(),await this.initializeCamera(),this.cameraStarted=!0,this.canRecord=!0,this.$message.success("æ‘„åƒå¤´å¯åŠ¨æˆåŠŸï¼")}catch(e){console.error("å¯åŠ¨æ‘„åƒå¤´å¤±è´¥:",e),this.handleCameraError(e)}finally{this.startingCamera=!1}},async getAvailableDevices(){try{const e=await navigator.mediaDevices.enumerateDevices();this.availableCameras=e.filter((e=>"videoinput"===e.kind)),this.availableCameras.length>0&&!this.selectedCamera&&(this.selectedCamera=this.availableCameras[0].deviceId)}catch(e){console.error("èŽ·å–è®¾å¤‡åˆ—è¡¨å¤±è´¥:",e)}},async initializeCamera(){const e={video:{deviceId:this.selectedCamera?{exact:this.selectedCamera}:void 0,...this.getResolutionConstraints()},audio:this.includeAudio};try{this.currentStream=await navigator.mediaDevices.getUserMedia(e),this.$refs.videoPreview.srcObject=this.currentStream}catch(t){throw"NotAllowedError"===t.name&&(this.showPermissionDialog=!0),t}},getResolutionConstraints(){const e={"720p":{width:1280,height:720},"1080p":{width:1920,height:1080},"4k":{width:3840,height:2160}};return e[this.selectedResolution]||e["720p"]},async switchCamera(){this.currentStream&&(this.stopCurrentStream(),await this.initializeCamera())},async changeResolution(){this.currentStream&&(this.stopCurrentStream(),await this.initializeCamera())},startRecording(){if(!this.currentStream)return;this.recordedChunks=[];const e={mimeType:"video/webm;codecs=vp9,opus"};try{this.mediaRecorder=new MediaRecorder(this.currentStream,e)}catch(t){this.mediaRecorder=new MediaRecorder(this.currentStream)}this.mediaRecorder.ondataavailable=e=>{e.data.size>0&&this.recordedChunks.push(e.data)},this.mediaRecorder.onstop=()=>{this.saveRecording()},this.mediaRecorder.start(),this.isRecording=!0,this.recordingTime=0,this.recordingTimer=setInterval((()=>{this.recordingTime++}),1e3),this.$message.success("å¼€å§‹å½•åˆ¶ï¼")},stopRecording(){this.mediaRecorder&&this.isRecording&&(this.mediaRecorder.stop(),this.isRecording=!1,this.recordingTimer&&(clearInterval(this.recordingTimer),this.recordingTimer=null),this.$message.success("å½•åˆ¶å®Œæˆï¼"))},saveRecording(){const e=new Blob(this.recordedChunks,{type:"video/webm"}),t=URL.createObjectURL(e),i={url:t,blob:e,duration:this.recordingTime,size:e.size,timestamp:(new Date).toLocaleString("zh-CN")};this.recordings.unshift(i),this.activeTab="videos"},takePhoto(){if(!this.currentStream)return;const e=this.$refs.videoPreview,t=document.createElement("canvas"),i=t.getContext("2d");t.width=e.videoWidth,t.height=e.videoHeight,i.drawImage(e,0,0,t.width,t.height),t.toBlob((e=>{const t=URL.createObjectURL(e),i={url:t,blob:e,timestamp:(new Date).toLocaleString("zh-CN")};this.photos.unshift(i),this.activeTab="photos",this.$message.success("æ‹ç…§æˆåŠŸï¼")}),"image/jpeg",.9)},stopCamera(){this.stopCurrentStream(),this.cameraStarted=!1,this.canRecord=!1,this.isRecording=!1,this.recordingTimer&&(clearInterval(this.recordingTimer),this.recordingTimer=null)},stopCurrentStream(){this.currentStream&&(this.currentStream.getTracks().forEach((e=>e.stop())),this.currentStream=null)},downloadRecording(e,t){const i=document.createElement("a");i.href=e.url,i.download=`å½•åˆ¶è§†é¢‘_${t+1}_${Date.now()}.webm`,document.body.appendChild(i),i.click(),document.body.removeChild(i)},downloadPhoto(e,t){const i=document.createElement("a");i.href=e.url,i.download=`æ‹æ‘„ç…§ç‰‡_${t+1}_${Date.now()}.jpg`,document.body.appendChild(i),i.click(),document.body.removeChild(i)},deleteRecording(e){this.$confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå½•åˆ¶è§†é¢‘å—ï¼Ÿ","ç¡®è®¤åˆ é™¤",{confirmButtonText:"åˆ é™¤",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then((()=>{URL.revokeObjectURL(this.recordings[e].url),this.recordings.splice(e,1),this.$message.success("åˆ é™¤æˆåŠŸï¼")}))},deletePhoto(e){this.$confirm("ç¡®å®šè¦åˆ é™¤è¿™å¼ ç…§ç‰‡å—ï¼Ÿ","ç¡®è®¤åˆ é™¤",{confirmButtonText:"åˆ é™¤",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then((()=>{URL.revokeObjectURL(this.photos[e].url),this.photos.splice(e,1),this.$message.success("åˆ é™¤æˆåŠŸï¼")}))},handleCameraError(e){let t="æ‘„åƒå¤´å¯åŠ¨å¤±è´¥";switch(e.name){case"NotAllowedError":t="æ‘„åƒå¤´æƒé™è¢«æ‹’ç»ï¼Œè¯·å…è®¸è®¿é—®æ‘„åƒå¤´";break;case"NotFoundError":t="æœªæ‰¾åˆ°æ‘„åƒå¤´è®¾å¤‡";break;case"NotReadableError":t="æ‘„åƒå¤´è¢«å…¶ä»–åº”ç”¨å ç”¨";break;case"OverconstrainedError":t="æ‘„åƒå¤´ä¸æ”¯æŒæ‰€é€‰åˆ†è¾¨çŽ‡";break}this.$message.error(t)},async requestPermission(){this.showPermissionDialog=!1,await this.startCamera()},formatTime(e){const t=Math.floor(e/60),i=e%60;return`${t.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},formatFileSize(e){if(0===e)return"0 B";const t=1024,i=["B","KB","MB","GB"],s=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,s)).toFixed(2))+" "+i[s]}},beforeDestroy(){this.stopCamera(),this.recordings.forEach((e=>{URL.revokeObjectURL(e.url)})),this.photos.forEach((e=>{URL.revokeObjectURL(e.url)}))}}),o=r,n=i(81656),c=(0,n.A)(o,s,a,!1,null,"76e8293e",null),l=c.exports}}]);
//# sourceMappingURL=3632.21694449.js.map