"use strict";(self["webpackChunkweb_tool_vue"]=self["webpackChunkweb_tool_vue"]||[]).push([[3720],{61339:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modern-bg"},[t("el-row",{attrs:{gutter:0,justify:"center"}},[t("el-col",{attrs:{xs:{span:22,offset:1},sm:{span:20,offset:2},md:{span:16,offset:4},lg:{span:12,offset:6},xl:{span:10,offset:7}}},[t("el-card",{staticClass:"modern-card",attrs:{shadow:"hover"}},[t("h2",{staticClass:"modern-title"},[e._v("图片压缩")]),t("el-divider"),t("el-upload",{staticClass:"modern-upload",attrs:{"auto-upload":!1,multiple:!0,action:"#","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-change":e.handleChange}},[t("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),t("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),t("div",{staticClass:"block modern-slider-block"},[t("div",[t("span",{staticClass:"demonstration"},[e._v("压缩率")]),t("el-slider",{staticClass:"modern-slider",attrs:{"show-input":""},model:{value:e.compressVal,callback:function(t){e.compressVal=t},expression:"compressVal"}})],1),t("div",[t("span",{staticClass:"demonstration"},[e._v("保存格式")]),t("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择保存格式"},model:{value:e.saveFormat,callback:function(t){e.saveFormat=t},expression:"saveFormat"}},e._l(e.formatOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("div",{staticClass:"modern-btn-group"},[t("el-button",{attrs:{type:"primary",round:""},on:{click:e.startCompress}},[e._v("开始压缩")]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.compressFileList.length>0,expression:"compressFileList.length > 0"}],attrs:{type:"success",round:""},on:{click:e.startDownload}},[e._v("下载")]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.compressFileList.length>0,expression:"compressFileList.length > 0"}],attrs:{type:"warning",round:""},on:{click:e.startDownloadAsZip}},[e._v("打包下载")])],1)])],1)],1)],1),t("el-row",{attrs:{gutter:0,justify:"center"}},[t("el-col",{attrs:{xs:{span:22,offset:1},sm:{span:20,offset:2},md:{span:16,offset:4},lg:{span:12,offset:6},xl:{span:10,offset:7}}},[t("el-card",{staticClass:"modern-card",attrs:{shadow:"hover"}},[t("h3",{staticClass:"modern-title"},[e._v("压缩"+e._s(e.compressValue)+"%结果")]),t("el-divider"),t("el-row",{staticClass:"row-bg",attrs:{gutter:16}},e._l(e.compressFileList,(function(a){return t("el-col",{key:a.k,attrs:{xs:{span:12},sm:{span:8},md:{span:6},lg:{span:6},xl:{span:4}}},[t("el-card",{staticClass:"img-card",attrs:{shadow:"always"}},[t("el-image",{staticStyle:{width:"100px",height:"100px","border-radius":"12px","box-shadow":"0 2px 8px rgba(0,0,0,0.08)"},attrs:{src:a.file_url,"preview-src-list":e.compressFileList.map((e=>e.file_url)),fit:"scale-down"}}),t("div",{staticClass:"img-info"},[e._v("压缩前:"+e._s(a.before_size))]),t("div",{staticClass:"img-info"},[e._v("压缩后:"+e._s(a.after_size))])],1)],1)})),1)],1)],1)],1)],1)},o=[],i=(a(44114),a(14603),a(47566),a(98721),a(9789)),l=a(75912),n=a(95866),r={data(){return{metaInfo:{title:"在线图片压缩与格式转换 - 支持JPG/PNG/WebP",meta:[{name:"description",content:"上传图片后可一键压缩，保持清晰度的同时大幅减小文件体积，支持多种格式相互转换。"},{name:"keywords",content:"在线图片压缩,JPG压缩,PNG压缩,WebP转换,图片格式转换,免费压缩工具,批量压缩"}]},fileList:[],compressFileList:[],dialogImageUrl:"",dialogVisible:!1,disabled:!1,compressVal:50,compressValue:0,saveFormat:"original",formatOptions:[{label:"原格式",value:"original"},{label:"image/jpeg",value:"image/jpeg"},{label:"image/jpg",value:"image/jpg"},{label:"image/png",value:"image/png"},{label:"image/webp",value:"image/webp"},{label:"image/gif",value:"image/gif"}]}},methods:{async startDownload(){this.compressFileList.forEach(((e,t)=>{var a,s;const o=null!==(a=this.fileList[t])&&void 0!==a&&a.name?this.fileList[t].name.replace(/\.[^.]+$/,""):t,i="original"===this.saveFormat?l.A.getExt((null===(s=this.fileList[t])||void 0===s?void 0:s.name)||e.save_name):"jpg"===this.saveFormat.replace("image/","")?"jpg":this.saveFormat.replace("image/",""),r=o+"."+i;n.A.downloadBlob(e.file,r)}))},async startDownloadAsZip(){const e=this.$loading({lock:!0,text:"打包下载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});try{const e=this.compressFileList.map(((e,t)=>{var a,s;const o=null!==(a=this.fileList[t])&&void 0!==a&&a.name?this.fileList[t].name.replace(/\.[^.]+$/,""):t,i="original"===this.saveFormat?l.A.getExt((null===(s=this.fileList[t])||void 0===s?void 0:s.name)||e.save_name):"jpg"===this.saveFormat.replace("image/","")?"jpg":this.saveFormat.replace("image/",""),n=o+"."+i;return{file:e.file,save_name:n}})),t=n.A.generateTimestampFilename("compressed_images","zip");await n.A.downloadAsZip(e,t,"file","save_name")}catch(t){console.log("startDownloadAsZip err"+t.message)}e.close()},async startCompress(){this.compressFileList=[];let e=0;const t=this.$loading({lock:!0,text:"压缩中图片中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.compressValue=this.compressVal;for(const s of this.fileList)try{let t,a="";"original"===this.saveFormat?(a=s.raw.type,["image/png","image/jpeg","image/jpg","image/webp","image/gif"].includes(a)||(a="image/jpeg")):a=this.saveFormat,t="image/gif"===a?s.raw:await i.A.compressImage(s.raw,(100-this.compressValue)/100,a);const o="image/png"===a?"png":"image/jpeg"===a?"jpeg":"image/jpg"===a?"jpg":"image/webp"===a?"webp":"image/gif"===a?"gif":l.A.getExt(s.name),n=i.A.fileToBlob(t);this.compressFileList.push({before_size:i.A.formatBytes(s.size),file:n,save_name:e+"."+o,file_url:URL.createObjectURL(n),after_size:i.A.formatBytes(t.size||0),k:e++})}catch(a){console.error("Compression Error:",a.message)}t.close()},handleRemove(e){console.log(e)},handlePictureCardPreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleDownload(e){console.log(e)},handleChange(e,t){this.fileList=t}}},c=r,d=a(81656),m=(0,d.A)(c,s,o,!1,null,"f6c871bc",null),p=m.exports},95866:function(e,t,a){a(16280),a(14603),a(47566),a(98721);class s{static downloadText(e,t,a="text/plain"){const s=new Blob([e],{type:a});this.downloadBlob(s,t)}static downloadJSON(e,t="data.json"){const a=JSON.stringify(e,null,2);this.downloadText(a,t,"application/json")}static downloadCSV(e,t="data.csv",a=null){let s="";a&&a.length>0&&(s+=a.join(",")+"\n"),e.forEach((e=>{if(Array.isArray(e))s+=e.map((e=>`"${e}"`)).join(",")+"\n";else if("object"===typeof e){const t=a?a.map((t=>e[t]||"")):Object.values(e);s+=t.map((e=>`"${e}"`)).join(",")+"\n"}}));const o="\ufeff";this.downloadText(o+s,t,"text/csv;charset=utf-8")}static downloadImage(e,t="image.png"){const a=document.createElement("a");a.download=t,a.href=e,document.body.appendChild(a),a.click(),document.body.removeChild(a)}static downloadCanvas(e,t="canvas.png",a="image/png",s=1){const o=e.toDataURL(a,s);this.downloadImage(o,t)}static downloadBlob(e,t){const a=URL.createObjectURL(e),s=document.createElement("a");s.href=a,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a)}static downloadURL(e,t){const a=document.createElement("a");a.href=e,a.download=t,a.target="_blank",document.body.appendChild(a),a.click(),document.body.removeChild(a)}static async downloadZip(e,t="files.zip"){const s=(await a.e(4813).then(a.t.bind(a,44813,23))).default,o=new s;e.forEach((e=>{e.content,Blob,o.file(e.name,e.content)}));try{const e=await o.generateAsync({type:"blob"});return this.downloadBlob(e,t),!0}catch(i){return console.error("生成ZIP文件失败:",i),!1}}static async fetchBlob(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.blob()}catch(t){throw console.error("获取文件失败:",t),t}}static generateTimestampFilename(e,t){const a=(new Date).toISOString().replace(/[:.]/g,"-").slice(0,-5);return`${e}_${a}.${t}`}static formatFileSize(e){if(0===e)return"0 Bytes";const t=1024,a=["Bytes","KB","MB","GB","TB"],s=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,s)).toFixed(2))+" "+a[s]}}t.A=s}}]);
//# sourceMappingURL=3720.9791c67c.js.map