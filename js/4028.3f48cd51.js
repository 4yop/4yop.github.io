"use strict";(self["webpackChunkweb_tool_vue"]=self["webpackChunkweb_tool_vue"]||[]).push([[4028],{4028:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modern-bg"},[e("el-row",{attrs:{gutter:0,justify:"center"}},[e("el-col",{attrs:{xs:{span:24,offset:0},sm:{span:22,offset:1},md:{span:18,offset:3},lg:{span:14,offset:5},xl:{span:12,offset:6}}},[e("el-card",{staticClass:"modern-card",attrs:{shadow:"hover"}},[e("div",{staticClass:"upload-row"},[e("el-upload",{attrs:{action:"#","auto-upload":!1,multiple:!1,"show-file-list":!1,accept:"image/*","on-change":t.handleUploadChange,disabled:t.loading}},[e("el-button",{attrs:{type:"primary",round:"",disabled:t.loading}},[t._v("选择图片")])],1),e("el-select",{staticStyle:{width:"160px"},attrs:{disabled:t.loading,filterable:""},model:{value:t.style,callback:function(e){t.style=e},expression:"style"}},t._l(t.styleOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),"pixelate"===t.style?e("el-slider",{staticStyle:{width:"140px"},attrs:{min:2,max:50,step:1,disabled:t.loading},model:{value:t.blockSize,callback:function(e){t.blockSize=e},expression:"blockSize"}}):t._e(),"sketch"===t.style?e("el-slider",{staticStyle:{width:"140px"},attrs:{min:.5,max:3,step:.1,disabled:t.loading},model:{value:t.edgeStrength,callback:function(e){t.edgeStrength=e},expression:"edgeStrength"}}):t._e(),"sepia"===t.style?e("el-slider",{staticStyle:{width:"120px"},attrs:{min:.1,max:1,step:.05,disabled:t.loading},model:{value:t.sepiaStrength,callback:function(e){t.sepiaStrength=e},expression:"sepiaStrength"}}):t._e(),"emboss"===t.style?e("el-slider",{staticStyle:{width:"120px"},attrs:{min:.5,max:2,step:.05,disabled:t.loading},model:{value:t.embossStrength,callback:function(e){t.embossStrength=e},expression:"embossStrength"}}):t._e(),"blur"===t.style?e("el-slider",{staticStyle:{width:"120px"},attrs:{min:1,max:10,step:1,disabled:t.loading},model:{value:t.blurRadius,callback:function(e){t.blurRadius=e},expression:"blurRadius"}}):t._e(),"oil"===t.style?e("el-slider",{staticStyle:{width:"120px"},attrs:{min:2,max:20,step:1,disabled:t.loading},model:{value:t.oilBlockSize,callback:function(e){t.oilBlockSize=e},expression:"oilBlockSize"}}):t._e(),"mosaic"===t.style?e("el-slider",{staticStyle:{width:"120px"},attrs:{min:4,max:40,step:1,disabled:t.loading},model:{value:t.mosaicBlockSize,callback:function(e){t.mosaicBlockSize=e},expression:"mosaicBlockSize"}}):t._e(),"highcontrast"===t.style?e("el-slider",{staticStyle:{width:"120px"},attrs:{min:1,max:10,step:.1,disabled:t.loading},model:{value:t.contrastLevel,callback:function(e){t.contrastLevel=e},expression:"contrastLevel"}}):t._e(),e("el-button",{attrs:{type:"success",round:"",disabled:!t.file||t.loading},on:{click:t.handleProcess}},[t._v("一键生成")]),t.resultUrl?e("el-button",{attrs:{type:"primary",size:"mini",disabled:t.loading},on:{click:t.handleDownload}},[t._v("下载图片")]):t._e()],1),t.loading||t.progress>0?e("el-progress",{staticStyle:{margin:"16px 0"},attrs:{percentage:t.progress,status:"success","stroke-width":16,"text-inside":""}}):t._e(),t.error?e("div",{staticStyle:{color:"#f56c6c",margin:"12px 0","text-align":"center"}},[t._v(t._s(t.error))]):t._e(),e("el-row",{staticStyle:{"margin-top":"24px"},attrs:{gutter:16}},[e("el-col",{attrs:{span:12}},[e("div",{staticStyle:{"text-align":"center"}},[e("div",{staticStyle:{"font-weight":"600","margin-bottom":"8px"}},[t._v("原图预览")]),t.imgUrl?e("el-image",{staticStyle:{"max-width":"100%","max-height":"320px","border-radius":"10px","box-shadow":"0 2px 8px rgba(0,0,0,0.08)"},attrs:{src:t.imgUrl,"preview-src-list":t.loading?[]:[t.imgUrl,t.resultUrl],fit:"contain"}}):e("div",{staticStyle:{color:"#ccc"}},[t._v("请上传图片")])],1)]),e("el-col",{staticStyle:{position:"relative"},attrs:{span:12}},[e("div",{staticStyle:{"text-align":"center"}},[e("div",{staticStyle:{"font-weight":"600","margin-bottom":"8px"}},[t._v("风格化预览")]),t.resultUrl?e("el-image",{staticStyle:{"max-width":"100%","border-radius":"10px","box-shadow":"0 2px 8px rgba(0,0,0,0.08)",background:"#f0f9eb"},attrs:{src:t.resultUrl,fit:"contain","preview-src-list":t.loading?[]:[t.resultUrl,t.imgUrl]}}):t._e()],1)])],1)],1)],1)],1)],1)},l=[],s=(a(16573),a(78100),a(77936),a(48140),a(21903),a(91134),a(28845),a(37467),a(44732),a(79577),a(14603),a(47566),a(98721),a(95866)),o={name:"ArtStyleView",metaInfo:{title:"在线图片风格化 - 艺术滤镜转化照片",meta:[{name:"description",content:"将普通照片转换为艺术风格，如素描、水彩、油画风等，快速生成独特图像效果。"},{name:"keywords",content:"图片风格化,艺术滤镜,照片转画,在线风格转换,图像艺术化"}]},data(){return{file:null,imgUrl:"",resultUrl:"",style:"pixelate",blockSize:10,edgeStrength:1,loading:!1,progress:0,progressText:"",error:"",sepiaStrength:1,embossStrength:1,blurRadius:2,oilBlockSize:6,mosaicBlockSize:12,contrastLevel:2}},computed:{styleOptions(){return[{label:"像素化风格",value:"pixelate"},{label:"素描/边缘检测",value:"sketch"},{label:"灰度",value:"grayscale"},{label:"反色",value:"invert"},{label:"怀旧",value:"sepia"},{label:"浮雕",value:"emboss"},{label:"模糊",value:"blur"},{label:"油画",value:"oil"},{label:"马赛克",value:"mosaic"},{label:"高对比",value:"highcontrast"}]}},methods:{handleUploadChange(t,e){e.length>0?(this.file=e[e.length-1].raw||e[e.length-1],this.imgUrl=URL.createObjectURL(this.file),this.resultUrl="",this.error=""):(this.file=null,this.imgUrl="",this.resultUrl="",this.error="")},async handleProcess(){if(this.file){this.loading=!0,this.progress=0,this.progressText="处理中...",this.error="";try{let t="";switch(this.style){case"pixelate":t=await this.pixelateImage(this.file,this.blockSize);break;case"sketch":t=await this.sketchImage(this.file,this.edgeStrength);break;case"grayscale":t=await this.grayscaleImage(this.file);break;case"invert":t=await this.invertImage(this.file);break;case"sepia":t=await this.sepiaImage(this.file,this.sepiaStrength);break;case"emboss":t=await this.embossImage(this.file,this.embossStrength);break;case"blur":t=await this.blurImage(this.file,this.blurRadius);break;case"oil":t=await this.oilImage(this.file,this.oilBlockSize);break;case"mosaic":t=await this.mosaicImage(this.file,this.mosaicBlockSize);break;case"highcontrast":t=await this.highContrastImage(this.file,this.contrastLevel);break}this.resultUrl=t}catch(t){this.error="处理失败："+(t.message||t)}this.loading=!1,this.progress=0,this.progressText=""}},async pixelateImage(t,e){const a=await this.loadImageFromFile(t),i=a.width,l=a.height,s=document.createElement("canvas");s.width=i,s.height=l;const o=s.getContext("2d");return o.imageSmoothingEnabled=!1,o.clearRect(0,0,i,l),o.drawImage(a,0,0,i/e,l/e),o.drawImage(s,0,0,i/e,l/e,0,0,i,l),s.toDataURL("image/png")},async sketchImage(t,e){const a=await this.loadImageFromFile(t),i=a.width,l=a.height,s=document.createElement("canvas");s.width=i,s.height=l;const o=s.getContext("2d");o.drawImage(a,0,0,i,l);let n=o.getImageData(0,0,i,l);for(let g=0;g<n.data.length;g+=4){const t=(n.data[g]+n.data[g+1]+n.data[g+2])/3;n.data[g]=n.data[g+1]=n.data[g+2]=t}const r=[-1,0,1,-2,0,2,-1,0,1],c=[-1,-2,-1,0,0,0,1,2,1],d=n.data,h=new Uint8ClampedArray(d.length);for(let g=1;g<l-1;g++)for(let t=1;t<i-1;t++){let a=0,l=0;for(let e=-1;e<=1;e++)for(let s=-1;s<=1;s++){const o=4*((g+e)*i+(t+s)),n=d[o],h=3*(e+1)+(s+1);a+=r[h]*n,l+=c[h]*n}const s=Math.sqrt(a*a+l*l)*e,o=4*(g*i+t);h[o]=h[o+1]=h[o+2]=255-Math.min(255,s),h[o+3]=255}return n.data.set(h),o.putImageData(n,0,0),s.toDataURL("image/png")},async grayscaleImage(t){const e=await this.loadImageFromFile(t),a=e.width,i=e.height,l=document.createElement("canvas");l.width=a,l.height=i;const s=l.getContext("2d");s.drawImage(e,0,0,a,i);let o=s.getImageData(0,0,a,i);for(let n=0;n<o.data.length;n+=4){const t=(o.data[n]+o.data[n+1]+o.data[n+2])/3;o.data[n]=o.data[n+1]=o.data[n+2]=t}return s.putImageData(o,0,0),l.toDataURL("image/png")},async invertImage(t){const e=await this.loadImageFromFile(t),a=e.width,i=e.height,l=document.createElement("canvas");l.width=a,l.height=i;const s=l.getContext("2d");s.drawImage(e,0,0,a,i);let o=s.getImageData(0,0,a,i);for(let n=0;n<o.data.length;n+=4)o.data[n]=255-o.data[n],o.data[n+1]=255-o.data[n+1],o.data[n+2]=255-o.data[n+2];return s.putImageData(o,0,0),l.toDataURL("image/png")},async sepiaImage(t,e=1){const a=await this.loadImageFromFile(t),i=a.width,l=a.height,s=document.createElement("canvas");s.width=i,s.height=l;const o=s.getContext("2d");o.drawImage(a,0,0,i,l);let n=o.getImageData(0,0,i,l);for(let r=0;r<n.data.length;r+=4){const t=n.data[r],a=n.data[r+1],i=n.data[r+2];n.data[r]=Math.min(255,t*(1-.607*e)+.769*a*e+.189*i*e),n.data[r+1]=Math.min(255,.349*t*e+a*(1-.314*e)+.168*i*e),n.data[r+2]=Math.min(255,.272*t*e+.534*a*e+i*(1-.869*e))}return o.putImageData(n,0,0),s.toDataURL("image/png")},async embossImage(t,e=1){const a=await this.loadImageFromFile(t),i=a.width,l=a.height,s=document.createElement("canvas");s.width=i,s.height=l;const o=s.getContext("2d");o.drawImage(a,0,0,i,l);let n=o.getImageData(0,0,i,l);const r=n.data;for(let c=1;c<l;c++)for(let t=1;t<i;t++){const a=4*(c*i+t),l=4*((c-1)*i+(t-1));for(let t=0;t<3;t++){const i=r[a+t]-r[l+t]+128;r[a+t]=Math.max(0,Math.min(255,i*e))}}return o.putImageData(n,0,0),s.toDataURL("image/png")},async blurImage(t,e=2){const a=await this.loadImageFromFile(t),i=a.width,l=a.height,s=document.createElement("canvas");s.width=i,s.height=l;const o=s.getContext("2d");return o.filter=`blur(${e}px)`,o.drawImage(a,0,0,i,l),o.filter="none",s.toDataURL("image/png")},async oilImage(t,e=6){const a=await this.loadImageFromFile(t),i=a.width,l=a.height,s=document.createElement("canvas");s.width=i,s.height=l;const o=s.getContext("2d");o.drawImage(a,0,0,i,l);let n=o.getImageData(0,0,i,l);const r=n.data;for(let c=0;c<l;c+=e)for(let t=0;t<i;t+=e){const a={};let l=0,s=[0,0,0];for(let o=0;o<e;o++)for(let n=0;n<e;n++){const e=4*((c+o)*i+(t+n));if(e>=r.length)continue;const d=`${r[e]},${r[e+1]},${r[e+2]}`;a[d]=(a[d]||0)+1,a[d]>l&&(l=a[d],s=[r[e],r[e+1],r[e+2]])}for(let o=0;o<e;o++)for(let a=0;a<e;a++){const e=4*((c+o)*i+(t+a));e>=r.length||(r[e]=s[0],r[e+1]=s[1],r[e+2]=s[2])}}return o.putImageData(n,0,0),s.toDataURL("image/png")},async mosaicImage(t,e=12){const a=await this.loadImageFromFile(t),i=a.width,l=a.height,s=document.createElement("canvas");s.width=i,s.height=l;const o=s.getContext("2d");o.drawImage(a,0,0,i,l);let n=o.getImageData(0,0,i,l);const r=n.data;for(let c=0;c<l;c+=e)for(let t=0;t<i;t+=e){let a=0,l=0,s=0,o=0;for(let n=0;n<e;n++)for(let d=0;d<e;d++){const e=4*((c+n)*i+(t+d));e>=r.length||(a+=r[e],l+=r[e+1],s+=r[e+2],o++)}a=Math.round(a/o),l=Math.round(l/o),s=Math.round(s/o);for(let n=0;n<e;n++)for(let o=0;o<e;o++){const e=4*((c+n)*i+(t+o));e>=r.length||(r[e]=a,r[e+1]=l,r[e+2]=s)}}return o.putImageData(n,0,0),s.toDataURL("image/png")},async highContrastImage(t,e=2){const a=await this.loadImageFromFile(t),i=a.width,l=a.height,s=document.createElement("canvas");s.width=i,s.height=l;const o=s.getContext("2d");o.drawImage(a,0,0,i,l);let n=o.getImageData(0,0,i,l);const r=259*(e+255)/(255*(259-e));for(let c=0;c<n.data.length;c+=4)n.data[c]=Math.max(0,Math.min(255,r*(n.data[c]-128)+128)),n.data[c+1]=Math.max(0,Math.min(255,r*(n.data[c+1]-128)+128)),n.data[c+2]=Math.max(0,Math.min(255,r*(n.data[c+2]-128)+128));return o.putImageData(n,0,0),s.toDataURL("image/png")},loadImageFromFile(t){return new Promise(((e,a)=>{const i=new window.Image;i.onload=()=>e(i),i.onerror=a,i.src=URL.createObjectURL(t)}))},handleDownload(){if(!this.resultUrl)return;const t="pixelate"===this.style?"pixelated.png":"sketch.png";s.A.downloadImage(this.resultUrl,t)}},beforeDestroy(){this.imgUrl&&URL.revokeObjectURL(this.imgUrl),this.imgUrl="",this.resultUrl=""}},n=o,r=a(81656),c=(0,r.A)(n,i,l,!1,null,"09c35721",null),d=c.exports},95866:function(t,e,a){a(16280),a(14603),a(47566),a(98721);class i{static downloadText(t,e,a="text/plain"){const i=new Blob([t],{type:a});this.downloadBlob(i,e)}static downloadJSON(t,e="data.json"){const a=JSON.stringify(t,null,2);this.downloadText(a,e,"application/json")}static downloadCSV(t,e="data.csv",a=null){let i="";a&&a.length>0&&(i+=a.join(",")+"\n"),t.forEach((t=>{if(Array.isArray(t))i+=t.map((t=>`"${t}"`)).join(",")+"\n";else if("object"===typeof t){const e=a?a.map((e=>t[e]||"")):Object.values(t);i+=e.map((t=>`"${t}"`)).join(",")+"\n"}}));const l="\ufeff";this.downloadText(l+i,e,"text/csv;charset=utf-8")}static downloadImage(t,e="image.png"){const a=document.createElement("a");a.download=e,a.href=t,document.body.appendChild(a),a.click(),document.body.removeChild(a)}static downloadCanvas(t,e="canvas.png",a="image/png",i=1){const l=t.toDataURL(a,i);this.downloadImage(l,e)}static downloadBlob(t,e){const a=URL.createObjectURL(t),i=document.createElement("a");i.href=a,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)}static downloadURL(t,e){const a=document.createElement("a");a.href=t,a.download=e,a.target="_blank",document.body.appendChild(a),a.click(),document.body.removeChild(a)}static async downloadZip(t,e="files.zip"){const i=(await Promise.all([a.e(2407),a.e(9479)]).then(a.t.bind(a,44813,23))).default,l=new i;t.forEach((t=>{t.content,Blob,l.file(t.name,t.content)}));try{const t=await l.generateAsync({type:"blob"});return this.downloadBlob(t,e),!0}catch(s){return console.error("生成ZIP文件失败:",s),!1}}static async fetchBlob(t){try{const e=await fetch(t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.blob()}catch(e){throw console.error("获取文件失败:",e),e}}static generateTimestampFilename(t,e){const a=(new Date).toISOString().replace(/[:.]/g,"-").slice(0,-5);return`${t}_${a}.${e}`}static formatFileSize(t){if(0===t)return"0 Bytes";const e=1024,a=["Bytes","KB","MB","GB","TB"],i=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,i)).toFixed(2))+" "+a[i]}}e.A=i}}]);