"use strict";(self["webpackChunkweb_tool_vue"]=self["webpackChunkweb_tool_vue"]||[]).push([[9193],{79193:function(t,e,s){s.r(e),s.d(e,{default:function(){return r}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-container"},[t._m(0),e("div",{staticClass:"toolbar"},[e("el-upload",{staticClass:"upload-demo",attrs:{action:"","before-upload":t.handleFileUpload,"show-file-list":!1,accept:".csv,.txt"}},[e("el-button",[e("i",{staticClass:"el-icon-upload2"}),t._v(" ä¸Šä¼ CSVæ–‡ä»¶ ")])],1),e("div",{staticClass:"toolbar-actions"},[e("el-button",{on:{click:t.loadSample}},[e("i",{staticClass:"el-icon-document"}),t._v(" åŠ è½½ç¤ºä¾‹ ")]),e("el-button",{on:{click:t.clearData}},[e("i",{staticClass:"el-icon-delete"}),t._v(" æ¸…ç©ºæ•°æ® ")]),e("el-button",{on:{click:t.addRow}},[e("i",{staticClass:"el-icon-plus"}),t._v(" æ·»åŠ è¡Œ ")]),e("el-button",{on:{click:t.addColumn}},[e("i",{staticClass:"el-icon-plus"}),t._v(" æ·»åŠ åˆ— ")]),e("el-button",{on:{click:t.downloadCsv}},[e("i",{staticClass:"el-icon-download"}),t._v(" ä¸‹è½½CSV ")]),e("el-button",{on:{click:t.downloadJson}},[e("i",{staticClass:"el-icon-download"}),t._v(" ä¸‹è½½JSON ")])],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{xs:24,sm:24,md:16,lg:16,xl:16}},[e("el-card",{staticClass:"data-card"},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("æ•°æ®è¡¨æ ¼")]),e("div",{staticStyle:{float:"right"}},[e("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"æœç´¢æ•°æ®...",size:"mini","prefix-icon":"el-icon-search"},on:{input:t.handleSearch},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}})],1)]),e("div",{staticClass:"table-container"},[e("el-table",{staticClass:"csv-table",attrs:{data:t.filteredData,border:"",stripe:"",height:"400"},on:{"cell-click":t.handleCellClick}},[t._l(t.columns,(function(s,a){return e("el-table-column",{key:a,attrs:{prop:s.prop,label:s.label,width:s.width,"show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(i){return[t.editingCell.row===i.$index&&t.editingCell.col===a?e("el-input",{ref:"cellInput",refInFor:!0,attrs:{size:"mini"},on:{blur:function(e){t.editingCell={}},keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.editingCell={}}},model:{value:i.row[s.prop],callback:function(e){t.$set(i.row,s.prop,e)},expression:"scope.row[column.prop]"}}):e("span",[t._v(t._s(i.row[s.prop]))])]}}],null,!0)},[e("template",{slot:"header"},[t.editingHeader===a?e("el-input",{ref:"headerInput",refInFor:!0,attrs:{size:"mini"},on:{blur:function(e){t.editingHeader=-1},keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.editingHeader=-1}},model:{value:s.label,callback:function(e){t.$set(s,"label",e)},expression:"column.label"}}):e("span",{on:{dblclick:function(e){return t.editHeader(a)}}},[t._v(" "+t._s(s.label)+" "),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.deleteColumn(a)}}},[e("i",{staticClass:"el-icon-close"})])],1)],1)],2)})),e("el-table-column",{attrs:{label:"æ“ä½œ",width:"80",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.deleteRow(s.$index)}}},[e("i",{staticClass:"el-icon-delete"})])]}}])})],2)],1),e("div",{staticClass:"table-stats"},[e("span",[t._v("æ€»è¡Œæ•°: "+t._s(t.csvData.length))]),e("span",[t._v("æ€»åˆ—æ•°: "+t._s(t.columns.length))]),e("span",[t._v("æ˜¾ç¤ºè¡Œæ•°: "+t._s(t.filteredData.length))])])])],1),e("el-col",{attrs:{xs:24,sm:24,md:8,lg:8,xl:8}},[e("el-card",{staticClass:"settings-card"},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("CSVè®¾ç½®")])]),e("el-form",{attrs:{"label-width":"80px"}},[e("el-form-item",{attrs:{label:"åˆ†éš”ç¬¦"}},[e("el-select",{on:{change:t.parseRawData},model:{value:t.csvSettings.delimiter,callback:function(e){t.$set(t.csvSettings,"delimiter",e)},expression:"csvSettings.delimiter"}},[e("el-option",{attrs:{label:"é€—å· (,)",value:","}}),e("el-option",{attrs:{label:"åˆ†å· (;)",value:";"}}),e("el-option",{attrs:{label:"åˆ¶è¡¨ç¬¦",value:"\\t"}}),e("el-option",{attrs:{label:"ç«–çº¿ (|)",value:"|"}})],1)],1),e("el-form-item",{attrs:{label:"å¼•å·"}},[e("el-select",{on:{change:t.parseRawData},model:{value:t.csvSettings.quote,callback:function(e){t.$set(t.csvSettings,"quote",e)},expression:"csvSettings.quote"}},[e("el-option",{attrs:{label:'åŒå¼•å· (")',value:'"'}}),e("el-option",{attrs:{label:"å•å¼•å· (')",value:"'"}}),e("el-option",{attrs:{label:"æ— ",value:""}})],1)],1),e("el-form-item",[e("el-checkbox",{on:{change:t.parseRawData},model:{value:t.csvSettings.hasHeader,callback:function(e){t.$set(t.csvSettings,"hasHeader",e)},expression:"csvSettings.hasHeader"}},[t._v(" åŒ…å«æ ‡é¢˜è¡Œ ")])],1),e("el-form-item",[e("el-checkbox",{on:{change:t.parseRawData},model:{value:t.csvSettings.skipEmptyLines,callback:function(e){t.$set(t.csvSettings,"skipEmptyLines",e)},expression:"csvSettings.skipEmptyLines"}},[t._v(" è·³è¿‡ç©ºè¡Œ ")])],1)],1)],1),e("el-card",{staticClass:"raw-data-card",staticStyle:{"margin-top":"20px"}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("åŽŸå§‹æ•°æ®")])]),e("el-input",{attrs:{type:"textarea",placeholder:"ç²˜è´´CSVæ•°æ®æˆ–ä¸Šä¼ æ–‡ä»¶...",rows:10},on:{input:t.parseRawData},model:{value:t.rawData,callback:function(e){t.rawData=e},expression:"rawData"}})],1),e("el-card",{staticClass:"stats-card",staticStyle:{"margin-top":"20px"}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("æ•°æ®ç»Ÿè®¡")])]),e("div",{staticClass:"stats-grid"},[e("div",{staticClass:"stat-item"},[e("div",{staticClass:"stat-number"},[t._v(t._s(t.csvData.length))]),e("div",{staticClass:"stat-label"},[t._v("æ•°æ®è¡Œ")])]),e("div",{staticClass:"stat-item"},[e("div",{staticClass:"stat-number"},[t._v(t._s(t.columns.length))]),e("div",{staticClass:"stat-label"},[t._v("åˆ—æ•°")])]),e("div",{staticClass:"stat-item"},[e("div",{staticClass:"stat-number"},[t._v(t._s(t.getTotalCells()))]),e("div",{staticClass:"stat-label"},[t._v("æ€»å•å…ƒæ ¼")])]),e("div",{staticClass:"stat-item"},[e("div",{staticClass:"stat-number"},[t._v(t._s(t.getEmptyCells()))]),e("div",{staticClass:"stat-label"},[t._v("ç©ºå•å…ƒæ ¼")])])])])],1)],1)],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"tool-header"},[e("h1",[t._v("ðŸ“Š CSVå¤„ç†å™¨")]),e("p",[t._v("CSVæ–‡ä»¶çš„è§£æžã€ç¼–è¾‘ã€è½¬æ¢å’Œå¯¼å‡ºå·¥å…·")])])}],l=(s(44114),s(14603),s(47566),s(98721),{name:"CsvProcessorView",metaInfo:{title:"CSVå¤„ç†å™¨ - CSVæ–‡ä»¶å¤„ç†å·¥å…·",meta:[{name:"description",content:"CSVæ–‡ä»¶çš„è§£æžã€ç¼–è¾‘ã€è½¬æ¢å’Œå¯¼å‡ºå·¥å…·ï¼Œæ”¯æŒå¤šç§åˆ†éš”ç¬¦å’Œæ ¼å¼è®¾ç½®ã€‚"},{name:"keywords",content:"CSVå¤„ç†,CSVç¼–è¾‘å™¨,CSVè½¬æ¢,æ•°æ®å¤„ç†,è¡¨æ ¼ç¼–è¾‘"}]},data(){return{rawData:"",csvData:[],filteredData:[],columns:[],searchText:"",editingCell:{},editingHeader:-1,csvSettings:{delimiter:",",quote:'"',hasHeader:!0,skipEmptyLines:!0}}},mounted(){this.loadSample()},methods:{handleFileUpload(t){const e=new FileReader;return e.onload=t=>{this.rawData=t.target.result,this.parseRawData()},e.readAsText(t),!1},parseRawData(){if(!this.rawData.trim())return this.csvData=[],this.filteredData=[],void(this.columns=[]);try{const t=this.rawData.trim().split("\n"),e=[];for(let i of t){if(this.csvSettings.skipEmptyLines&&!i.trim())continue;const t=this.parseCsvLine(i);e.push(t)}if(0===e.length)return this.csvData=[],this.filteredData=[],void(this.columns=[]);const s=Math.max(...e.map((t=>t.length)));this.columns=[];for(let i=0;i<s;i++){let t=`åˆ—${i+1}`;this.csvSettings.hasHeader&&e.length>0&&(t=e[0][i]||t),this.columns.push({prop:`col${i}`,label:t,width:120})}const a=this.csvSettings.hasHeader?1:0;this.csvData=[];for(let i=a;i<e.length;i++){const t={};for(let a=0;a<s;a++)t[`col${a}`]=e[i][a]||"";this.csvData.push(t)}this.filteredData=[...this.csvData],this.handleSearch()}catch(t){this.$message.error("CSVè§£æžå¤±è´¥: "+t.message)}},parseCsvLine(t){const e=[];let s="",a=!1,i=0;while(i<t.length){const l=t[i];l===this.csvSettings.quote&&this.csvSettings.quote?a&&t[i+1]===this.csvSettings.quote?(s+=this.csvSettings.quote,i+=2):(a=!a,i++):l!==this.csvSettings.delimiter||a?(s+=l,i++):(e.push(s.trim()),s="",i++)}return e.push(s.trim()),e},handleSearch(){if(!this.searchText.trim())return void(this.filteredData=[...this.csvData]);const t=this.searchText.toLowerCase();this.filteredData=this.csvData.filter((e=>Object.values(e).some((e=>String(e).toLowerCase().includes(t)))))},handleCellClick(t,e){const s=this.columns.findIndex((t=>t.prop===e.property)),a=this.filteredData.indexOf(t);s>=0&&a>=0&&(this.editingCell={row:a,col:s},this.$nextTick((()=>{this.$refs.cellInput&&this.$refs.cellInput[0]&&this.$refs.cellInput[0].focus()})))},editHeader(t){this.editingHeader=t,this.$nextTick((()=>{this.$refs.headerInput&&this.$refs.headerInput[0]&&this.$refs.headerInput[0].focus()}))},addRow(){const t={};this.columns.forEach((e=>{t[e.prop]=""})),this.csvData.push(t),this.handleSearch()},addColumn(){const t=this.columns.length,e={prop:`col${t}`,label:`åˆ—${t+1}`,width:120};this.columns.push(e),this.csvData.forEach((t=>{t[e.prop]=""})),this.handleSearch()},deleteRow(t){const e=this.csvData.indexOf(this.filteredData[t]);e>=0&&(this.csvData.splice(e,1),this.handleSearch())},deleteColumn(t){if(this.columns.length<=1)return void this.$message.warning("è‡³å°‘éœ€è¦ä¿ç•™ä¸€åˆ—");const e=this.columns[t].prop;this.columns.splice(t,1),this.csvData.forEach((t=>{delete t[e]})),this.handleSearch()},loadSample(){this.rawData="å§“å,å¹´é¾„,åŸŽå¸‚,èŒä¸š,è–ªèµ„\nå¼ ä¸‰,28,åŒ—äº¬,è½¯ä»¶å·¥ç¨‹å¸ˆ,15000\næŽå››,32,ä¸Šæµ·,äº§å“ç»ç†,18000\nçŽ‹äº”,25,å¹¿å·ž,UIè®¾è®¡å¸ˆ,12000\nèµµå…­,30,æ·±åœ³,æ•°æ®åˆ†æžå¸ˆ,16000\né’±ä¸ƒ,27,æ­å·ž,å‰ç«¯å¼€å‘,14000\nå­™å…«,35,æˆéƒ½,é¡¹ç›®ç»ç†,20000\nå‘¨ä¹,29,æ­¦æ±‰,åŽç«¯å¼€å‘,15500\nå´å,26,è¥¿å®‰,æµ‹è¯•å·¥ç¨‹å¸ˆ,11000",this.parseRawData()},clearData(){this.rawData="",this.csvData=[],this.filteredData=[],this.columns=[],this.searchText=""},downloadCsv(){if(0===this.csvData.length)return void this.$message.warning("æ²¡æœ‰æ•°æ®å¯ä¸‹è½½");let t="";if(this.csvSettings.hasHeader){const e=this.columns.map((t=>this.escapeCsvValue(t.label)));t+=e.join(this.csvSettings.delimiter)+"\n"}this.csvData.forEach((e=>{const s=this.columns.map((t=>this.escapeCsvValue(e[t.prop]||"")));t+=s.join(this.csvSettings.delimiter)+"\n"})),this.downloadFile(t,"data.csv","text/csv")},downloadJson(){if(0===this.csvData.length)return void this.$message.warning("æ²¡æœ‰æ•°æ®å¯ä¸‹è½½");const t=this.csvData.map((t=>{const e={};return this.columns.forEach((s=>{e[s.label]=t[s.prop]||""})),e})),e=JSON.stringify(t,null,2);this.downloadFile(e,"data.json","application/json")},escapeCsvValue(t){const e=String(t);return e.includes(this.csvSettings.delimiter)||e.includes("\n")||e.includes(this.csvSettings.quote)?this.csvSettings.quote+e.replace(new RegExp(this.csvSettings.quote,"g"),this.csvSettings.quote+this.csvSettings.quote)+this.csvSettings.quote:e},downloadFile(t,e,s){const a=new Blob([t],{type:s}),i=URL.createObjectURL(a),l=document.createElement("a");l.href=i,l.download=e,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(i),this.$message.success("æ–‡ä»¶ä¸‹è½½æˆåŠŸ")},getTotalCells(){return this.csvData.length*this.columns.length},getEmptyCells(){let t=0;return this.csvData.forEach((e=>{this.columns.forEach((s=>{e[s.prop]&&""!==e[s.prop].toString().trim()||t++}))})),t}}}),n=l,o=s(81656),c=(0,o.A)(n,a,i,!1,null,"cbc27f20",null),r=c.exports}}]);