"use strict";(self["webpackChunkweb_tool_vue"]=self["webpackChunkweb_tool_vue"]||[]).push([[3468],{3468:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modern-bg"},[t("el-row",{attrs:{gutter:0,justify:"center"}},[t("el-col",{attrs:{xs:{span:24,offset:0},sm:{span:22,offset:1},md:{span:18,offset:3},lg:{span:14,offset:5},xl:{span:12,offset:6}}},[t("el-card",{staticClass:"modern-card",attrs:{shadow:"hover"}},[t("div",{staticClass:"page-header"},[t("h1",{staticClass:"modern-title"},[e._v("âš™ï¸ å¢åˆ æ”¹æŸ¥ç”Ÿæˆå™¨")]),t("p",{staticClass:"page-description"},[e._v("æ ¹æ®MySQLè¡¨ç»“æ„ç”ŸæˆPHPæ¡†æ¶çš„Modelå’ŒControllerä»£ç ")])]),t("div",{staticClass:"generator-container"},[t("div",{staticClass:"framework-selection"},[t("h3",[e._v("é€‰æ‹©PHPæ¡†æ¶")]),t("div",{staticClass:"framework-tabs"},e._l(e.frameworks,(function(n){return t("div",{key:n.id,staticClass:"framework-tab",class:{active:e.selectedFramework===n.id},on:{click:function(t){return e.selectFramework(n.id)}}},[t("div",{staticClass:"framework-icon"},[e._v(e._s(n.icon))]),t("div",{staticClass:"framework-name"},[e._v(e._s(n.name))]),t("div",{staticClass:"framework-desc"},[e._v(e._s(n.description))])])})),0)]),t("div",{staticClass:"table-structure-section"},[t("h3",[e._v("è¾“å…¥è¡¨ç»“æ„")]),t("div",{staticClass:"input-methods"},[t("el-radio-group",{model:{value:e.inputMethod,callback:function(t){e.inputMethod=t},expression:"inputMethod"}},[t("el-radio",{attrs:{label:"manual"}},[e._v("æ‰‹åŠ¨è¾“å…¥")]),t("el-radio",{attrs:{label:"upload"}},[e._v("ä¸Šä¼ SQLæ–‡ä»¶")])],1)],1),"manual"===e.inputMethod?t("div",{staticClass:"manual-input"},[t("div",{staticClass:"table-info"},[t("el-input",{staticClass:"table-name-input",attrs:{placeholder:"è¯·è¾“å…¥è¡¨åï¼Œå¦‚ï¼šusers"},model:{value:e.tableName,callback:function(t){e.tableName=t},expression:"tableName"}},[t("template",{slot:"prepend"},[e._v("è¡¨å")])],2)],1),t("div",{staticClass:"sql-input"},[t("el-input",{attrs:{type:"textarea",rows:12,placeholder:"è¯·è¾“å…¥CREATE TABLEè¯­å¥æˆ–å­—æ®µå®šä¹‰ï¼Œä¾‹å¦‚ï¼š\nCREATE TABLE `users` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `name` varchar(255) NOT NULL COMMENT 'ç”¨æˆ·å',\n  `email` varchar(255) NOT NULL COMMENT 'é‚®ç®±',\n  `password` varchar(255) NOT NULL COMMENT 'å¯†ç ',\n  `created_at` timestamp NULL DEFAULT NULL,\n  `updated_at` timestamp NULL DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;"},model:{value:e.sqlStructure,callback:function(t){e.sqlStructure=t},expression:"sqlStructure"}})],1)]):e._e(),"upload"===e.inputMethod?t("div",{staticClass:"file-upload"},[t("el-upload",{staticClass:"upload-area",attrs:{drag:"","before-upload":e.handleFileUpload,"show-file-list":!1,accept:".sql,.txt"}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("å°†SQLæ–‡ä»¶æ‹–åˆ°æ­¤å¤„ï¼Œæˆ–"),t("em",[e._v("ç‚¹å‡»ä¸Šä¼ ")])]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("åªèƒ½ä¸Šä¼ .sql/.txtæ–‡ä»¶")])])],1):e._e()]),"manual"===e.inputMethod&&e.sqlStructure||e.uploadedContent?t("div",{staticClass:"parse-section"},[t("el-button",{attrs:{type:"primary",loading:e.parsing},on:{click:e.parseTableStructure}},[e._v(" "+e._s(e.parsing?"è§£æä¸­...":"è§£æè¡¨ç»“æ„")+" ")])],1):e._e(),e.parsedTables.length>0?t("div",{staticClass:"parsed-fields"},[t("h3",[e._v("è§£æç»“æœ")]),e.parsedTables.length>1?t("div",{staticClass:"table-selection"},[t("h4",[e._v("ğŸ—‚ï¸ æ£€æµ‹åˆ°å¤šä¸ªè¡¨ï¼Œè¯·é€‰æ‹©è¦ç”Ÿæˆä»£ç çš„è¡¨")]),t("div",{staticClass:"table-stats"},[t("el-tag",{attrs:{type:"info",size:"small"}},[e._v(" å…±è§£æåˆ° "+e._s(e.parsedTables.length)+" ä¸ªè¡¨ ")])],1),t("el-select",{staticStyle:{width:"100%","max-width":"400px"},attrs:{placeholder:"è¯·é€‰æ‹©è¡¨"},on:{change:e.onTableChange},model:{value:e.selectedTableIndex,callback:function(t){e.selectedTableIndex=t},expression:"selectedTableIndex"}},e._l(e.parsedTables,(function(n,a){return t("el-option",{key:a,attrs:{label:`${n.name} (${n.fields.length}ä¸ªå­—æ®µ)`,value:a}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(n.name))]),t("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(n.fields.length)+"ä¸ªå­—æ®µ")])])})),1)],1):e._e(),t("div",{staticClass:"table-info-display"},[t("div",{staticClass:"info-item"},[t("span",{staticClass:"label"},[e._v("è¡¨å:")]),t("span",{staticClass:"value"},[e._v(e._s(e.currentTable.name))])]),t("div",{staticClass:"info-item"},[t("span",{staticClass:"label"},[e._v("å­—æ®µæ•°:")]),t("span",{staticClass:"value"},[e._v(e._s(e.currentTable.fields.length))])])]),t("div",{staticClass:"fields-table"},[t("el-table",{attrs:{data:e.currentTable.fields,border:""}},[t("el-table-column",{attrs:{prop:"name",label:"å­—æ®µå",width:"150"}}),t("el-table-column",{attrs:{prop:"type",label:"ç±»å‹",width:"120"}}),t("el-table-column",{attrs:{prop:"nullable",label:"å¯ç©º",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.nullable?"æ˜¯":"å¦")+" ")]}}],null,!1,369317280)}),t("el-table-column",{attrs:{prop:"default",label:"é»˜è®¤å€¼",width:"100"}}),t("el-table-column",{attrs:{prop:"comment",label:"æ³¨é‡Š"}})],1)],1)]):e._e(),e.parsedTables.length>0?t("div",{staticClass:"generation-options"},[t("h3",[e._v("ç”Ÿæˆé€‰é¡¹")]),t("div",{staticClass:"options-grid"},[t("el-checkbox-group",{model:{value:e.generateOptions,callback:function(t){e.generateOptions=t},expression:"generateOptions"}},[t("el-checkbox",{attrs:{label:"model"}},[e._v("Modelæ¨¡å‹")]),t("el-checkbox",{attrs:{label:"controller"}},[e._v("Controlleræ§åˆ¶å™¨")]),t("el-checkbox",{attrs:{label:"migration"}},[e._v("æ•°æ®åº“è¿ç§»")]),t("el-checkbox",{attrs:{label:"request"}},[e._v("è¡¨å•éªŒè¯")])],1)],1),t("div",{staticClass:"additional-options"},[t("el-checkbox",{model:{value:e.includeTimestamps,callback:function(t){e.includeTimestamps=t},expression:"includeTimestamps"}},[e._v("åŒ…å«æ—¶é—´æˆ³å­—æ®µ")]),t("el-checkbox",{model:{value:e.includeSoftDeletes,callback:function(t){e.includeSoftDeletes=t},expression:"includeSoftDeletes"}},[e._v("åŒ…å«è½¯åˆ é™¤")]),t("el-checkbox",{model:{value:e.generateComments,callback:function(t){e.generateComments=t},expression:"generateComments"}},[e._v("ç”Ÿæˆè¯¦ç»†æ³¨é‡Š")])],1)]):e._e(),e.parsedTables.length>0&&e.generateOptions.length>0?t("div",{staticClass:"generate-section"},[t("el-button",{attrs:{type:"success",size:"large",loading:e.generating},on:{click:e.generateCode}},[e._v(" "+e._s(e.generating?"ç”Ÿæˆä¸­...":"ç”Ÿæˆä»£ç ")+" ")])],1):e._e(),e.generatedCode.length>0?t("div",{staticClass:"generated-code"},[t("h3",[e._v("ç”Ÿæˆçš„ä»£ç ")]),t("div",{staticClass:"code-tabs"},e._l(e.generatedCode,(function(n,a){return t("div",{key:a,staticClass:"code-tab",class:{active:e.activeCodeTab===a},on:{click:function(t){e.activeCodeTab=a}}},[e._v(" "+e._s(n.filename)+" ")])})),0),t("div",{staticClass:"code-content"},[t("div",{staticClass:"code-header"},[t("span",{staticClass:"filename"},[e._v(e._s(e.generatedCode[e.activeCodeTab].filename))]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.copyCode(e.activeCodeTab)}}},[t("i",{staticClass:"el-icon-copy-document"}),e._v(" å¤åˆ¶ä»£ç  ")])],1),t("pre",{staticClass:"code-block"},[t("code",[e._v(e._s(e.generatedCode[e.activeCodeTab].content))])])]),t("div",{staticClass:"download-section"},[t("el-button",{attrs:{type:"primary"},on:{click:e.downloadAllCode}},[t("i",{staticClass:"el-icon-download"}),e._v(" ä¸‹è½½æ‰€æœ‰æ–‡ä»¶ ")])],1)]):e._e(),t("div",{staticClass:"usage-guide"},[t("h3",[e._v("ä½¿ç”¨è¯´æ˜")]),t("div",{staticClass:"guide-content"},[t("div",{staticClass:"guide-section"},[t("h4",[e._v("æ”¯æŒçš„æ¡†æ¶")]),t("ul",[t("li",[t("strong",[e._v("Laravel")]),e._v("ï¼šç”ŸæˆEloquentæ¨¡å‹å’Œèµ„æºæ§åˆ¶å™¨")]),t("li",[t("strong",[e._v("ThinkPHP")]),e._v("ï¼šç”Ÿæˆæ¨¡å‹å’Œæ§åˆ¶å™¨ä»£ç ")])])]),t("div",{staticClass:"guide-section"},[t("h4",[e._v("ä½¿ç”¨æ­¥éª¤")]),t("ol",[t("li",[e._v("é€‰æ‹©è¦ä½¿ç”¨çš„PHPæ¡†æ¶")]),t("li",[e._v("è¾“å…¥MySQLè¡¨ç»“æ„æˆ–ä¸Šä¼ SQLæ–‡ä»¶")]),t("li",[e._v('ç‚¹å‡»"è§£æè¡¨ç»“æ„"åˆ†æå­—æ®µä¿¡æ¯')]),t("li",[e._v("é€‰æ‹©è¦ç”Ÿæˆçš„ä»£ç ç±»å‹")]),t("li",[e._v('ç‚¹å‡»"ç”Ÿæˆä»£ç "è·å–ç»“æœ')])])]),t("div",{staticClass:"guide-section"},[t("h4",[e._v("ç”Ÿæˆå†…å®¹")]),t("ul",[t("li",[t("strong",[e._v("Model")]),e._v("ï¼šåŒ…å«å­—æ®µæ³¨é‡Šã€ç±»å‹è½¬æ¢ã€å…³è”å…³ç³»")]),t("li",[t("strong",[e._v("Controller")]),e._v("ï¼šåŒ…å«å¢åˆ æ”¹æŸ¥çš„å®Œæ•´æ–¹æ³•")]),t("li",[t("strong",[e._v("Migration")]),e._v("ï¼šæ•°æ®åº“è¿ç§»æ–‡ä»¶")]),t("li",[t("strong",[e._v("Request")]),e._v("ï¼šè¡¨å•éªŒè¯è§„åˆ™")])])])])])])])],1)],1)],1)},s=[],i=(n(44114),n(72712),n(46834)),l=n(95866),o={name:"CrudGeneratorView",metaInfo:{title:"CRUD å¢åˆ æ”¹æŸ¥ä»£ç ç”Ÿæˆå™¨ - MySQLè¡¨ç»“æ„ä¸€é”®ç”Ÿæˆ PHP Model/Controller | æå‡å¼€å‘æ•ˆç‡",meta:[{name:"description",content:"å…è´¹åœ¨çº¿ CRUD ä»£ç ç”Ÿæˆå™¨ï¼Œä¸“ä¸º PHP å¼€å‘è€…è®¾è®¡ã€‚æ ¹æ®ä¸Šä¼ çš„ MySQL è¡¨ç»“æ„ï¼Œè‡ªåŠ¨ç”Ÿæˆæ ‡å‡†çš„ Model å’Œ Controller å¢åˆ æ”¹æŸ¥ä»£ç ï¼Œå¿«é€Ÿå®ç°å‰åç«¯åˆ†ç¦»æ¥å£æˆ–åå°ç®¡ç†åŠŸèƒ½ã€‚"},{name:"keywords",content:"CRUD ç”Ÿæˆå™¨, å¢åˆ æ”¹æŸ¥ä»£ç ç”Ÿæˆ, MySQL ç”Ÿæˆ PHP ä»£ç , Model Controller è‡ªåŠ¨ç”Ÿæˆ, PHP ä»£ç ç”Ÿæˆ, è‡ªåŠ¨åŒ–å¼€å‘å·¥å…·, æå‡æ•ˆç‡"}]},data(){return{selectedFramework:"laravel",inputMethod:"manual",tableName:"",sqlStructure:"",uploadedContent:"",parsing:!1,generating:!1,parsedTables:[],selectedTableIndex:0,generateOptions:["model","controller"],includeTimestamps:!0,includeSoftDeletes:!1,generateComments:!0,generatedCode:[],activeCodeTab:0,frameworks:[{id:"laravel",name:"Laravel",icon:"ğŸ”¥",description:"Eloquent ORM + èµ„æºæ§åˆ¶å™¨"},{id:"thinkphp",name:"ThinkPHP",icon:"âš¡",description:"ThinkPHPæ¨¡å‹ + æ§åˆ¶å™¨"}]}},computed:{currentTable(){return this.parsedTables[this.selectedTableIndex]||{name:"",fields:[]}}},methods:{selectFramework(e){this.selectedFramework=e,this.generatedCode=[]},onTableChange(){this.generatedCode=[]},handleFileUpload(e){const t=new FileReader;return t.onload=e=>{this.uploadedContent=e.target.result,this.sqlStructure=this.uploadedContent},t.readAsText(e),!1},async parseTableStructure(){this.parsing=!0;try{await new Promise((e=>setTimeout(e,1e3)));const e=this.sqlStructure||this.uploadedContent;this.parsedTables=this.extractTables(e),this.selectedTableIndex=0,1===this.parsedTables.length?this.$message.success(`è¡¨ç»“æ„è§£æå®Œæˆï¼Œè§£æåˆ°è¡¨ "${this.parsedTables[0].name}"ï¼ŒåŒ…å« ${this.parsedTables[0].fields.length} ä¸ªå­—æ®µ`):this.$message.success(`è¡¨ç»“æ„è§£æå®Œæˆï¼Œå…±è§£æåˆ° ${this.parsedTables.length} ä¸ªè¡¨ï¼Œæ€»è®¡ ${this.parsedTables.reduce(((e,t)=>e+t.fields.length),0)} ä¸ªå­—æ®µ`)}catch(e){this.$message.error("è§£æå¤±è´¥ï¼Œè¯·æ£€æŸ¥SQLè¯­æ³•")}finally{this.parsing=!1}},extractTables(e){const t=[],n=/CREATE\s+TABLE\s+(?:IF\s+NOT\s+EXISTS\s+)?`?(\w+)`?\s*\(([\s\S]*?)\)\s*(?:ENGINE\s*=\s*\w+)?(?:\s*DEFAULT\s+CHARSET\s*=\s*\w+)?(?:\s*COLLATE\s*=\s*[\w_]+)?(?:\s*COMMENT\s*=\s*'[^']*')?;/gi;let a;while(null!==(a=n.exec(e))){const e=a[1],n=a[2],s=this.extractFieldsFromContent(n);s.length>0&&t.push({name:e,fields:s})}if(0===t.length){const n=this.extractTableName(e)||"example_table",a=this.extractFields(e);a.length>0&&t.push({name:n,fields:a})}return t.length>0?t:[{name:"example_table",fields:this.getMockFields()}]},extractTableName(e){const t=e.match(/CREATE\s+TABLE\s+(?:IF\s+NOT\s+EXISTS\s+)?`?(\w+)`?/i);return t?t[1]:this.tableName||"example_table"},extractFieldsFromContent(e){const t=[],n=e.split("\n");for(const a of n){const e=a.trim();if(e.startsWith("--")||e.startsWith("/*")||e.startsWith("PRIMARY KEY")||e.startsWith("KEY")||e.startsWith("INDEX")||e.startsWith("UNIQUE")||e.startsWith("FOREIGN KEY")||e.startsWith("CONSTRAINT")||""===e||","===e||")"===e)continue;const n=e.match(/^`?(\w+)`?\s+(\w+(?:\(\d+(?:,\d+)?\))?)\s*(.*?)(?:,\s*)?$/i);if(n){const[,e,a,s]=n,i=!s.toUpperCase().includes("NOT NULL"),l=s.toUpperCase().includes("AUTO_INCREMENT"),o=this.extractDefault(s),r=this.extractComment(s);t.push({name:e,type:a.toLowerCase(),nullable:i,autoIncrement:l,default:o,comment:r||e})}}return t},extractFields(e){const t=[],n=e.split("\n");for(const a of n){const e=a.trim();if(e.startsWith("`")&&e.includes("`")){const n=e.match(/`(\w+)`\s+(\w+(?:\(\d+\))?)\s*(.*)/i);if(n){const[,e,a,s]=n;t.push({name:e,type:a,nullable:!s.includes("NOT NULL"),default:this.extractDefault(s),comment:this.extractComment(s)})}}}return t.length>0?t:this.getMockFields()},extractDefault(e){const t=e.match(/DEFAULT\s+([^,\s]+)/i);return t?t[1].replace(/['"]/g,""):""},extractComment(e){const t=e.match(/COMMENT\s+['"](.*?)['"]/i);return t?t[1]:""},getMockFields(){return[{name:"id",type:"int(11)",nullable:!1,default:"",comment:"ä¸»é”®ID"},{name:"name",type:"varchar(255)",nullable:!1,default:"",comment:"åç§°"},{name:"email",type:"varchar(255)",nullable:!1,default:"",comment:"é‚®ç®±"},{name:"status",type:"tinyint(1)",nullable:!1,default:"1",comment:"çŠ¶æ€"},{name:"created_at",type:"timestamp",nullable:!0,default:"NULL",comment:"åˆ›å»ºæ—¶é—´"},{name:"updated_at",type:"timestamp",nullable:!0,default:"NULL",comment:"æ›´æ–°æ—¶é—´"}]},async generateCode(){this.generating=!0;try{await new Promise((e=>setTimeout(e,1500))),this.generatedCode=[],this.generateOptions.includes("model")&&this.generatedCode.push(this.generateModel()),this.generateOptions.includes("controller")&&this.generatedCode.push(this.generateController()),this.generateOptions.includes("migration")&&this.generatedCode.push(this.generateMigration()),this.generateOptions.includes("request")&&this.generatedCode.push(this.generateRequest()),this.activeCodeTab=0,this.$message.success("ä»£ç ç”Ÿæˆå®Œæˆ")}catch(e){this.$message.error("ç”Ÿæˆå¤±è´¥ï¼Œè¯·é‡è¯•")}finally{this.generating=!1}},generateModel(){const e=this.toPascalCase(this.currentTable.name),t=this.currentTable.name;return"laravel"===this.selectedFramework?{filename:`${e}.php`,content:`<?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\n${this.includeSoftDeletes?"use Illuminate\\Database\\Eloquent\\SoftDeletes;":""}\n\n/**\n * ${e} æ¨¡å‹\n * \n * @property int $id\n${this.currentTable.fields.map((e=>` * @property ${this.getPhpType(e.type)} $${e.name} ${e.comment}`)).join("\n")}\n */\nclass ${e} extends Model\n{\n    use HasFactory${this.includeSoftDeletes?", SoftDeletes":""};\n\n    /**\n     * æ•°æ®è¡¨åç§°\n     */\n    protected $table = '${t}';\n\n    /**\n     * å¯æ‰¹é‡èµ‹å€¼çš„å±æ€§\n     */\n    protected $fillable = [\n${this.currentTable.fields.filter((e=>!["id","created_at","updated_at"].includes(e.name))).map((e=>`        '${e.name}',`)).join("\n")}\n    ];\n\n    /**\n     * å±æ€§ç±»å‹è½¬æ¢\n     */\n    protected $casts = [\n${this.currentTable.fields.map((e=>this.getCastType(e))).filter(Boolean).map((e=>`        ${e},`)).join("\n")}\n    ];\n\n    ${this.includeTimestamps?"":"/**\n     * ç¦ç”¨æ—¶é—´æˆ³\n     */\n    public $timestamps = false;"}\n}`}:{filename:`${e}.php`,content:`<?php\n\nnamespace app\\model;\n\nuse think\\Model;\n${this.includeSoftDeletes?"use think\\model\\concern\\SoftDelete;":""}\n\n/**\n * ${e} æ¨¡å‹\n */\nclass ${e} extends Model\n{\n${this.includeSoftDeletes?"    use SoftDelete;\n":""}\n    /**\n     * æ•°æ®è¡¨åç§°\n     */\n    protected $name = '${t}';\n\n    /**\n     * è‡ªåŠ¨å†™å…¥æ—¶é—´æˆ³å­—æ®µ\n     */\n    protected $autoWriteTimestamp = ${this.includeTimestamps?"true":"false"};\n\n    /**\n     * å­—æ®µç±»å‹è½¬æ¢\n     */\n    protected $type = [\n${this.currentTable.fields.map((e=>this.getThinkPhpType(e))).filter(Boolean).map((e=>`        ${e},`)).join("\n")}\n    ];\n}`}},generateController(){const e=this.toPascalCase(this.currentTable.name),t=e,n=this.toCamelCase(this.currentTable.name);return"laravel"===this.selectedFramework?{filename:`${e}Controller.php`,content:`<?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Models\\${t};\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Http\\JsonResponse;\n\n/**\n * ${e} æ§åˆ¶å™¨\n */\nclass ${e}Controller extends Controller\n{\n    /**\n     * æ˜¾ç¤ºèµ„æºåˆ—è¡¨\n     */\n    public function index(Request $request): JsonResponse\n    {\n        $query = ${t}::query();\n        \n        // åˆ†é¡µæŸ¥è¯¢\n        $${n}s = $query->paginate($request->get('per_page', 15));\n        \n        return response()->json([\n            'code' => 200,\n            'message' => 'è·å–æˆåŠŸ',\n            'data' => $${n}s\n        ]);\n    }\n\n    /**\n     * åˆ›å»ºæ–°èµ„æº\n     */\n    public function store(Request $request): JsonResponse\n    {\n        $data = $request->validate([\n${this.currentTable.fields.filter((e=>!["id","created_at","updated_at"].includes(e.name))).map((e=>`            '${e.name}' => '${this.getValidationRule(e)}',`)).join("\n")}\n        ]);\n\n        $${n} = ${t}::create($data);\n\n        return response()->json([\n            'code' => 201,\n            'message' => 'åˆ›å»ºæˆåŠŸ',\n            'data' => $${n}\n        ]);\n    }\n\n    /**\n     * æ˜¾ç¤ºæŒ‡å®šèµ„æº\n     */\n    public function show(${t} $${n}): JsonResponse\n    {\n        return response()->json([\n            'code' => 200,\n            'message' => 'è·å–æˆåŠŸ',\n            'data' => $${n}\n        ]);\n    }\n\n    /**\n     * æ›´æ–°æŒ‡å®šèµ„æº\n     */\n    public function update(Request $request, ${t} $${n}): JsonResponse\n    {\n        $data = $request->validate([\n${this.currentTable.fields.filter((e=>!["id","created_at","updated_at"].includes(e.name))).map((e=>`            '${e.name}' => '${this.getValidationRule(e)}',`)).join("\n")}\n        ]);\n\n        $${n}->update($data);\n\n        return response()->json([\n            'code' => 200,\n            'message' => 'æ›´æ–°æˆåŠŸ',\n            'data' => $${n}\n        ]);\n    }\n\n    /**\n     * åˆ é™¤æŒ‡å®šèµ„æº\n     */\n    public function destroy(${t} $${n}): JsonResponse\n    {\n        $${n}->delete();\n\n        return response()->json([\n            'code' => 200,\n            'message' => 'åˆ é™¤æˆåŠŸ'\n        ]);\n    }\n}`}:{filename:`${e}.php`,content:`<?php\n\nnamespace app\\controller;\n\nuse app\\model\\${t};\nuse think\\Request;\nuse think\\Response;\n\n/**\n * ${e} æ§åˆ¶å™¨\n */\nclass ${e}\n{\n    /**\n     * æ˜¾ç¤ºèµ„æºåˆ—è¡¨\n     */\n    public function index(Request $request): Response\n    {\n        $page = $request->param('page', 1);\n        $limit = $request->param('limit', 15);\n        \n        $list = ${t}::paginate([\n            'list_rows' => $limit,\n            'page' => $page\n        ]);\n        \n        return json([\n            'code' => 200,\n            'message' => 'è·å–æˆåŠŸ',\n            'data' => $list\n        ]);\n    }\n\n    /**\n     * åˆ›å»ºæ–°èµ„æº\n     */\n    public function save(Request $request): Response\n    {\n        $data = $request->only([\n${this.currentTable.fields.filter((e=>!["id","created_at","updated_at"].includes(e.name))).map((e=>`            '${e.name}',`)).join("\n")}\n        ]);\n\n        $${n} = ${t}::create($data);\n\n        return json([\n            'code' => 201,\n            'message' => 'åˆ›å»ºæˆåŠŸ',\n            'data' => $${n}\n        ]);\n    }\n\n    /**\n     * æ˜¾ç¤ºæŒ‡å®šèµ„æº\n     */\n    public function read($id): Response\n    {\n        $${n} = ${t}::find($id);\n        \n        if (!$${n}) {\n            return json(['code' => 404, 'message' => 'èµ„æºä¸å­˜åœ¨']);\n        }\n\n        return json([\n            'code' => 200,\n            'message' => 'è·å–æˆåŠŸ',\n            'data' => $${n}\n        ]);\n    }\n\n    /**\n     * æ›´æ–°æŒ‡å®šèµ„æº\n     */\n    public function update(Request $request, $id): Response\n    {\n        $${n} = ${t}::find($id);\n        \n        if (!$${n}) {\n            return json(['code' => 404, 'message' => 'èµ„æºä¸å­˜åœ¨']);\n        }\n\n        $data = $request->only([\n${this.currentTable.fields.filter((e=>!["id","created_at","updated_at"].includes(e.name))).map((e=>`            '${e.name}',`)).join("\n")}\n        ]);\n\n        $${n}->save($data);\n\n        return json([\n            'code' => 200,\n            'message' => 'æ›´æ–°æˆåŠŸ',\n            'data' => $${n}\n        ]);\n    }\n\n    /**\n     * åˆ é™¤æŒ‡å®šèµ„æº\n     */\n    public function delete($id): Response\n    {\n        $${n} = ${t}::find($id);\n        \n        if (!$${n}) {\n            return json(['code' => 404, 'message' => 'èµ„æºä¸å­˜åœ¨']);\n        }\n\n        $${n}->delete();\n\n        return json([\n            'code' => 200,\n            'message' => 'åˆ é™¤æˆåŠŸ'\n        ]);\n    }\n}`}},generateMigration(){const e=this.currentTable.name;return{filename:`create_${e}_table.php`,content:`<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\n/**\n * åˆ›å»º ${e} è¡¨\n */\nreturn new class extends Migration\n{\n    /**\n     * è¿è¡Œè¿ç§»\n     */\n    public function up(): void\n    {\n        Schema::create('${e}', function (Blueprint $table) {\n${this.currentTable.fields.map((e=>this.getMigrationField(e))).join("\n")}\n        });\n    }\n\n    /**\n     * å›æ»šè¿ç§»\n     */\n    public function down(): void\n    {\n        Schema::dropIfExists('${e}');\n    }\n};`}},generateRequest(){const e=this.toPascalCase(this.currentTable.name);return{filename:`${e}Request.php`,content:`<?php\n\nnamespace App\\Http\\Requests;\n\nuse Illuminate\\Foundation\\Http\\FormRequest;\n\n/**\n * ${e} è¡¨å•éªŒè¯\n */\nclass ${e}Request extends FormRequest\n{\n    /**\n     * ç¡®å®šç”¨æˆ·æ˜¯å¦æœ‰æƒé™è¿›è¡Œæ­¤è¯·æ±‚\n     */\n    public function authorize(): bool\n    {\n        return true;\n    }\n\n    /**\n     * è·å–é€‚ç”¨äºè¯·æ±‚çš„éªŒè¯è§„åˆ™\n     */\n    public function rules(): array\n    {\n        return [\n${this.currentTable.fields.filter((e=>!["id","created_at","updated_at"].includes(e.name))).map((e=>`            '${e.name}' => '${this.getValidationRule(e)}',`)).join("\n")}\n        ];\n    }\n\n    /**\n     * è·å–éªŒè¯é”™è¯¯çš„è‡ªå®šä¹‰å±æ€§\n     */\n    public function attributes(): array\n    {\n        return [\n${this.currentTable.fields.filter((e=>!["id","created_at","updated_at"].includes(e.name))).map((e=>`            '${e.name}' => '${e.comment||e.name}',`)).join("\n")}\n        ];\n    }\n}`}},toPascalCase(e){return e.replace(/(^|_)([a-z])/g,((e,t,n)=>n.toUpperCase()))},toCamelCase(e){const t=this.toPascalCase(e);return t.charAt(0).toLowerCase()+t.slice(1)},getPhpType(e){return e.includes("int")?"int":e.includes("varchar")||e.includes("text")?"string":e.includes("decimal")||e.includes("float")?"float":e.includes("timestamp")||e.includes("datetime")?"string":"mixed"},getCastType(e){return e.type.includes("int")?`'${e.name}' => 'integer'`:e.type.includes("decimal")||e.type.includes("float")?`'${e.name}' => 'float'`:e.type.includes("json")?`'${e.name}' => 'array'`:e.type.includes("timestamp")||e.type.includes("datetime")?`'${e.name}' => 'datetime'`:null},getThinkPhpType(e){return e.type.includes("int")?`'${e.name}' => 'integer'`:e.type.includes("decimal")||e.type.includes("float")?`'${e.name}' => 'float'`:e.type.includes("json")?`'${e.name}' => 'json'`:e.type.includes("timestamp")||e.type.includes("datetime")?`'${e.name}' => 'timestamp'`:null},getValidationRule(e){let t=[];if(e.nullable||t.push("required"),e.type.includes("varchar")){const n=e.type.match(/varchar\((\d+)\)/);n&&t.push(`max:${n[1]}`)}return e.name.includes("email")&&t.push("email"),e.type.includes("int")&&t.push("integer"),t.join("|")||"nullable"},getMigrationField(e){let t="            $table->";if("id"===e.name&&e.type.includes("int"))t+="id()";else if(e.type.includes("varchar")){const n=e.type.match(/varchar\((\d+)\)/),a=n?n[1]:"255";t+=`string('${e.name}', ${a})`}else if(e.type.includes("text"))t+=`text('${e.name}')`;else if(e.type.includes("int"))t+=`integer('${e.name}')`;else if(e.type.includes("timestamp")){if("created_at"===e.name||"updated_at"===e.name)return"            $table->timestamps();";t+=`timestamp('${e.name}')`}else t+=`string('${e.name}')`;return e.nullable&&(t+="->nullable()"),e.default&&"NULL"!==e.default&&(t+=`->default('${e.default}')`),e.comment&&(t+=`->comment('${e.comment}')`),t+=";",t},async copyCode(e){const t=this.generatedCode[e];try{const e=await i.V.copyText(t.content);e?this.$message.success(`${t.filename} ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿`):this.$message.error("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶")}catch(n){this.$message.error("å¤åˆ¶å¤±è´¥: "+n.message)}},downloadAllCode(){this.generatedCode.forEach((e=>{l.A.downloadText(e.content,e.filename)})),this.$message.success("å¼€å§‹ä¸‹è½½æ‰€æœ‰æ–‡ä»¶")}}},r=o,c=n(81656),d=(0,c.A)(r,a,s,!1,null,"2e7301d6",null),u=d.exports},46834:function(e,t,n){n.d(t,{V:function(){return a}});n(16280);class a{static async copyText(e){try{if("string"!==typeof e)throw new Error("å¤åˆ¶çš„å†…å®¹å¿…é¡»æ˜¯å­—ç¬¦ä¸²");if(""===e.trim())throw new Error("å¤åˆ¶çš„å†…å®¹ä¸èƒ½ä¸ºç©º");return navigator.clipboard&&window.isSecureContext?(await navigator.clipboard.writeText(e),!0):this.fallbackCopyText(e)}catch(t){return console.error("å¤åˆ¶æ–‡æœ¬å¤±è´¥:",t),!1}}static fallbackCopyText(e){let t=null;try{t=document.createElement("textarea"),t.value=e,t.style.position="fixed",t.style.left="-9999px",t.style.top="-9999px",t.style.opacity="0",t.style.pointerEvents="none",document.body.appendChild(t),t.focus(),t.select(),t.setSelectionRange(0,e.length);const n=document.execCommand("copy");return n}catch(n){return console.error("å…¼å®¹æ¨¡å¼å¤åˆ¶å¤±è´¥:",n),!1}finally{t&&t.parentNode&&document.body.removeChild(t)}}static async copyImage(e){try{if(!navigator.clipboard||!navigator.clipboard.write)throw new Error("æµè§ˆå™¨ä¸æ”¯æŒå›¾ç‰‡å¤åˆ¶åŠŸèƒ½");let t;if(e instanceof Blob)t=e;else if(e instanceof HTMLCanvasElement)t=await this.canvasToBlob(e);else{if("string"!==typeof e)throw new Error("ä¸æ”¯æŒçš„å›¾ç‰‡æºç±»å‹");t=await this.dataURLToBlob(e)}const n=new ClipboardItem({[t.type]:t});return await navigator.clipboard.write([n]),!0}catch(t){return console.error("å¤åˆ¶å›¾ç‰‡å¤±è´¥:",t),!1}}static canvasToBlob(e,t="image/png",n=1){return new Promise((a=>{e.toBlob(a,t,n)}))}static async dataURLToBlob(e){try{const t=await fetch(e);return await t.blob()}catch(t){throw console.error("DataURLè½¬Blobå¤±è´¥:",t),t}}static async readText(){try{if(navigator.clipboard&&navigator.clipboard.readText)return await navigator.clipboard.readText();throw new Error("æµè§ˆå™¨ä¸æ”¯æŒè¯»å–å‰ªè´´æ¿")}catch(e){throw console.error("è¯»å–å‰ªè´´æ¿å¤±è´¥:",e),e}}static async readImage(){try{if(!navigator.clipboard||!navigator.clipboard.read)throw new Error("æµè§ˆå™¨ä¸æ”¯æŒè¯»å–å‰ªè´´æ¿å›¾ç‰‡");const e=await navigator.clipboard.read();for(const t of e)for(const e of t.types)if(e.startsWith("image/"))return await t.getType(e);throw new Error("å‰ªè´´æ¿ä¸­æ²¡æœ‰å›¾ç‰‡")}catch(e){throw console.error("è¯»å–å‰ªè´´æ¿å›¾ç‰‡å¤±è´¥:",e),e}}static checkSupport(){return{writeText:!(!navigator.clipboard||!navigator.clipboard.writeText),readText:!(!navigator.clipboard||!navigator.clipboard.readText),writeImage:!(!navigator.clipboard||!navigator.clipboard.write),readImage:!(!navigator.clipboard||!navigator.clipboard.read),isSecureContext:window.isSecureContext}}static async copyLines(e){const t=Array.isArray(e)?e.join("\n"):String(e);return await this.copyText(t)}static async copyJSON(e,t=2){try{const n=JSON.stringify(e,null,t);return await this.copyText(n)}catch(n){return console.error("å¤åˆ¶JSONå¤±è´¥:",n),!1}}static async copyTable(e,t=null){try{let n="";return t&&t.length>0&&(n+=t.join("\t")+"\n"),e.forEach((e=>{if(Array.isArray(e))n+=e.join("\t")+"\n";else if("object"===typeof e){const a=t?t.map((t=>e[t]||"")):Object.values(e);n+=a.join("\t")+"\n"}})),await this.copyText(n.trim())}catch(n){return console.error("å¤åˆ¶è¡¨æ ¼å¤±è´¥:",n),!1}}}},95866:function(e,t,n){n(16280),n(14603),n(47566),n(98721);class a{static downloadText(e,t,n="text/plain"){const a=new Blob([e],{type:n});this.downloadBlob(a,t)}static downloadJSON(e,t="data.json"){const n=JSON.stringify(e,null,2);this.downloadText(n,t,"application/json")}static downloadCSV(e,t="data.csv",n=null){let a="";n&&n.length>0&&(a+=n.join(",")+"\n"),e.forEach((e=>{if(Array.isArray(e))a+=e.map((e=>`"${e}"`)).join(",")+"\n";else if("object"===typeof e){const t=n?n.map((t=>e[t]||"")):Object.values(e);a+=t.map((e=>`"${e}"`)).join(",")+"\n"}}));const s="\ufeff";this.downloadText(s+a,t,"text/csv;charset=utf-8")}static downloadImage(e,t="image.png"){const n=document.createElement("a");n.download=t,n.href=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}static downloadCanvas(e,t="canvas.png",n="image/png",a=1){const s=e.toDataURL(n,a);this.downloadImage(s,t)}static downloadBlob(e,t){const n=URL.createObjectURL(e),a=document.createElement("a");a.href=n,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n)}static downloadURL(e,t){const n=document.createElement("a");n.href=e,n.download=t,n.target="_blank",document.body.appendChild(n),n.click(),document.body.removeChild(n)}static async downloadZip(e,t="files.zip"){const a=(await n.e(4813).then(n.t.bind(n,44813,23))).default,s=new a;e.forEach((e=>{e.content,Blob,s.file(e.name,e.content)}));try{const e=await s.generateAsync({type:"blob"});return this.downloadBlob(e,t),!0}catch(i){return console.error("ç”ŸæˆZIPæ–‡ä»¶å¤±è´¥:",i),!1}}static async fetchBlob(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.blob()}catch(t){throw console.error("è·å–æ–‡ä»¶å¤±è´¥:",t),t}}static generateTimestampFilename(e,t){const n=(new Date).toISOString().replace(/[:.]/g,"-").slice(0,-5);return`${e}_${n}.${t}`}static formatFileSize(e){if(0===e)return"0 Bytes";const t=1024,n=["Bytes","KB","MB","GB","TB"],a=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,a)).toFixed(2))+" "+n[a]}}t.A=a}}]);