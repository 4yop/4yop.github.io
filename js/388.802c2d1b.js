"use strict";(self["webpackChunkweb_tool_vue"]=self["webpackChunkweb_tool_vue"]||[]).push([[388],{10388:function(t,e,o){o.r(e),o.d(e,{default:function(){return f}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"icon-generator-container"},[t._m(0),e("div",{staticClass:"main-content"},[e("el-card",{staticClass:"upload-card"},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("上传图片")])]),e("el-upload",{staticClass:"upload-dragger",staticStyle:{height:"auto !important"},attrs:{drag:"","show-file-list":!1,"before-upload":t.handleFileUpload,accept:"image/*"}},[t.originalImage?e("div",{staticClass:"preview-content"},[e("img",{staticClass:"preview-image",attrs:{src:t.originalImage,alt:"预览图"}}),e("div",{staticClass:"upload-overlay"},[e("i",{staticClass:"el-icon-upload2"}),e("p",[t._v("点击重新上传")])])]):e("div",{staticClass:"upload-content"},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"el-upload__text"},[t._v("将图片拖到此处，或"),e("em",[t._v("点击上传")])]),e("div",{staticClass:"el-upload__tip"},[t._v("支持 JPG、PNG、GIF、WebP 等格式")])])])],1),t.originalImage?e("el-card",{staticClass:"config-card"},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("图标配置")])]),e("el-form",{attrs:{model:t.config,"label-width":"120px"}},[e("el-form-item",{attrs:{label:"图标格式"}},[e("el-checkbox-group",{model:{value:t.config.formats,callback:function(e){t.$set(t.config,"formats",e)},expression:"config.formats"}},[e("el-checkbox",{attrs:{label:"ico"}},[t._v("ICO (Windows)")]),e("el-checkbox",{attrs:{label:"icns"}},[t._v("ICNS (macOS)")])],1)],1),e("el-form-item",{attrs:{label:"图标尺寸"}},[e("div",{staticClass:"size-options"},[e("el-checkbox-group",{model:{value:t.config.sizes,callback:function(e){t.$set(t.config,"sizes",e)},expression:"config.sizes"}},t._l(t.availableSizes,(function(o){return e("el-checkbox",{key:o,attrs:{label:o}},[t._v(" "+t._s(o)+"×"+t._s(o)+" ")])})),1)],1)]),e("el-form-item",{attrs:{label:"背景处理"}},[e("el-radio-group",{model:{value:t.config.background,callback:function(e){t.$set(t.config,"background",e)},expression:"config.background"}},[e("el-radio",{attrs:{label:"transparent"}},[t._v("保持透明")]),e("el-radio",{attrs:{label:"white"}},[t._v("白色背景")]),e("el-radio",{attrs:{label:"black"}},[t._v("黑色背景")]),e("el-radio",{attrs:{label:"custom"}},[t._v("自定义颜色")])],1),"custom"===t.config.background?e("el-color-picker",{staticStyle:{"margin-left":"10px"},model:{value:t.config.customColor,callback:function(e){t.$set(t.config,"customColor",e)},expression:"config.customColor"}}):t._e()],1),e("el-form-item",{attrs:{label:"图片质量"}},[e("el-slider",{attrs:{min:.1,max:1,step:.1,"show-tooltip":"","format-tooltip":t.formatQuality},model:{value:t.config.quality,callback:function(e){t.$set(t.config,"quality",e)},expression:"config.quality"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary",loading:t.generating,disabled:0===t.config.formats.length||0===t.config.sizes.length},on:{click:t.generateIcons}},[e("i",{staticClass:"el-icon-magic-stick"}),t._v(" "+t._s(t.generating?"生成中...":"生成图标")+" ")])],1)],1)],1):t._e(),t.generatedIcons.length>0?e("el-card",{staticClass:"preview-card"},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("生成预览")]),e("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",loading:t.downloading},on:{click:t.downloadAll}},[e("i",{staticClass:"el-icon-download"}),t._v(" "+t._s(t.downloading?"打包中...":"打包下载")+" ")])],1),e("div",{staticClass:"icons-grid"},t._l(t.generatedIcons,(function(o){return e("div",{key:`${o.format}-${o.size}`,staticClass:"icon-item"},[e("div",{staticClass:"icon-preview"},[e("img",{attrs:{src:o.dataUrl,alt:`${o.format} ${o.size}x${o.size}`}})]),e("div",{staticClass:"icon-info"},[e("p",{staticClass:"icon-name"},[t._v(t._s(o.format.toUpperCase()))]),e("p",{staticClass:"icon-size"},[t._v(t._s(o.size)+"×"+t._s(o.size))]),e("p",{staticClass:"icon-file-size"},[t._v(t._s(t.formatFileSize(o.size)))])]),e("div",{staticClass:"icon-actions"},[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.downloadSingle(o)}}},[e("i",{staticClass:"el-icon-download"})])],1)])})),0)]):t._e(),e("el-card",{staticClass:"help-card"},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("使用说明")])]),e("div",{staticClass:"help-content"},[e("h4",[t._v("支持的格式")]),e("ul",[e("li",[e("strong",[t._v("ICO")]),t._v(": Windows 系统图标格式，支持多尺寸")]),e("li",[e("strong",[t._v("ICNS")]),t._v(": macOS 系统图标格式，支持 Retina 显示")])]),e("h4",[t._v("推荐尺寸")]),e("ul",[e("li",[e("strong",[t._v("Windows ICO")]),t._v(": 16×16, 32×32, 48×48, 64×64, 128×128, 256×256")]),e("li",[e("strong",[t._v("macOS ICNS")]),t._v(": 16×16, 32×32, 64×64, 128×128, 256×256, 512×512, 1024×1024")])]),e("h4",[t._v("使用建议")]),e("ul",[e("li",[t._v("建议使用正方形、高分辨率的原图")]),e("li",[t._v("图标设计应简洁明了，避免过多细节")]),e("li",[t._v("透明背景适合大多数应用场景")]),e("li",[t._v("生成的图标可直接用于软件开发")])])])])],1)])},n=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-header"},[e("h1",[t._v("图片转软件图标")]),e("p",{staticClass:"page-description"},[t._v(" 将图片转换为软件图标格式（ICO、ICNS），支持多种尺寸，一键打包下载 ")])])}],i=(o(44114),o(95866)),s=o(75912);o(72712),o(16573),o(78100),o(77936),o(48140),o(21903),o(91134),o(28845),o(37467),o(44732),o(79577),o(64979);class r{static async canvasToICO(t,e=[16,32,48]){const o=[];for(const a of e){const e=this.resizeCanvas(t,a,a),n=e.getContext("2d").getImageData(0,0,a,a);o.push({width:a,height:a,data:n.data})}return this.createICOBlob(o)}static resizeCanvas(t,e,o){const a=document.createElement("canvas"),n=a.getContext("2d");return a.width=e,a.height=o,n.imageSmoothingEnabled=!0,n.imageSmoothingQuality="high",n.drawImage(t,0,0,e,o),a}static createICOBlob(t){const e=new ArrayBuffer(6),o=new DataView(e);o.setUint16(0,0,!0),o.setUint16(2,1,!0),o.setUint16(4,t.length,!0);const a=16*t.length,n=new ArrayBuffer(a),i=new DataView(n);let s=6+a;const r=[];t.forEach(((t,e)=>{const o=this.createBMPData(t);r.push(o);const a=16*e;i.setUint8(a+0,256===t.width?0:t.width),i.setUint8(a+1,256===t.height?0:t.height),i.setUint8(a+2,0),i.setUint8(a+3,0),i.setUint16(a+4,1,!0),i.setUint16(a+6,32,!0),i.setUint32(a+8,o.byteLength,!0),i.setUint32(a+12,s,!0),s+=o.byteLength}));const c=6+a+r.reduce(((t,e)=>t+e.byteLength),0),l=new Uint8Array(c);let d=0;return l.set(new Uint8Array(e),d),d+=e.byteLength,l.set(new Uint8Array(n),d),d+=n.byteLength,r.forEach((t=>{l.set(new Uint8Array(t),d),d+=t.byteLength})),new Blob([l],{type:"image/x-icon"})}static createBMPData(t){const{width:e,height:o,data:a}=t,n=4*Math.floor((32*e+31)/32),i=n*o,s=4*Math.floor((e+31)/32)*o,r=40+i+s,c=new ArrayBuffer(r),l=new DataView(c);l.setUint32(0,40,!0),l.setInt32(4,e,!0),l.setInt32(8,2*o,!0),l.setUint16(12,1,!0),l.setUint16(14,32,!0),l.setUint32(16,0,!0),l.setUint32(20,i+s,!0),l.setUint32(24,0,!0),l.setUint32(28,0,!0),l.setUint32(32,0,!0),l.setUint32(36,0,!0);let d=40;for(let h=o-1;h>=0;h--){for(let t=0;t<e;t++){const o=4*(h*e+t);l.setUint8(d++,a[o+2]),l.setUint8(d++,a[o+1]),l.setUint8(d++,a[o+0]),l.setUint8(d++,a[o+3])}while(d%4!==0)l.setUint8(d++,0)}const g=4*Math.floor((e+31)/32);for(let h=o-1;h>=0;h--)for(let t=0;t<g;t++)l.setUint8(d++,0);return c}static async canvasToICNS(t,e=[16,32,64,128,256,512,1024]){const o=[];for(const a of e){const e=this.resizeCanvas(t,a,a),n=e.toDataURL("image/png"),i=await this.dataURLToBlob(n);o.push({size:a,data:await i.arrayBuffer()})}return this.createICNSBlob(o)}static createICNSBlob(t){const e=t.reduce(((t,e)=>e.size>t.size?e:t));return new Blob([e.data],{type:"image/png"})}static dataURLToBlob(t){return new Promise((e=>{const o=t.split(","),a=o[0].match(/:(.*?);/)[1],n=atob(o[1]);let i=n.length;const s=new Uint8Array(i);while(i--)s[i]=n.charCodeAt(i);e(new Blob([s],{type:a}))}))}static isValidIconSize(t){const e=[16,20,24,32,40,48,64,72,96,128,256,512,1024];return e.includes(t)}static getRecommendedSizes(t){return"ico"===t?[16,32,48,64,128,256]:"icns"===t?[16,32,64,128,256,512,1024]:[16,32,48,64,128,256]}}var c=r,l=o(44813),d=o.n(l),g={name:"IconGeneratorView",data(){return{originalImage:null,originalFile:null,generating:!1,downloading:!1,generatedIcons:[],config:{formats:["ico"],sizes:[16,32,48,64,128,256],background:"transparent",customColor:"#ffffff",quality:.9},availableSizes:[16,20,24,32,40,48,64,72,96,128,256,512,1024]}},mounted(){this.$nextTick((()=>{const t=document.querySelectorAll(".el-upload-dragger");t.forEach((t=>{t.style.height="auto",t.style.minHeight="200px"}))}))},methods:{handleFileUpload(t){this.originalFile=t;const e=new FileReader;return e.onload=t=>{this.originalImage=t.target.result},e.readAsDataURL(t),!1},formatQuality(t){return`${Math.round(100*t)}%`},formatFileSize(t){const e=t*t*4;return s.A.formatBytes(e)},async generateIcons(){if(this.originalImage){this.generating=!0,this.generatedIcons=[];try{const t=document.createElement("canvas"),e=t.getContext("2d"),o=new Image;await new Promise((t=>{o.onload=t,o.src=this.originalImage}));for(const a of this.config.formats)for(const n of this.config.sizes){const i=await this.generateSingleIcon(o,n,a,t,e);this.generatedIcons.push(i)}this.$message.success(`成功生成 ${this.generatedIcons.length} 个图标`)}catch(t){console.error("生成图标失败:",t),this.$message.error("生成图标失败: "+t.message)}finally{this.generating=!1}}},async generateSingleIcon(t,e,o,a,n){if(a.width=e,a.height=e,n.clearRect(0,0,e,e),"transparent"!==this.config.background){let t="#ffffff";switch(this.config.background){case"white":t="#ffffff";break;case"black":t="#000000";break;case"custom":t=this.config.customColor;break}n.fillStyle=t,n.fillRect(0,0,e,e)}const i=Math.min(e/t.width,e/t.height),s=t.width*i,r=t.height*i,l=(e-s)/2,d=(e-r)/2;let g,h;return n.drawImage(t,l,d,s,r),"ico"===o?(g=await c.canvasToICO(a,[e]),h=a.toDataURL("image/png",this.config.quality)):(h=a.toDataURL("image/png",this.config.quality),g=await c.dataURLToBlob(h)),{format:o,size:e,dataUrl:h,blob:g}},downloadSingle(t){let e="png";"ico"===t.format?e="ico":"icns"===t.format&&(e="icns");const o=`icon_${t.size}x${t.size}.${e}`;i.A.downloadBlob(t.blob,o)},async downloadAll(){if(0!==this.generatedIcons.length){this.downloading=!0;try{const t=new(d()),e={};this.generatedIcons.forEach((t=>{e[t.format]||(e[t.format]=[]),e[t.format].push(t)}));for(const[n,i]of Object.entries(e)){const e=t.folder(n.toUpperCase());for(const t of i){let o="png";"ico"===n?o="ico":"icns"===n&&(o="icns");const a=`icon_${t.size}x${t.size}.${o}`;e.file(a,t.blob)}}const o=await t.generateAsync({type:"blob"}),a=i.A.generateTimestampFilename("app_icons","zip");i.A.downloadBlob(o,a),this.$message.success("图标包下载成功")}catch(t){console.error("打包下载失败:",t),this.$message.error("打包下载失败: "+t.message)}finally{this.downloading=!1}}}}},h=g,m=o(81656),u=(0,m.A)(h,a,n,!1,null,null,null),f=u.exports},95866:function(t,e,o){o(16280),o(14603),o(47566),o(98721);class a{static downloadText(t,e,o="text/plain"){const a=new Blob([t],{type:o});this.downloadBlob(a,e)}static downloadJSON(t,e="data.json"){const o=JSON.stringify(t,null,2);this.downloadText(o,e,"application/json")}static downloadCSV(t,e="data.csv",o=null){let a="";o&&o.length>0&&(a+=o.join(",")+"\n"),t.forEach((t=>{if(Array.isArray(t))a+=t.map((t=>`"${t}"`)).join(",")+"\n";else if("object"===typeof t){const e=o?o.map((e=>t[e]||"")):Object.values(t);a+=e.map((t=>`"${t}"`)).join(",")+"\n"}}));const n="\ufeff";this.downloadText(n+a,e,"text/csv;charset=utf-8")}static downloadImage(t,e="image.png"){const o=document.createElement("a");o.download=e,o.href=t,document.body.appendChild(o),o.click(),document.body.removeChild(o)}static downloadCanvas(t,e="canvas.png",o="image/png",a=1){const n=t.toDataURL(o,a);this.downloadImage(n,e)}static downloadBlob(t,e){const o=URL.createObjectURL(t),a=document.createElement("a");a.href=o,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}static downloadURL(t,e){const o=document.createElement("a");o.href=t,o.download=e,o.target="_blank",document.body.appendChild(o),o.click(),document.body.removeChild(o)}static async downloadZip(t,e="files.zip"){const a=(await o.e(4813).then(o.t.bind(o,44813,23))).default,n=new a;t.forEach((t=>{t.content,Blob,n.file(t.name,t.content)}));try{const t=await n.generateAsync({type:"blob"});return this.downloadBlob(t,e),!0}catch(i){return console.error("生成ZIP文件失败:",i),!1}}static async fetchBlob(t){try{const e=await fetch(t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.blob()}catch(e){throw console.error("获取文件失败:",e),e}}static generateTimestampFilename(t,e){const o=(new Date).toISOString().replace(/[:.]/g,"-").slice(0,-5);return`${t}_${o}.${e}`}static formatFileSize(t){if(0===t)return"0 Bytes";const e=1024,o=["Bytes","KB","MB","GB","TB"],a=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,a)).toFixed(2))+" "+o[a]}}e.A=a},75912:function(t,e,o){o(16280),o(14603),o(47566),o(98721);var a=o(44813),n=o.n(a);class i{static formatBytes(t){if(0===t)return"0 Bytes";const e=1024,o=["Bytes","KB","MB","GB","TB"],a=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,a)).toFixed(2))+" "+o[a]}static getFileExtension(t){return t.slice(2+(t.lastIndexOf(".")-1>>>0))}static getExt(t){return t.split(".").pop().toLowerCase()}static getFileNameWithoutExtension(t){return t.replace(/\.[^/.]+$/,"")}static getBaseName(t){const e=-1===t.lastIndexOf(".")?t:t.substring(0,t.lastIndexOf("."));return e}static isImageFile(t){const e=["jpg","jpeg","png","gif","bmp","webp","svg"],o=this.getFileExtension(t).toLowerCase();return e.includes(o)}static isVideoFile(t){const e=["mp4","avi","mov","wmv","flv","webm","mkv"],o=this.getFileExtension(t).toLowerCase();return e.includes(o)}static isAudioFile(t){const e=["mp3","wav","flac","aac","ogg","wma"],o=this.getFileExtension(t).toLowerCase();return e.includes(o)}static isDocumentFile(t){const e=["pdf","doc","docx","xls","xlsx","ppt","pptx","txt"],o=this.getFileExtension(t).toLowerCase();return e.includes(o)}static generateUniqueFileName(t){const e=Date.now(),o=Math.random().toString(36).substring(2,8),a=this.getFileExtension(t),n=this.getFileNameWithoutExtension(t);return`${n}_${e}_${o}.${a}`}static fileToBase64(t){return new Promise(((e,o)=>{const a=new FileReader;a.readAsDataURL(t),a.onload=()=>e(a.result),a.onerror=t=>o(t)}))}static downloadFile(t,e){const o=document.createElement("a");o.href=t,o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o)}static blobToFile(t,e){return new File([t],e,{type:t.type})}static fileToBlob(t){return t instanceof Blob?t:new Blob([t],{type:t.type})}static isBlob(t){return t instanceof Blob}static async getBlobByUrl(t){if(i.isBlob(t))return t;try{const e=await fetch(t);if(!e.ok)throw new Error("Network response was not ok: "+e.statusText);return await e.blob()}catch(e){throw console.error("Error fetching the blob:",e),e}}static async download(t,e){let o=null;o=i.isBlob(t)?t:await i.getBlobByUrl(t);const a=URL.createObjectURL(o),n=document.createElement("a");n.href=a,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a)}static async downloadAsZip(t,e=(new Date).getTime()+".zip",o="file_url",a="save_name"){const s=new(n());for(const n of t){const t=await i.getBlobByUrl(n[o]);s.file(n[a],t)}try{const t=await s.generateAsync({type:"blob"});await i.download(t,e)}catch(r){console.error("Error while generating zip:",r)}}static compressImage(t,e=.8,o=1920,a=1080){return new Promise((n=>{const i=document.createElement("canvas"),s=i.getContext("2d"),r=new Image;r.onload=()=>{let{width:c,height:l}=r;c>o&&(l=l*o/c,c=o),l>a&&(c=c*a/l,l=a),i.width=c,i.height=l,s.drawImage(r,0,0,c,l),i.toBlob((e=>{const o=new File([e],t.name,{type:t.type,lastModified:Date.now()});n(o)}),t.type,e)},r.src=URL.createObjectURL(t)}))}}e.A=i},90679:function(t,e,o){var a=o(1625),n=TypeError;t.exports=function(t,e){if(a(e,t))return t;throw new n("Incorrect invocation")}},55002:function(t){t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},64979:function(t,e,o){var a=o(46518),n=o(44576),i=o(97751),s=o(6980),r=o(24913).f,c=o(39297),l=o(90679),d=o(23167),g=o(32603),h=o(55002),m=o(16193),u=o(43724),f=o(96395),p="DOMException",w=i("Error"),b=i(p),v=function(){l(this,_);var t=arguments.length,e=g(t<1?void 0:arguments[0]),o=g(t<2?void 0:arguments[1],"Error"),a=new b(e,o),n=new w(e);return n.name=p,r(a,"stack",s(1,m(n.stack,1))),d(a,this,v),a},_=v.prototype=b.prototype,E="stack"in new w(p),y="stack"in new b(1,2),C=b&&u&&Object.getOwnPropertyDescriptor(n,p),I=!!C&&!(C.writable&&C.configurable),R=E&&!I&&!y;a({global:!0,constructor:!0,forced:f||R},{DOMException:R?v:b});var U=i(p),A=U.prototype;if(A.constructor!==U)for(var x in f||r(A,"constructor",s(1,U)),h)if(c(h,x)){var B=h[x],S=B.s;c(U,S)||r(U,S,s(6,B.c))}}}]);
//# sourceMappingURL=388.802c2d1b.js.map