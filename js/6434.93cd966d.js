"use strict";(self["webpackChunkweb_tool_vue"]=self["webpackChunkweb_tool_vue"]||[]).push([[6434],{86434:function(e,t,s){s.r(t),s.d(t,{default:function(){return h}});var l=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"resource-extractor"},[t("el-card",{staticClass:"input-card",attrs:{shadow:"hover"}},[t("h2",[e._v("HTML 资源提取工具")]),t("div",{staticClass:"desc-area"},[t("el-popover",{attrs:{placement:"bottom",title:"操作步骤：1. F12 打开 Elements 面板； 2. 右键点击 <html> 标签； 3. 选择 Copy outerHTML 即可。",width:"320",trigger:"click","popper-class":"html-copy-popover"}},[t("el-button",{staticClass:"guide-link",attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v(" [获取源码指南] "),t("i",{staticClass:"el-icon-question"})])],1)],1),t("div",{staticClass:"settings-area"},[t("el-checkbox-group",{staticClass:"type-checkboxes",model:{value:e.resourceTypes,callback:function(t){e.resourceTypes=t},expression:"resourceTypes"}},[t("el-checkbox",{attrs:{label:"image"}},[e._v("图片 (IMG)")]),t("el-checkbox",{attrs:{label:"video"}},[e._v("视频 (Video/Source)")]),t("el-checkbox",{attrs:{label:"script"}},[e._v("JS 脚本 (Script)")]),t("el-checkbox",{attrs:{label:"style"}},[e._v("CSS 样式 (Link/Style)")])],1),t("el-input",{staticClass:"html-textarea",attrs:{type:"textarea",rows:10,placeholder:"请粘贴 HTML 源码..."},model:{value:e.inputHtml,callback:function(t){e.inputHtml=t},expression:"inputHtml"}}),t("el-button",{staticClass:"analyze-button",attrs:{type:"primary",loading:e.loading,disabled:!e.inputHtml.trim()},on:{click:e.analyzeHtml}},[e._v(" "+e._s(e.loading?"解析中...":"开始解析")+" ")])],1)]),e.resourceList.length>0?t("el-card",{staticClass:"list-card",attrs:{shadow:"hover"}},[t("h3",[e._v("解析结果 (共 "+e._s(e.resourceList.length)+" 个资源)")]),t("div",{staticClass:"list-actions"},[t("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v(" 全选/反选 (已选 "+e._s(e.selectedResources.length)+") ")]),t("el-button",{attrs:{type:"success",size:"small",disabled:0===e.selectedResources.length},on:{click:e.batchDownload}},[e._v(" 打包下载选中项 ("+e._s(e.selectedResources.length)+") ")])],1),t("el-table",{staticClass:"resource-table",staticStyle:{width:"100%"},attrs:{data:e.resourceList,"header-cell-style":{background:"#f5f7fa",color:"#606266"}}},[t("el-table-column",{attrs:{width:"40"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-checkbox",{model:{value:s.row.selected,callback:function(t){e.$set(s.row,"selected",t)},expression:"scope.row.selected"}})]}}],null,!1,1785335365)}),t("el-table-column",{attrs:{label:"预览/文件名",width:"120"},scopedSlots:e._u([{key:"default",fn:function(s){return["image"===s.row.type?t("div",{staticClass:"preview-box"},[t("img",{staticClass:"preview-img",attrs:{src:s.row.url,alt:"预览"},on:{error:function(e){s.row.url="/path/to/placeholder.png"}}})]):t("span",[e._v(e._s(s.row.filename||"链接资源"))])]}}],null,!1,3150050159)}),t("el-table-column",{attrs:{label:"类型",width:"80"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-tag",{attrs:{size:"small"}},[e._v(e._s(e.typeMap[s.row.type]||s.row.type))])]}}],null,!1,1708744488)}),t("el-table-column",{attrs:{label:"资源链接","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.url)+" ")]}}],null,!1,1844302230)}),t("el-table-column",{attrs:{label:"操作",width:"100",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{attrs:{type:"text",size:"small",loading:s.row.downloading},on:{click:function(t){return e.downloadFile(s.row)}}},[e._v(" 下载 ")])]}}],null,!1,1048162525)})],1)],1):e._e(),e.showEmpty?t("el-card",{staticClass:"list-card",attrs:{shadow:"hover"}},[t("el-empty",{attrs:{description:"未检测到匹配的资源，请检查粘贴的 HTML 源码或解析设置。"}})],1):e._e()],1)},r=[],o=(s(16280),s(44114),s(17642),s(58004),s(33853),s(45876),s(32475),s(15024),s(31698),s(14603),s(47566),s(98721),s(66848)),a=s(44813),i=s.n(a),c=(0,o.defineComponent)({name:"ResourceExtractor",metaInfo:{title:"HTML 资源提取器 | 网页素材链接分析与下载工具",meta:[{name:"description",content:"专业的 HTML 源码资源提取工具。粘贴 F12 复制的 HTML 代码，一键解析并分类提取所有 JS、CSS、图片、视频等静态资源链接，支持选择性下载。"},{name:"keywords",content:"HTML 资源提取, 网页资源下载, 静态文件分析, CSS 链接提取, JavaScript 提取, 网页素材获取, 链接解析工具"}]},data(){return{inputHtml:"",loading:!1,resourceTypes:["image","video"],resourceList:[],checkAll:!1,isIndeterminate:!1,showEmpty:!1,typeMap:{image:"图片",video:"视频",script:"脚本",style:"样式"}}},computed:{selectedResources(){return this.resourceList.filter((e=>e.selected))}},watch:{resourceList:{handler(e){if(0===e.length)return this.checkAll=!1,void(this.isIndeterminate=!1);const t=e.filter((e=>e.selected)).length;this.checkAll=t===e.length,this.isIndeterminate=t>0&&t<e.length,this.showEmpty=0===e.length&&!this.loading},deep:!0}},methods:{analyzeHtml(){if(!this.inputHtml.trim())return;this.loading=!0,this.resourceList=[],this.showEmpty=!1;const e=new DOMParser,t=e.parseFromString(this.inputHtml,"text/html"),s=[],l=this.getBaseUrl(t);this.resourceTypes.includes("image")&&t.querySelectorAll("img").forEach((e=>{const t=e.getAttribute("src")||e.getAttribute("data-src");t&&s.push(this.formatResource(t,"image",l))})),this.resourceTypes.includes("video")&&t.querySelectorAll("video, source").forEach((e=>{const t=e.getAttribute("src");if(t){const e=t.endsWith(".mp4")||t.includes("video")?"video":"media";s.push(this.formatResource(t,e,l))}})),this.resourceTypes.includes("script")&&t.querySelectorAll("script").forEach((e=>{const t=e.getAttribute("src");t&&s.push(this.formatResource(t,"script",l))})),this.resourceTypes.includes("style")&&t.querySelectorAll('link[rel="stylesheet"]').forEach((e=>{const t=e.getAttribute("href");t&&s.push(this.formatResource(t,"style",l))}));const r=[...new Set(s.map((e=>e.url)))];this.resourceList=r.map((e=>{const t=s.find((t=>t.url===e));return{...t,selected:!0,downloading:!1,progress:0}})),this.loading=!1},getBaseUrl(e){const t=e.querySelector("base");return t&&t.getAttribute("href")?t.getAttribute("href"):""},formatResource(e,t,s){let l=e.startsWith("http")?e:s+e;return{url:l,type:t,filename:l.substring(l.lastIndexOf("/")+1)||"resource"}},async batchDownload(){if(0===this.selectedResources.length)return;const e=new(i());let t=this.selectedResources.length,s=0;this.loading=!0,this.$notify({title:"开始打包",message:`正在获取 ${t} 个资源，请勿关闭页面...`,type:"info",duration:3e3});const l=this.selectedResources.map((async t=>{t.downloading=!0;try{const l=await fetch(t.url,{mode:"cors"});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);const r=await l.blob();let o=t.filename||`${t.type}_${Date.now()}`;const a=e.file(o);a&&(o=`${s}_${o}`),e.file(o,r),s++}catch(l){console.error(`下载文件失败: ${t.url}`,l),this.$message.error(`文件 ${t.filename} 获取失败（跨域或网络错误）。`)}finally{t.downloading=!1}}));try{await Promise.all(l),this.$notify({title:"压缩中...",message:"文件已获取完毕，正在生成 ZIP 压缩包...",type:"success",duration:1500});const t=await e.generateAsync({type:"blob"}),s=window.URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download=`web_resources_${Date.now()}.zip`,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(s),r.remove(),this.$message.success("ZIP 文件下载已开始！")}catch(r){this.$message.error("打包或下载 ZIP 文件时发生错误。"),console.error("ZIP Error:",r)}finally{this.loading=!1}},downloadFile(e,t=!0){e.url&&(e.downloading=!0,fetch(e.url,{mode:"cors"}).then((e=>e.blob())).then((s=>{const l=window.URL.createObjectURL(s),r=document.createElement("a");r.href=l,r.download=e.filename||"downloaded_file",document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(l),r.remove(),t&&this.$message.success(`文件 ${e.filename} 开始下载!`)})).catch((e=>{console.error("Download failed:",e),this.$message.error("下载失败：跨域或网络错误。")})).finally((()=>{e.downloading=!1})))},handleCheckAllChange(e){this.resourceList.forEach((t=>{t.selected=e})),this.isIndeterminate=!1}}}),n=c,u=s(81656),d=(0,u.A)(n,l,r,!1,null,"29a1b526",null),h=d.exports}}]);
//# sourceMappingURL=6434.93cd966d.js.map