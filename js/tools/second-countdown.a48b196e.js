(function(){"use strict";var t={61067:function(t,e,n){var i=n(66848),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("h1",[t._v("秒级倒计时显示工具")]),e("div",{staticClass:"form"},[e("label",{staticStyle:{color:"#000"}},[t._v("目标日期:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.timeInput,expression:"timeInput"}],attrs:{id:"timeInput",type:"datetime-local"},domProps:{value:t.timeInput},on:{input:function(e){e.target.composing||(t.timeInput=e.target.value)}}}),e("button",{on:{click:function(e){return t.start()}}},[t._v("开始")])]),e("canvas",{ref:"canvas",staticStyle:{display:"none"},attrs:{id:"canvas",width:"300",height:"120"}}),e("video",{ref:"video",attrs:{id:"video",muted:"",autoplay:"",playsinline:"",controls:"","webkit-playsinline":""},domProps:{muted:!0}}),t._m(0)])},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"desc"},[t._v(" 输入目标时间后，即可显示精确到秒的倒计时。"),e("br"),t._v(" 适合活动抢购、秒杀、开售等场景，支持 iOS 浏览器浮窗。 ")])}],o={data(){return{STORAGE_KEY:"countdown_target_time",timeInput:"",targetTime:null,timer:null,ctx:null}},created(){},mounted(){this.$nextTick((()=>{const{canvas:t,video:e}=this.$refs;t&&e?(this.ctx=t.getContext("2d"),e.srcObject=t.captureStream(30),e.play(),this.targetTime=this.initDefaultTime(),this.start()):console.error("canvas 或 video ref 不存在",this.$refs)}))},methods:{start(){this.timeInput?(this.targetTime=new Date(this.timeInput).getTime(),this.timer&&clearInterval(this.timer),this.draw(),this.timer=setInterval((()=>{this.draw()}),200)):alert("请先选择目标时间")},draw(){if(!this.targetTime)return;const t=Math.floor((this.targetTime-Date.now())/1e3);this.ctx.clearRect(0,0,this.$refs.canvas.width,this.$refs.canvas.height),this.ctx.fillStyle="#000",this.ctx.fillRect(0,0,this.$refs.canvas.width,this.$refs.canvas.height),this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillStyle="#aaa",this.ctx.font="18px monospace",this.ctx.fillText(this.formatTarget(this.targetTime),this.$refs.canvas.width/2,this.$refs.canvas.height/2-28),this.ctx.fillStyle="#fff",this.ctx.font="56px monospace",this.ctx.fillText(t+" s",this.$refs.canvas.width/2,this.$refs.canvas.height/2+20)},formatTarget(t){const e=new Date(t),n=t=>String(t).padStart(2,"0");return e.getFullYear()+"-"+n(e.getMonth()+1)+"-"+n(e.getDate())+" "+n(e.getHours())+":"+n(e.getMinutes())+":"+n(e.getSeconds())},initDefaultTime(){const t=Date.now();let e=null;const n=localStorage.getItem(this.STORAGE_KEY);if(n){const i=Number(n);!isNaN(i)&&i>t&&(e=i)}return e||(e=t+6e5),this.timeInput=this.toInputValue(new Date(e)),e},toInputValue(t){return t.getFullYear()+"-"+this.pad(t.getMonth()+1)+"-"+this.pad(t.getDate())+"T"+this.pad(t.getHours())+":"+this.pad(t.getMinutes())},pad(t){return String(t).padStart(2,"0")}}},s=o,u=n(81656),c=(0,u.A)(s,r,a,!1,null,null,null),l=c.exports;i["default"].config.productionTip=!1,new i["default"]({render:t=>t(l),mounted(){document.dispatchEvent(new Event("render-event"))}}).$mount("#app")}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var a=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=t,function(){n.amdD=function(){throw new Error("define cannot be used indirect")}}(),function(){n.amdO={}}(),function(){var t=[];n.O=function(e,i,r,a){if(!i){var o=1/0;for(l=0;l<t.length;l++){i=t[l][0],r=t[l][1],a=t[l][2];for(var s=!0,u=0;u<i.length;u++)(!1&a||o>=a)&&Object.keys(n.O).every((function(t){return n.O[t](i[u])}))?i.splice(u--,1):(s=!1,a<o&&(o=a));if(s){t.splice(l--,1);var c=r();void 0!==c&&(e=c)}}return e}a=a||0;for(var l=t.length;l>0&&t[l-1][2]>a;l--)t[l]=t[l-1];t[l]=[i,r,a]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){n.j=8700}(),function(){var t={8700:0};n.O.j=function(e){return 0===t[e]};var e=function(e,i){var r,a,o=i[0],s=i[1],u=i[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(u)var l=u(n)}for(e&&e(i);c<o.length;c++)a=o[c],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(l)},i=self["webpackChunkweb_tool_vue"]=self["webpackChunkweb_tool_vue"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=n.O(void 0,[504],(function(){return n(61067)}));i=n.O(i)})();