(function(){"use strict";var e={53755:function(e,t,n){var a=n(66848),s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modern-bg"},[t("el-row",{attrs:{gutter:0,justify:"center"}},[t("el-col",{attrs:{xs:{span:24,offset:0},sm:{span:22,offset:1},md:{span:18,offset:3},lg:{span:14,offset:5},xl:{span:12,offset:6}}},[t("el-card",{staticClass:"modern-card",attrs:{shadow:"hover"}},[t("div",{staticClass:"page-header"},[t("h1",{staticClass:"modern-title"},[e._v("âš™ï¸ å¢åˆ æ”¹æŸ¥ç”Ÿæˆå™¨")]),t("p",{staticClass:"page-description"},[e._v("æ ¹æ®MySQLè¡¨ç»“æ„ç”ŸæˆPHPæ¡†æ¶çš„Modelå’ŒControllerä»£ç ")])]),t("div",{staticClass:"generator-container"},[t("div",{staticClass:"framework-selection"},[t("h3",[e._v("é€‰æ‹©PHPæ¡†æ¶")]),t("div",{staticClass:"framework-tabs"},e._l(e.frameworks,(function(n){return t("div",{key:n.id,staticClass:"framework-tab",class:{active:e.selectedFramework===n.id},on:{click:function(t){return e.selectFramework(n.id)}}},[t("div",{staticClass:"framework-icon"},[e._v(e._s(n.icon))]),t("div",{staticClass:"framework-name"},[e._v(e._s(n.name))]),t("div",{staticClass:"framework-desc"},[e._v(e._s(n.description))])])})),0)]),t("div",{staticClass:"table-structure-section"},[t("h3",[e._v("è¾“å…¥è¡¨ç»“æ„")]),t("div",{staticClass:"input-methods"},[t("el-radio-group",{model:{value:e.inputMethod,callback:function(t){e.inputMethod=t},expression:"inputMethod"}},[t("el-radio",{attrs:{label:"manual"}},[e._v("æ‰‹åŠ¨è¾“å…¥")]),t("el-radio",{attrs:{label:"upload"}},[e._v("ä¸Šä¼ SQLæ–‡ä»¶")])],1)],1),"manual"===e.inputMethod?t("div",{staticClass:"manual-input"},[t("div",{staticClass:"table-info"},[t("el-input",{staticClass:"table-name-input",attrs:{placeholder:"è¯·è¾“å…¥è¡¨åï¼Œå¦‚ï¼šusers"},model:{value:e.tableName,callback:function(t){e.tableName=t},expression:"tableName"}},[t("template",{slot:"prepend"},[e._v("è¡¨å")])],2)],1),t("div",{staticClass:"sql-input"},[t("el-input",{attrs:{type:"textarea",rows:12,placeholder:"è¯·è¾“å…¥CREATE TABLEè¯­å¥æˆ–å­—æ®µå®šä¹‰ï¼Œä¾‹å¦‚ï¼š\nCREATE TABLE `users` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `name` varchar(255) NOT NULL COMMENT 'ç”¨æˆ·å',\n  `email` varchar(255) NOT NULL COMMENT 'é‚®ç®±',\n  `password` varchar(255) NOT NULL COMMENT 'å¯†ç ',\n  `created_at` timestamp NULL DEFAULT NULL,\n  `updated_at` timestamp NULL DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;"},model:{value:e.sqlStructure,callback:function(t){e.sqlStructure=t},expression:"sqlStructure"}})],1)]):e._e(),"upload"===e.inputMethod?t("div",{staticClass:"file-upload"},[t("el-upload",{staticClass:"upload-area",attrs:{drag:"","before-upload":e.handleFileUpload,"show-file-list":!1,accept:".sql,.txt"}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("å°†SQLæ–‡ä»¶æ‹–åˆ°æ­¤å¤„ï¼Œæˆ–"),t("em",[e._v("ç‚¹å‡»ä¸Šä¼ ")])]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("åªèƒ½ä¸Šä¼ .sql/.txtæ–‡ä»¶")])])],1):e._e()]),"manual"===e.inputMethod&&e.sqlStructure||e.uploadedContent?t("div",{staticClass:"parse-section"},[t("el-button",{attrs:{type:"primary",loading:e.parsing},on:{click:e.parseTableStructure}},[e._v(" "+e._s(e.parsing?"è§£æä¸­...":"è§£æè¡¨ç»“æ„")+" ")])],1):e._e(),e.parsedTables.length>0?t("div",{staticClass:"parsed-fields"},[t("h3",[e._v("è§£æç»“æœ")]),e.parsedTables.length>1?t("div",{staticClass:"table-selection"},[t("h4",[e._v("ğŸ—‚ï¸ æ£€æµ‹åˆ°å¤šä¸ªè¡¨ï¼Œè¯·é€‰æ‹©è¦ç”Ÿæˆä»£ç çš„è¡¨")]),t("div",{staticClass:"table-stats"},[t("el-tag",{attrs:{type:"info",size:"small"}},[e._v(" å…±è§£æåˆ° "+e._s(e.parsedTables.length)+" ä¸ªè¡¨ ")])],1),t("el-select",{staticStyle:{width:"100%","max-width":"400px"},attrs:{placeholder:"è¯·é€‰æ‹©è¡¨"},on:{change:e.onTableChange},model:{value:e.selectedTableIndex,callback:function(t){e.selectedTableIndex=t},expression:"selectedTableIndex"}},e._l(e.parsedTables,(function(n,a){return t("el-option",{key:a,attrs:{label:`${n.name} (${n.fields.length}ä¸ªå­—æ®µ)`,value:a}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(n.name))]),t("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(n.fields.length)+"ä¸ªå­—æ®µ")])])})),1)],1):e._e(),t("div",{staticClass:"table-info-display"},[t("div",{staticClass:"info-item"},[t("span",{staticClass:"label"},[e._v("è¡¨å:")]),t("span",{staticClass:"value"},[e._v(e._s(e.currentTable.name))])]),t("div",{staticClass:"info-item"},[t("span",{staticClass:"label"},[e._v("å­—æ®µæ•°:")]),t("span",{staticClass:"value"},[e._v(e._s(e.currentTable.fields.length))])])]),t("div",{staticClass:"fields-table"},[t("el-table",{attrs:{data:e.currentTable.fields,border:""}},[t("el-table-column",{attrs:{prop:"name",label:"å­—æ®µå",width:"150"}}),t("el-table-column",{attrs:{prop:"type",label:"ç±»å‹",width:"120"}}),t("el-table-column",{attrs:{prop:"nullable",label:"å¯ç©º",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.nullable?"æ˜¯":"å¦")+" ")]}}],null,!1,369317280)}),t("el-table-column",{attrs:{prop:"default",label:"é»˜è®¤å€¼",width:"100"}}),t("el-table-column",{attrs:{prop:"comment",label:"æ³¨é‡Š"}})],1)],1)]):e._e(),e.parsedTables.length>0?t("div",{staticClass:"generation-options"},[t("h3",[e._v("ç”Ÿæˆé€‰é¡¹")]),t("div",{staticClass:"options-grid"},[t("el-checkbox-group",{model:{value:e.generateOptions,callback:function(t){e.generateOptions=t},expression:"generateOptions"}},[t("el-checkbox",{attrs:{label:"model"}},[e._v("Modelæ¨¡å‹")]),t("el-checkbox",{attrs:{label:"controller"}},[e._v("Controlleræ§åˆ¶å™¨")]),t("el-checkbox",{attrs:{label:"migration"}},[e._v("æ•°æ®åº“è¿ç§»")]),t("el-checkbox",{attrs:{label:"request"}},[e._v("è¡¨å•éªŒè¯")])],1)],1),t("div",{staticClass:"additional-options"},[t("el-checkbox",{model:{value:e.includeTimestamps,callback:function(t){e.includeTimestamps=t},expression:"includeTimestamps"}},[e._v("åŒ…å«æ—¶é—´æˆ³å­—æ®µ")]),t("el-checkbox",{model:{value:e.includeSoftDeletes,callback:function(t){e.includeSoftDeletes=t},expression:"includeSoftDeletes"}},[e._v("åŒ…å«è½¯åˆ é™¤")]),t("el-checkbox",{model:{value:e.generateComments,callback:function(t){e.generateComments=t},expression:"generateComments"}},[e._v("ç”Ÿæˆè¯¦ç»†æ³¨é‡Š")])],1)]):e._e(),e.parsedTables.length>0&&e.generateOptions.length>0?t("div",{staticClass:"generate-section"},[t("el-button",{attrs:{type:"success",size:"large",loading:e.generating},on:{click:e.generateCode}},[e._v(" "+e._s(e.generating?"ç”Ÿæˆä¸­...":"ç”Ÿæˆä»£ç ")+" ")])],1):e._e(),e.generatedCode.length>0?t("div",{staticClass:"generated-code"},[t("h3",[e._v("ç”Ÿæˆçš„ä»£ç ")]),t("div",{staticClass:"code-tabs"},e._l(e.generatedCode,(function(n,a){return t("div",{key:a,staticClass:"code-tab",class:{active:e.activeCodeTab===a},on:{click:function(t){e.activeCodeTab=a}}},[e._v(" "+e._s(n.filename)+" ")])})),0),t("div",{staticClass:"code-content"},[t("div",{staticClass:"code-header"},[t("span",{staticClass:"filename"},[e._v(e._s(e.generatedCode[e.activeCodeTab].filename))]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.copyCode(e.activeCodeTab)}}},[t("i",{staticClass:"el-icon-copy-document"}),e._v(" å¤åˆ¶ä»£ç  ")])],1),t("pre",{staticClass:"code-block"},[t("code",[e._v(e._s(e.generatedCode[e.activeCodeTab].content))])])]),t("div",{staticClass:"download-section"},[t("el-button",{attrs:{type:"primary"},on:{click:e.downloadAllCode}},[t("i",{staticClass:"el-icon-download"}),e._v(" ä¸‹è½½æ‰€æœ‰æ–‡ä»¶ ")])],1)]):e._e(),t("div",{staticClass:"usage-guide"},[t("h3",[e._v("ä½¿ç”¨è¯´æ˜")]),t("div",{staticClass:"guide-content"},[t("div",{staticClass:"guide-section"},[t("h4",[e._v("æ”¯æŒçš„æ¡†æ¶")]),t("ul",[t("li",[t("strong",[e._v("Laravel")]),e._v("ï¼šç”ŸæˆEloquentæ¨¡å‹å’Œèµ„æºæ§åˆ¶å™¨")]),t("li",[t("strong",[e._v("ThinkPHP")]),e._v("ï¼šç”Ÿæˆæ¨¡å‹å’Œæ§åˆ¶å™¨ä»£ç ")])])]),t("div",{staticClass:"guide-section"},[t("h4",[e._v("ä½¿ç”¨æ­¥éª¤")]),t("ol",[t("li",[e._v("é€‰æ‹©è¦ä½¿ç”¨çš„PHPæ¡†æ¶")]),t("li",[e._v("è¾“å…¥MySQLè¡¨ç»“æ„æˆ–ä¸Šä¼ SQLæ–‡ä»¶")]),t("li",[e._v('ç‚¹å‡»"è§£æè¡¨ç»“æ„"åˆ†æå­—æ®µä¿¡æ¯')]),t("li",[e._v("é€‰æ‹©è¦ç”Ÿæˆçš„ä»£ç ç±»å‹")]),t("li",[e._v('ç‚¹å‡»"ç”Ÿæˆä»£ç "è·å–ç»“æœ')])])]),t("div",{staticClass:"guide-section"},[t("h4",[e._v("ç”Ÿæˆå†…å®¹")]),t("ul",[t("li",[t("strong",[e._v("Model")]),e._v("ï¼šåŒ…å«å­—æ®µæ³¨é‡Šã€ç±»å‹è½¬æ¢ã€å…³è”å…³ç³»")]),t("li",[t("strong",[e._v("Controller")]),e._v("ï¼šåŒ…å«å¢åˆ æ”¹æŸ¥çš„å®Œæ•´æ–¹æ³•")]),t("li",[t("strong",[e._v("Migration")]),e._v("ï¼šæ•°æ®åº“è¿ç§»æ–‡ä»¶")]),t("li",[t("strong",[e._v("Request")]),e._v("ï¼šè¡¨å•éªŒè¯è§„åˆ™")])])])])])])])],1)],1)],1)},i=[],l=(n(44114),n(72712),n(46834)),r=n(95866),o={name:"CrudGeneratorView",metaInfo:{title:"CRUD å¢åˆ æ”¹æŸ¥ä»£ç ç”Ÿæˆå™¨ - MySQLè¡¨ç»“æ„ä¸€é”®ç”Ÿæˆ PHP Model/Controller | æå‡å¼€å‘æ•ˆç‡",meta:[{name:"description",content:"å…è´¹åœ¨çº¿ CRUD ä»£ç ç”Ÿæˆå™¨ï¼Œä¸“ä¸º PHP å¼€å‘è€…è®¾è®¡ã€‚æ ¹æ®ä¸Šä¼ çš„ MySQL è¡¨ç»“æ„ï¼Œè‡ªåŠ¨ç”Ÿæˆæ ‡å‡†çš„ Model å’Œ Controller å¢åˆ æ”¹æŸ¥ä»£ç ï¼Œå¿«é€Ÿå®ç°å‰åç«¯åˆ†ç¦»æ¥å£æˆ–åå°ç®¡ç†åŠŸèƒ½ã€‚"},{name:"keywords",content:"CRUD ç”Ÿæˆå™¨, å¢åˆ æ”¹æŸ¥ä»£ç ç”Ÿæˆ, MySQL ç”Ÿæˆ PHP ä»£ç , Model Controller è‡ªåŠ¨ç”Ÿæˆ, PHP ä»£ç ç”Ÿæˆ, è‡ªåŠ¨åŒ–å¼€å‘å·¥å…·, æå‡æ•ˆç‡"}]},data(){return{selectedFramework:"laravel",inputMethod:"manual",tableName:"",sqlStructure:"",uploadedContent:"",parsing:!1,generating:!1,parsedTables:[],selectedTableIndex:0,generateOptions:["model","controller"],includeTimestamps:!0,includeSoftDeletes:!1,generateComments:!0,generatedCode:[],activeCodeTab:0,frameworks:[{id:"laravel",name:"Laravel",icon:"ğŸ”¥",description:"Eloquent ORM + èµ„æºæ§åˆ¶å™¨"},{id:"thinkphp",name:"ThinkPHP",icon:"âš¡",description:"ThinkPHPæ¨¡å‹ + æ§åˆ¶å™¨"}]}},computed:{currentTable(){return this.parsedTables[this.selectedTableIndex]||{name:"",fields:[]}}},methods:{selectFramework(e){this.selectedFramework=e,this.generatedCode=[]},onTableChange(){this.generatedCode=[]},handleFileUpload(e){const t=new FileReader;return t.onload=e=>{this.uploadedContent=e.target.result,this.sqlStructure=this.uploadedContent},t.readAsText(e),!1},async parseTableStructure(){this.parsing=!0;try{await new Promise((e=>setTimeout(e,1e3)));const e=this.sqlStructure||this.uploadedContent;this.parsedTables=this.extractTables(e),this.selectedTableIndex=0,1===this.parsedTables.length?this.$message.success(`è¡¨ç»“æ„è§£æå®Œæˆï¼Œè§£æåˆ°è¡¨ "${this.parsedTables[0].name}"ï¼ŒåŒ…å« ${this.parsedTables[0].fields.length} ä¸ªå­—æ®µ`):this.$message.success(`è¡¨ç»“æ„è§£æå®Œæˆï¼Œå…±è§£æåˆ° ${this.parsedTables.length} ä¸ªè¡¨ï¼Œæ€»è®¡ ${this.parsedTables.reduce(((e,t)=>e+t.fields.length),0)} ä¸ªå­—æ®µ`)}catch(e){this.$message.error("è§£æå¤±è´¥ï¼Œè¯·æ£€æŸ¥SQLè¯­æ³•")}finally{this.parsing=!1}},extractTables(e){const t=[],n=/CREATE\s+TABLE\s+(?:IF\s+NOT\s+EXISTS\s+)?`?(\w+)`?\s*\(([\s\S]*?)\)\s*(?:ENGINE\s*=\s*\w+)?(?:\s*DEFAULT\s+CHARSET\s*=\s*\w+)?(?:\s*COLLATE\s*=\s*[\w_]+)?(?:\s*COMMENT\s*=\s*'[^']*')?;/gi;let a;while(null!==(a=n.exec(e))){const e=a[1],n=a[2],s=this.extractFieldsFromContent(n);s.length>0&&t.push({name:e,fields:s})}if(0===t.length){const n=this.extractTableName(e)||"example_table",a=this.extractFields(e);a.length>0&&t.push({name:n,fields:a})}return t.length>0?t:[{name:"example_table",fields:this.getMockFields()}]},extractTableName(e){const t=e.match(/CREATE\s+TABLE\s+(?:IF\s+NOT\s+EXISTS\s+)?`?(\w+)`?/i);return t?t[1]:this.tableName||"example_table"},extractFieldsFromContent(e){const t=[],n=e.split("\n");for(const a of n){const e=a.trim();if(e.startsWith("--")||e.startsWith("/*")||e.startsWith("PRIMARY KEY")||e.startsWith("KEY")||e.startsWith("INDEX")||e.startsWith("UNIQUE")||e.startsWith("FOREIGN KEY")||e.startsWith("CONSTRAINT")||""===e||","===e||")"===e)continue;const n=e.match(/^`?(\w+)`?\s+(\w+(?:\(\d+(?:,\d+)?\))?)\s*(.*?)(?:,\s*)?$/i);if(n){const[,e,a,s]=n,i=!s.toUpperCase().includes("NOT NULL"),l=s.toUpperCase().includes("AUTO_INCREMENT"),r=this.extractDefault(s),o=this.extractComment(s);t.push({name:e,type:a.toLowerCase(),nullable:i,autoIncrement:l,default:r,comment:o||e})}}return t},extractFields(e){const t=[],n=e.split("\n");for(const a of n){const e=a.trim();if(e.startsWith("`")&&e.includes("`")){const n=e.match(/`(\w+)`\s+(\w+(?:\(\d+\))?)\s*(.*)/i);if(n){const[,e,a,s]=n;t.push({name:e,type:a,nullable:!s.includes("NOT NULL"),default:this.extractDefault(s),comment:this.extractComment(s)})}}}return t.length>0?t:this.getMockFields()},extractDefault(e){const t=e.match(/DEFAULT\s+([^,\s]+)/i);return t?t[1].replace(/['"]/g,""):""},extractComment(e){const t=e.match(/COMMENT\s+['"](.*?)['"]/i);return t?t[1]:""},getMockFields(){return[{name:"id",type:"int(11)",nullable:!1,default:"",comment:"ä¸»é”®ID"},{name:"name",type:"varchar(255)",nullable:!1,default:"",comment:"åç§°"},{name:"email",type:"varchar(255)",nullable:!1,default:"",comment:"é‚®ç®±"},{name:"status",type:"tinyint(1)",nullable:!1,default:"1",comment:"çŠ¶æ€"},{name:"created_at",type:"timestamp",nullable:!0,default:"NULL",comment:"åˆ›å»ºæ—¶é—´"},{name:"updated_at",type:"timestamp",nullable:!0,default:"NULL",comment:"æ›´æ–°æ—¶é—´"}]},async generateCode(){this.generating=!0;try{await new Promise((e=>setTimeout(e,1500))),this.generatedCode=[],this.generateOptions.includes("model")&&this.generatedCode.push(this.generateModel()),this.generateOptions.includes("controller")&&this.generatedCode.push(this.generateController()),this.generateOptions.includes("migration")&&this.generatedCode.push(this.generateMigration()),this.generateOptions.includes("request")&&this.generatedCode.push(this.generateRequest()),this.activeCodeTab=0,this.$message.success("ä»£ç ç”Ÿæˆå®Œæˆ")}catch(e){this.$message.error("ç”Ÿæˆå¤±è´¥ï¼Œè¯·é‡è¯•")}finally{this.generating=!1}},generateModel(){const e=this.toPascalCase(this.currentTable.name),t=this.currentTable.name;return"laravel"===this.selectedFramework?{filename:`${e}.php`,content:`<?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\n${this.includeSoftDeletes?"use Illuminate\\Database\\Eloquent\\SoftDeletes;":""}\n\n/**\n * ${e} æ¨¡å‹\n * \n * @property int $id\n${this.currentTable.fields.map((e=>` * @property ${this.getPhpType(e.type)} $${e.name} ${e.comment}`)).join("\n")}\n */\nclass ${e} extends Model\n{\n    use HasFactory${this.includeSoftDeletes?", SoftDeletes":""};\n\n    /**\n     * æ•°æ®è¡¨åç§°\n     */\n    protected $table = '${t}';\n\n    /**\n     * å¯æ‰¹é‡èµ‹å€¼çš„å±æ€§\n     */\n    protected $fillable = [\n${this.currentTable.fields.filter((e=>!["id","created_at","updated_at"].includes(e.name))).map((e=>`        '${e.name}',`)).join("\n")}\n    ];\n\n    /**\n     * å±æ€§ç±»å‹è½¬æ¢\n     */\n    protected $casts = [\n${this.currentTable.fields.map((e=>this.getCastType(e))).filter(Boolean).map((e=>`        ${e},`)).join("\n")}\n    ];\n\n    ${this.includeTimestamps?"":"/**\n     * ç¦ç”¨æ—¶é—´æˆ³\n     */\n    public $timestamps = false;"}\n}`}:{filename:`${e}.php`,content:`<?php\n\nnamespace app\\model;\n\nuse think\\Model;\n${this.includeSoftDeletes?"use think\\model\\concern\\SoftDelete;":""}\n\n/**\n * ${e} æ¨¡å‹\n */\nclass ${e} extends Model\n{\n${this.includeSoftDeletes?"    use SoftDelete;\n":""}\n    /**\n     * æ•°æ®è¡¨åç§°\n     */\n    protected $name = '${t}';\n\n    /**\n     * è‡ªåŠ¨å†™å…¥æ—¶é—´æˆ³å­—æ®µ\n     */\n    protected $autoWriteTimestamp = ${this.includeTimestamps?"true":"false"};\n\n    /**\n     * å­—æ®µç±»å‹è½¬æ¢\n     */\n    protected $type = [\n${this.currentTable.fields.map((e=>this.getThinkPhpType(e))).filter(Boolean).map((e=>`        ${e},`)).join("\n")}\n    ];\n}`}},generateController(){const e=this.toPascalCase(this.currentTable.name),t=e,n=this.toCamelCase(this.currentTable.name);return"laravel"===this.selectedFramework?{filename:`${e}Controller.php`,content:`<?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Models\\${t};\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Http\\JsonResponse;\n\n/**\n * ${e} æ§åˆ¶å™¨\n */\nclass ${e}Controller extends Controller\n{\n    /**\n     * æ˜¾ç¤ºèµ„æºåˆ—è¡¨\n     */\n    public function index(Request $request): JsonResponse\n    {\n        $query = ${t}::query();\n        \n        // åˆ†é¡µæŸ¥è¯¢\n        $${n}s = $query->paginate($request->get('per_page', 15));\n        \n        return response()->json([\n            'code' => 200,\n            'message' => 'è·å–æˆåŠŸ',\n            'data' => $${n}s\n        ]);\n    }\n\n    /**\n     * åˆ›å»ºæ–°èµ„æº\n     */\n    public function store(Request $request): JsonResponse\n    {\n        $data = $request->validate([\n${this.currentTable.fields.filter((e=>!["id","created_at","updated_at"].includes(e.name))).map((e=>`            '${e.name}' => '${this.getValidationRule(e)}',`)).join("\n")}\n        ]);\n\n        $${n} = ${t}::clickBtnEncrypt($data);\n\n        return response()->json([\n            'code' => 201,\n            'message' => 'åˆ›å»ºæˆåŠŸ',\n            'data' => $${n}\n        ]);\n    }\n\n    /**\n     * æ˜¾ç¤ºæŒ‡å®šèµ„æº\n     */\n    public function show(${t} $${n}): JsonResponse\n    {\n        return response()->json([\n            'code' => 200,\n            'message' => 'è·å–æˆåŠŸ',\n            'data' => $${n}\n        ]);\n    }\n\n    /**\n     * æ›´æ–°æŒ‡å®šèµ„æº\n     */\n    public function update(Request $request, ${t} $${n}): JsonResponse\n    {\n        $data = $request->validate([\n${this.currentTable.fields.filter((e=>!["id","created_at","updated_at"].includes(e.name))).map((e=>`            '${e.name}' => '${this.getValidationRule(e)}',`)).join("\n")}\n        ]);\n\n        $${n}->update($data);\n\n        return response()->json([\n            'code' => 200,\n            'message' => 'æ›´æ–°æˆåŠŸ',\n            'data' => $${n}\n        ]);\n    }\n\n    /**\n     * åˆ é™¤æŒ‡å®šèµ„æº\n     */\n    public function destroy(${t} $${n}): JsonResponse\n    {\n        $${n}->delete();\n\n        return response()->json([\n            'code' => 200,\n            'message' => 'åˆ é™¤æˆåŠŸ'\n        ]);\n    }\n}`}:{filename:`${e}.php`,content:`<?php\n\nnamespace app\\controller;\n\nuse app\\model\\${t};\nuse think\\Request;\nuse think\\Response;\n\n/**\n * ${e} æ§åˆ¶å™¨\n */\nclass ${e}\n{\n    /**\n     * æ˜¾ç¤ºèµ„æºåˆ—è¡¨\n     */\n    public function index(Request $request): Response\n    {\n        $page = $request->param('page', 1);\n        $limit = $request->param('limit', 15);\n        \n        $list = ${t}::paginate([\n            'list_rows' => $limit,\n            'page' => $page\n        ]);\n        \n        return json([\n            'code' => 200,\n            'message' => 'è·å–æˆåŠŸ',\n            'data' => $list\n        ]);\n    }\n\n    /**\n     * åˆ›å»ºæ–°èµ„æº\n     */\n    public function save(Request $request): Response\n    {\n        $data = $request->only([\n${this.currentTable.fields.filter((e=>!["id","created_at","updated_at"].includes(e.name))).map((e=>`            '${e.name}',`)).join("\n")}\n        ]);\n\n        $${n} = ${t}::clickBtnEncrypt($data);\n\n        return json([\n            'code' => 201,\n            'message' => 'åˆ›å»ºæˆåŠŸ',\n            'data' => $${n}\n        ]);\n    }\n\n    /**\n     * æ˜¾ç¤ºæŒ‡å®šèµ„æº\n     */\n    public function read($id): Response\n    {\n        $${n} = ${t}::find($id);\n        \n        if (!$${n}) {\n            return json(['code' => 404, 'message' => 'èµ„æºä¸å­˜åœ¨']);\n        }\n\n        return json([\n            'code' => 200,\n            'message' => 'è·å–æˆåŠŸ',\n            'data' => $${n}\n        ]);\n    }\n\n    /**\n     * æ›´æ–°æŒ‡å®šèµ„æº\n     */\n    public function update(Request $request, $id): Response\n    {\n        $${n} = ${t}::find($id);\n        \n        if (!$${n}) {\n            return json(['code' => 404, 'message' => 'èµ„æºä¸å­˜åœ¨']);\n        }\n\n        $data = $request->only([\n${this.currentTable.fields.filter((e=>!["id","created_at","updated_at"].includes(e.name))).map((e=>`            '${e.name}',`)).join("\n")}\n        ]);\n\n        $${n}->save($data);\n\n        return json([\n            'code' => 200,\n            'message' => 'æ›´æ–°æˆåŠŸ',\n            'data' => $${n}\n        ]);\n    }\n\n    /**\n     * åˆ é™¤æŒ‡å®šèµ„æº\n     */\n    public function delete($id): Response\n    {\n        $${n} = ${t}::find($id);\n        \n        if (!$${n}) {\n            return json(['code' => 404, 'message' => 'èµ„æºä¸å­˜åœ¨']);\n        }\n\n        $${n}->delete();\n\n        return json([\n            'code' => 200,\n            'message' => 'åˆ é™¤æˆåŠŸ'\n        ]);\n    }\n}`}},generateMigration(){const e=this.currentTable.name;return{filename:`create_${e}_table.php`,content:`<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\n/**\n * åˆ›å»º ${e} è¡¨\n */\nreturn new class extends Migration\n{\n    /**\n     * è¿è¡Œè¿ç§»\n     */\n    public function up(): void\n    {\n        Schema::clickBtnEncrypt('${e}', function (Blueprint $table) {\n${this.currentTable.fields.map((e=>this.getMigrationField(e))).join("\n")}\n        });\n    }\n\n    /**\n     * å›æ»šè¿ç§»\n     */\n    public function down(): void\n    {\n        Schema::dropIfExists('${e}');\n    }\n};`}},generateRequest(){const e=this.toPascalCase(this.currentTable.name);return{filename:`${e}Request.php`,content:`<?php\n\nnamespace App\\Http\\Requests;\n\nuse Illuminate\\Foundation\\Http\\FormRequest;\n\n/**\n * ${e} è¡¨å•éªŒè¯\n */\nclass ${e}Request extends FormRequest\n{\n    /**\n     * ç¡®å®šç”¨æˆ·æ˜¯å¦æœ‰æƒé™è¿›è¡Œæ­¤è¯·æ±‚\n     */\n    public function authorize(): bool\n    {\n        return true;\n    }\n\n    /**\n     * è·å–é€‚ç”¨äºè¯·æ±‚çš„éªŒè¯è§„åˆ™\n     */\n    public function rules(): array\n    {\n        return [\n${this.currentTable.fields.filter((e=>!["id","created_at","updated_at"].includes(e.name))).map((e=>`            '${e.name}' => '${this.getValidationRule(e)}',`)).join("\n")}\n        ];\n    }\n\n    /**\n     * è·å–éªŒè¯é”™è¯¯çš„è‡ªå®šä¹‰å±æ€§\n     */\n    public function attributes(): array\n    {\n        return [\n${this.currentTable.fields.filter((e=>!["id","created_at","updated_at"].includes(e.name))).map((e=>`            '${e.name}' => '${e.comment||e.name}',`)).join("\n")}\n        ];\n    }\n}`}},toPascalCase(e){return e.replace(/(^|_)([a-z])/g,((e,t,n)=>n.toUpperCase()))},toCamelCase(e){const t=this.toPascalCase(e);return t.charAt(0).toLowerCase()+t.slice(1)},getPhpType(e){return e.includes("int")?"int":e.includes("varchar")||e.includes("text")?"string":e.includes("decimal")||e.includes("float")?"float":e.includes("timestamp")||e.includes("datetime")?"string":"mixed"},getCastType(e){return e.type.includes("int")?`'${e.name}' => 'integer'`:e.type.includes("decimal")||e.type.includes("float")?`'${e.name}' => 'float'`:e.type.includes("json")?`'${e.name}' => 'array'`:e.type.includes("timestamp")||e.type.includes("datetime")?`'${e.name}' => 'datetime'`:null},getThinkPhpType(e){return e.type.includes("int")?`'${e.name}' => 'integer'`:e.type.includes("decimal")||e.type.includes("float")?`'${e.name}' => 'float'`:e.type.includes("json")?`'${e.name}' => 'json'`:e.type.includes("timestamp")||e.type.includes("datetime")?`'${e.name}' => 'timestamp'`:null},getValidationRule(e){let t=[];if(e.nullable||t.push("required"),e.type.includes("varchar")){const n=e.type.match(/varchar\((\d+)\)/);n&&t.push(`max:${n[1]}`)}return e.name.includes("email")&&t.push("email"),e.type.includes("int")&&t.push("integer"),t.join("|")||"nullable"},getMigrationField(e){let t="            $table->";if("id"===e.name&&e.type.includes("int"))t+="id()";else if(e.type.includes("varchar")){const n=e.type.match(/varchar\((\d+)\)/),a=n?n[1]:"255";t+=`string('${e.name}', ${a})`}else if(e.type.includes("text"))t+=`text('${e.name}')`;else if(e.type.includes("int"))t+=`integer('${e.name}')`;else if(e.type.includes("timestamp")){if("created_at"===e.name||"updated_at"===e.name)return"            $table->timestamps();";t+=`timestamp('${e.name}')`}else t+=`string('${e.name}')`;return e.nullable&&(t+="->nullable()"),e.default&&"NULL"!==e.default&&(t+=`->default('${e.default}')`),e.comment&&(t+=`->comment('${e.comment}')`),t+=";",t},async copyCode(e){const t=this.generatedCode[e];try{const e=await l.V.copyText(t.content);e?this.$message.success(`${t.filename} ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿`):this.$message.error("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶")}catch(n){this.$message.error("å¤åˆ¶å¤±è´¥: "+n.message)}},downloadAllCode(){this.generatedCode.forEach((e=>{r.A.downloadText(e.content,e.filename)})),this.$message.success("å¼€å§‹ä¸‹è½½æ‰€æœ‰æ–‡ä»¶")}}},c=o,u=n(81656),d=(0,u.A)(c,s,i,!1,null,"0fc731aa",null),p=d.exports,m=n(89143),f=n.n(m);a["default"].config.productionTip=!1,a["default"].use(f()),new a["default"]({render:e=>e(p),mounted(){document.dispatchEvent(new Event("render-event"))}}).$mount("#app")}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var i=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,function(){n.amdD=function(){throw new Error("define cannot be used indirect")}}(),function(){n.amdO={}}(),function(){var e=[];n.O=function(t,a,s,i){if(!a){var l=1/0;for(u=0;u<e.length;u++){a=e[u][0],s=e[u][1],i=e[u][2];for(var r=!0,o=0;o<a.length;o++)(!1&i||l>=i)&&Object.keys(n.O).every((function(e){return n.O[e](a[o])}))?a.splice(o--,1):(r=!1,i<l&&(l=i));if(r){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[a,s,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(a,s){if(1&s&&(a=this(a)),8&s)return a;if("object"===typeof a&&a){if(4&s&&a.__esModule)return a;if(16&s&&"function"===typeof a.then)return a}var i=Object.create(null);n.r(i);var l={};e=e||[null,t({}),t([]),t(t)];for(var r=2&s&&a;"object"==typeof r&&!~e.indexOf(r);r=t(r))Object.getOwnPropertyNames(r).forEach((function(e){l[e]=function(){return a[e]}}));return l["default"]=function(){return a},n.d(i,l),i}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,a){return n.f[a](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{2407:"98dca01c",9479:"fea5b1b8"}[e]+".js"}}(),function(){n.miniCssF=function(e){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="web-tool-vue:";n.l=function(a,s,i,l){if(e[a])e[a].push(s);else{var r,o;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==a||d.getAttribute("data-webpack")==t+i){r=d;break}}r||(o=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,n.nc&&r.setAttribute("nonce",n.nc),r.setAttribute("data-webpack",t+i),r.src=a),e[a]=[s];var p=function(t,n){r.onerror=r.onload=null,clearTimeout(m);var s=e[a];if(delete e[a],r.parentNode&&r.parentNode.removeChild(r),s&&s.forEach((function(e){return e(n)})),t)return t(n)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=p.bind(null,r.onerror),r.onload=p.bind(null,r.onload),o&&document.head.appendChild(r)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.j=1174}(),function(){n.p="/"}(),function(){var e={1174:0};n.f.j=function(t,a){var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)a.push(s[2]);else{var i=new Promise((function(n,a){s=e[t]=[n,a]}));a.push(s[2]=i);var l=n.p+n.u(t),r=new Error,o=function(a){if(n.o(e,t)&&(s=e[t],0!==s&&(e[t]=void 0),s)){var i=a&&("load"===a.type?"missing":a.type),l=a&&a.target&&a.target.src;r.message="Loading chunk "+t+" failed.\n("+i+": "+l+")",r.name="ChunkLoadError",r.type=i,r.request=l,s[1](r)}};n.l(l,o,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,i,l=a[0],r=a[1],o=a[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(s in r)n.o(r,s)&&(n.m[s]=r[s]);if(o)var u=o(n)}for(t&&t(a);c<l.length;c++)i=l[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},a=self["webpackChunkweb_tool_vue"]=self["webpackChunkweb_tool_vue"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[504,996],(function(){return n(53755)}));a=n.O(a)})();