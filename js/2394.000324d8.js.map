{"version":3,"file":"js/2394.000324d8.js","mappings":"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","sources":["webpack://web-tool-vue/./src/views/img/CompressView.vue","webpack://web-tool-vue/src/views/img/CompressView.vue","webpack://web-tool-vue/./src/views/img/CompressView.vue?1b3a","webpack://web-tool-vue/./src/views/img/CompressView.vue?f7e7","webpack://web-tool-vue/./src/util/DownloadUtil.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"modern-bg\"},[_c('el-row',{attrs:{\"gutter\":0,\"justify\":\"center\"}},[_c('el-col',{attrs:{\"xs\":{span: 22, offset: 1},\"sm\":{span: 20, offset: 2},\"md\":{span: 16, offset: 4},\"lg\":{span: 12, offset: 6},\"xl\":{span: 10, offset: 7}}},[_c('el-card',{staticClass:\"modern-card\",attrs:{\"shadow\":\"hover\"}},[_c('h2',{staticClass:\"modern-title\"},[_vm._v(\"图片压缩\")]),_c('el-divider'),_c('el-upload',{staticClass:\"modern-upload\",attrs:{\"auto-upload\":false,\"multiple\":true,\"action\":\"#\",\"list-type\":\"picture-card\",\"on-preview\":_vm.handlePictureCardPreview,\"on-remove\":_vm.handleRemove,\"on-change\":_vm.handleChange}},[_c('i',{staticClass:\"el-icon-plus\",attrs:{\"slot\":\"default\"},slot:\"default\"})]),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.dialogImageUrl,\"alt\":\"\"}})]),_c('div',{staticClass:\"block modern-slider-block\"},[_c('div',[_c('span',{staticClass:\"demonstration\"},[_vm._v(\"压缩率\")]),_c('el-slider',{staticClass:\"modern-slider\",attrs:{\"show-input\":\"\"},model:{value:(_vm.compressVal),callback:function ($$v) {_vm.compressVal=$$v},expression:\"compressVal\"}})],1),_c('div',[_c('span',{staticClass:\"demonstration\"},[_vm._v(\"保存格式\")]),_c('el-select',{staticStyle:{\"width\":\"180px\"},attrs:{\"placeholder\":\"请选择保存格式\"},model:{value:(_vm.saveFormat),callback:function ($$v) {_vm.saveFormat=$$v},expression:\"saveFormat\"}},_vm._l((_vm.formatOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('div',{staticClass:\"modern-btn-group\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"round\":\"\"},on:{\"click\":_vm.startCompress}},[_vm._v(\"开始压缩\")]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.compressFileList.length > 0),expression:\"compressFileList.length > 0\"}],attrs:{\"type\":\"success\",\"round\":\"\"},on:{\"click\":_vm.startDownload}},[_vm._v(\"下载\")]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.compressFileList.length > 0),expression:\"compressFileList.length > 0\"}],attrs:{\"type\":\"warning\",\"round\":\"\"},on:{\"click\":_vm.startDownloadAsZip}},[_vm._v(\"打包下载\")])],1)])],1)],1)],1),_c('el-row',{attrs:{\"gutter\":0,\"justify\":\"center\"}},[_c('el-col',{attrs:{\"xs\":{span: 22, offset: 1},\"sm\":{span: 20, offset: 2},\"md\":{span: 16, offset: 4},\"lg\":{span: 12, offset: 6},\"xl\":{span: 10, offset: 7}}},[_c('el-card',{staticClass:\"modern-card\",attrs:{\"shadow\":\"hover\"}},[_c('h3',{staticClass:\"modern-title\"},[_vm._v(\"压缩\"+_vm._s(_vm.compressValue)+\"%结果\")]),_c('el-divider'),_c('el-row',{staticClass:\"row-bg\",attrs:{\"gutter\":16}},_vm._l((_vm.compressFileList),function(item){return _c('el-col',{key:item.k,attrs:{\"xs\":{span:12},\"sm\":{span:8},\"md\":{span:6},\"lg\":{span:6},\"xl\":{span:4}}},[_c('el-card',{staticClass:\"img-card\",attrs:{\"shadow\":\"always\"}},[_c('el-image',{staticStyle:{\"width\":\"100px\",\"height\":\"100px\",\"border-radius\":\"12px\",\"box-shadow\":\"0 2px 8px rgba(0,0,0,0.08)\"},attrs:{\"src\":item.file_url,\"preview-src-list\":_vm.compressFileList.map(it=>it.file_url),\"fit\":\"scale-down\"}}),_c('div',{staticClass:\"img-info\"},[_vm._v(\"压缩前:\"+_vm._s(item.before_size))]),_c('div',{staticClass:\"img-info\"},[_vm._v(\"压缩后:\"+_vm._s(item.after_size))])],1)],1)}),1)],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\r\nimport ImgUtil from \"@/util/ImgUtil\";\r\nimport FileUtil from \"@/util/FileUtil\";\r\nimport DownloadUtil from \"@/util/DownloadUtil\";\r\nexport default {\r\n  name: 'CompressView',\r\n  metaInfo: {\r\n    title: '在线图片压缩与格式转换 - 支持JPG/PNG/WebP',\r\n    meta: [\r\n      { name: 'description', content: '上传图片后可一键压缩，保持清晰度的同时大幅减小文件体积，支持多种格式相互转换。' },\r\n      { name: 'keywords', content: '在线图片压缩,JPG压缩,PNG压缩,WebP转换,图片格式转换,免费压缩工具,批量压缩' }\r\n    ]\r\n  },\r\n  data() {\r\n    return {\r\n\r\n      fileList: [],\r\n      compressFileList : [],\r\n      dialogImageUrl: '',\r\n      dialogVisible: false,\r\n      disabled: false,\r\n      compressVal: 50,\r\n      compressValue : 0,\r\n      saveFormat: 'original', // 新增\r\n      formatOptions: [ // 新增\r\n        { label: '原格式', value: 'original' },\r\n        { label: 'image/jpeg', value: 'image/jpeg' },\r\n        { label: 'image/jpg', value: 'image/jpg' },\r\n        { label: 'image/png', value: 'image/png' },\r\n        { label: 'image/webp', value: 'image/webp' },\r\n        { label: 'image/gif', value: 'image/gif' },\r\n      ]\r\n    };\r\n  },\r\n  mounted() {\r\n\r\n    // 如果这里输出是正确的对象，但 <head> 没更新，说明是组件层级或生命周期问题。\r\n  },\r\n  methods: {\r\n    async startDownload() {\r\n      this.compressFileList.forEach((item, idx) => {\r\n        // 获取原文件名（不带扩展名）\r\n        const originName = this.fileList[idx]?.name ? this.fileList[idx].name.replace(/\\.[^.]+$/, '') : idx;\r\n        const ext = this.saveFormat === 'original'\r\n          ? FileUtil.getExt(this.fileList[idx]?.name || item.save_name)\r\n          : (this.saveFormat.replace('image/', '') === 'jpg' ? 'jpg' : this.saveFormat.replace('image/', ''));\r\n        const fileName = originName + '.' + ext;\r\n        DownloadUtil.downloadBlob(item.file, fileName);\r\n      });\r\n    },\r\n    async startDownloadAsZip() {\r\n      const loading = this.$loading({\r\n        lock: true,\r\n        text: '打包下载中...',\r\n        spinner: 'el-icon-loading',\r\n        background: 'rgba(0, 0, 0, 0.7)'\r\n      });\r\n      try {\r\n        const files = this.compressFileList.map((item, idx) => {\r\n          const originName = this.fileList[idx]?.name ? this.fileList[idx].name.replace(/\\.[^.]+$/, '') : idx;\r\n          const ext = this.saveFormat === 'original'\r\n            ? FileUtil.getExt(this.fileList[idx]?.name || item.save_name)\r\n            : (this.saveFormat.replace('image/', '') === 'jpg' ? 'jpg' : this.saveFormat.replace('image/', ''));\r\n          const fileName = originName + '.' + ext;\r\n          return { file: item.file, save_name: fileName };\r\n        });\r\n        const filename = DownloadUtil.generateTimestampFilename('compressed_images', 'zip');\r\n        await DownloadUtil.downloadAsZip(files, filename, 'file', 'save_name');\r\n      } catch (e) {\r\n        console.log('startDownloadAsZip err' + e.message);\r\n      }\r\n      loading.close();\r\n    },\r\n    async startCompress() {\r\n      this.compressFileList = [];\r\n      let k = 0;\r\n      const loading = this.$loading({\r\n        lock: true,\r\n        text: '压缩中图片中...',\r\n        spinner: 'el-icon-loading',\r\n        background: 'rgba(0, 0, 0, 0.7)'\r\n      });\r\n      this.compressValue = this.compressVal;\r\n      for (const file of this.fileList) {\r\n        try {\r\n          // 根据选择的保存格式动态设置 mimeType\r\n          let mimeType = '';\r\n          if (this.saveFormat === 'original') {\r\n            mimeType = file.raw.type;\r\n            if (!['image/png', 'image/jpeg', 'image/jpg', 'image/webp', 'image/gif'].includes(mimeType)) {\r\n              mimeType = 'image/jpeg';\r\n            }\r\n          } else {\r\n            mimeType = this.saveFormat;\r\n          }\r\n          // compressorjs 不支持 gif 压缩，gif 直接跳过压缩\r\n          let compressedFile;\r\n          if (mimeType === 'image/gif') {\r\n            compressedFile = file.raw;\r\n          } else {\r\n            compressedFile = await ImgUtil.compressImage(file.raw, (100 - this.compressValue)/100, mimeType);\r\n          }\r\n          // 获取真实类型\r\n          const ext = mimeType === 'image/png' ? 'png'\r\n                    : mimeType === 'image/jpeg' ? 'jpeg'\r\n                    : mimeType === 'image/jpg' ? 'jpg'\r\n                    : mimeType === 'image/webp' ? 'webp'\r\n                    : mimeType === 'image/gif' ? 'gif'\r\n                    : FileUtil.getExt(file.name);\r\n          const imgBlob = ImgUtil.fileToBlob(compressedFile);\r\n          this.compressFileList.push({\r\n            before_size: ImgUtil.formatBytes(file.size),\r\n            file: imgBlob,\r\n            save_name : k + '.' + ext,\r\n            file_url : URL.createObjectURL(imgBlob),\r\n            after_size: ImgUtil.formatBytes(compressedFile.size || 0),\r\n            k : k++,\r\n          });\r\n        } catch (error) {\r\n          console.error('Compression Error:', error.message);\r\n        }\r\n      }\r\n      loading.close();\r\n    },\r\n    handleRemove(file) {\r\n      console.log(file);\r\n    },\r\n    handlePictureCardPreview(file) {\r\n      this.dialogImageUrl = file.url;\r\n      this.dialogVisible = true;\r\n    },\r\n    handleDownload(file) {\r\n      console.log(file);\r\n    },\r\n    handleChange(file, files) {\r\n      this.fileList = files;\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div class=\"modern-bg\">\r\n    <el-row :gutter=\"0\" justify=\"center\">\r\n      <el-col :xs=\"{span: 22, offset: 1}\" :sm=\"{span: 20, offset: 2}\" :md=\"{span: 16, offset: 4}\" :lg=\"{span: 12, offset: 6}\" :xl=\"{span: 10, offset: 7}\">\r\n        <el-card shadow=\"hover\" class=\"modern-card\">\r\n          <h2 class=\"modern-title\">图片压缩</h2>\r\n          <el-divider></el-divider>\r\n          <el-upload\r\n              :auto-upload=\"false\"\r\n              :multiple=\"true\"\r\n              action=\"#\"\r\n              list-type=\"picture-card\"\r\n              :on-preview=\"handlePictureCardPreview\"\r\n              :on-remove=\"handleRemove\"\r\n              :on-change=\"handleChange\"\r\n              class=\"modern-upload\"\r\n          >\r\n            <i slot=\"default\" class=\"el-icon-plus\"></i>\r\n          </el-upload>\r\n          <el-dialog :visible.sync=\"dialogVisible\">\r\n            <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\r\n          </el-dialog>\r\n          <div class=\"block modern-slider-block\">\r\n            <div>\r\n              <span class=\"demonstration\">压缩率</span>\r\n              <el-slider\r\n                  v-model=\"compressVal\"\r\n                  show-input\r\n                  class=\"modern-slider\"\r\n              ></el-slider>\r\n            </div>\r\n            <div>\r\n               <span class=\"demonstration\">保存格式</span>\r\n              <el-select v-model=\"saveFormat\" placeholder=\"请选择保存格式\" style=\"width: 180px;\">\r\n                <el-option v-for=\"item in formatOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" />\r\n              </el-select>\r\n            </div>\r\n            \r\n           \r\n            <div class=\"modern-btn-group\">\r\n              <el-button type=\"primary\" round @click=\"startCompress\">开始压缩</el-button>\r\n              <el-button type=\"success\" round @click=\"startDownload\" v-show=\"compressFileList.length > 0\">下载</el-button>\r\n              <el-button type=\"warning\" round @click=\"startDownloadAsZip\" v-show=\"compressFileList.length > 0\">打包下载</el-button>\r\n            </div>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n    <el-row :gutter=\"0\" justify=\"center\">\r\n      <el-col :xs=\"{span: 22, offset: 1}\" :sm=\"{span: 20, offset: 2}\" :md=\"{span: 16, offset: 4}\" :lg=\"{span: 12, offset: 6}\" :xl=\"{span: 10, offset: 7}\">\r\n        <el-card shadow=\"hover\" class=\"modern-card\">\r\n          <h3 class=\"modern-title\">压缩{{compressValue}}%结果</h3>\r\n          <el-divider></el-divider>\r\n          <el-row :gutter=\"16\" class=\"row-bg\">\r\n            <el-col :xs=\"{span:12}\" :sm=\"{span:8}\" :md=\"{span:6}\" :lg=\"{span:6}\" :xl=\"{span:4}\" v-for=\"(item) in compressFileList\" :key=\"item.k\">\r\n              <el-card shadow=\"always\" class=\"img-card\">\r\n                <el-image\r\n                    style=\"width: 100px; height: 100px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);\"\r\n                    :src=\"item.file_url\"\r\n                    :preview-src-list=\"compressFileList.map(it=>it.file_url)\"\r\n                    fit=\"scale-down\"></el-image>\r\n                <div class=\"img-info\">压缩前:{{item.before_size}}</div>\r\n                <div class=\"img-info\">压缩后:{{item.after_size}}</div>\r\n              </el-card>\r\n            </el-col>\r\n          </el-row>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.modern-bg {\r\n  //min-height: 100vh;\r\n  background: #f6f8fa;\r\n  //padding: 32px 0;\r\n}\r\n.modern-card {\r\n  border-radius: 16px;\r\n  box-shadow: 0 4px 24px rgba(0,0,0,0.08);\r\n  margin-bottom: 32px;\r\n}\r\n.modern-title {\r\n  text-align: center;\r\n  font-weight: 600;\r\n  color: #222;\r\n  margin-bottom: 0;\r\n}\r\n.modern-slider-block {\r\n  margin-top: 24px;\r\n  margin-bottom: 8px;\r\n}\r\n.modern-slider {\r\n  width: 80%;\r\n  margin: 0 auto 16px auto;\r\n}\r\n.modern-btn-group {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 16px;\r\n}\r\n.img-card {\r\n  border-radius: 12px;\r\n  box-shadow: 0 2px 8px rgba(0,0,0,0.08);\r\n  text-align: center;\r\n  margin-bottom: 16px;\r\n}\r\n.img-info {\r\n  font-size: 13px;\r\n  color: #888;\r\n  margin: 4px 0 0 0;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CompressView.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CompressView.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./CompressView.vue?vue&type=template&id=06fa56ed&scoped=true\"\nimport script from \"./CompressView.vue?vue&type=script&lang=js\"\nexport * from \"./CompressView.vue?vue&type=script&lang=js\"\nimport style0 from \"./CompressView.vue?vue&type=style&index=0&id=06fa56ed&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"06fa56ed\",\n  null\n  \n)\n\nexport default component.exports","/**\n * 下载工具类\n * 封装各种下载功能，避免重复代码\n */\nexport class DownloadUtil {\n    /**\n     * 下载文本文件\n     * @param {string} content - 文件内容\n     * @param {string} filename - 文件名\n     * @param {string} mimeType - MIME类型\n     */\n    static downloadText(content, filename, mimeType = 'text/plain') {\n        const blob = new Blob([content], { type: mimeType })\n        this.downloadBlob(blob, filename)\n    }\n\n    /**\n     * 下载JSON文件\n     * @param {Object} data - JSON数据\n     * @param {string} filename - 文件名\n     */\n    static downloadJSON(data, filename = 'data.json') {\n        const content = JSON.stringify(data, null, 2)\n        this.downloadText(content, filename, 'application/json')\n    }\n\n    /**\n     * 下载CSV文件\n     * @param {Array} data - CSV数据数组\n     * @param {string} filename - 文件名\n     * @param {Array} headers - 表头数组\n     */\n    static downloadCSV(data, filename = 'data.csv', headers = null) {\n        let csvContent = ''\n        \n        // 添加表头\n        if (headers && headers.length > 0) {\n            csvContent += headers.join(',') + '\\n'\n        }\n        \n        // 添加数据行\n        data.forEach(row => {\n            if (Array.isArray(row)) {\n                csvContent += row.map(field => `\"${field}\"`).join(',') + '\\n'\n            } else if (typeof row === 'object') {\n                const values = headers ? headers.map(header => row[header] || '') : Object.values(row)\n                csvContent += values.map(field => `\"${field}\"`).join(',') + '\\n'\n            }\n        })\n        \n        // 添加BOM以支持中文\n        const BOM = '\\uFEFF'\n        this.downloadText(BOM + csvContent, filename, 'text/csv;charset=utf-8')\n    }\n\n    /**\n     * 下载图片文件\n     * @param {string} dataURL - 图片DataURL\n     * @param {string} filename - 文件名\n     */\n    static downloadImage(dataURL, filename = 'image.png') {\n        const link = document.createElement('a')\n        link.download = filename\n        link.href = dataURL\n        document.body.appendChild(link)\n        link.click()\n        document.body.removeChild(link)\n    }\n\n    /**\n     * 下载Canvas为图片\n     * @param {HTMLCanvasElement} canvas - Canvas元素\n     * @param {string} filename - 文件名\n     * @param {string} format - 图片格式\n     * @param {number} quality - 图片质量(0-1)\n     */\n    static downloadCanvas(canvas, filename = 'canvas.png', format = 'image/png', quality = 1.0) {\n        const dataURL = canvas.toDataURL(format, quality)\n        this.downloadImage(dataURL, filename)\n    }\n\n    /**\n     * 下载Blob对象\n     * @param {Blob} blob - Blob对象\n     * @param {string} filename - 文件名\n     */\n    static downloadBlob(blob, filename) {\n        const url = URL.createObjectURL(blob)\n        const link = document.createElement('a')\n        link.href = url\n        link.download = filename\n        document.body.appendChild(link)\n        link.click()\n        document.body.removeChild(link)\n        URL.revokeObjectURL(url)\n    }\n\n    /**\n     * 下载URL指向的文件\n     * @param {string} url - 文件URL\n     * @param {string} filename - 文件名\n     */\n    static downloadURL(url, filename) {\n        const link = document.createElement('a')\n        link.href = url\n        link.download = filename\n        link.target = '_blank'\n        document.body.appendChild(link)\n        link.click()\n        document.body.removeChild(link)\n    }\n\n    /**\n     * 批量下载文件为ZIP\n     * @param {Array} files - 文件数组 [{name: string, content: string|Blob}]\n     * @param {string} zipName - ZIP文件名\n     */\n    static async downloadZip(files, zipName = 'files.zip') {\n        // 动态导入JSZip\n        const JSZip = (await import('jszip')).default\n        const zip = new JSZip()\n\n        // 添加文件到ZIP\n        files.forEach(file => {\n            if (file.content instanceof Blob) {\n                zip.file(file.name, file.content)\n            } else {\n                zip.file(file.name, file.content)\n            }\n        })\n\n        // 生成ZIP并下载\n        try {\n            const content = await zip.generateAsync({ type: 'blob' })\n            this.downloadBlob(content, zipName)\n            return true\n        } catch (error) {\n            console.error('生成ZIP文件失败:', error)\n            return false\n        }\n    }\n\n    /**\n     * 从URL获取Blob\n     * @param {string} url - 文件URL\n     * @returns {Promise<Blob>} Blob对象\n     */\n    static async fetchBlob(url) {\n        try {\n            const response = await fetch(url)\n            if (!response.ok) {\n                throw new Error(`HTTP error! status: ${response.status}`)\n            }\n            return await response.blob()\n        } catch (error) {\n            console.error('获取文件失败:', error)\n            throw error\n        }\n    }\n\n    /**\n     * 生成带时间戳的文件名\n     * @param {string} baseName - 基础文件名\n     * @param {string} extension - 文件扩展名\n     * @returns {string} 带时间戳的文件名\n     */\n    static generateTimestampFilename(baseName, extension) {\n        const timestamp = new Date().toISOString().replace(/[:.]/g, '-').slice(0, -5)\n        return `${baseName}_${timestamp}.${extension}`\n    }\n\n    /**\n     * 获取文件大小的可读格式\n     * @param {number} bytes - 字节数\n     * @returns {string} 格式化的文件大小\n     */\n    static formatFileSize(bytes) {\n        if (bytes === 0) return '0 Bytes'\n        \n        const k = 1024\n        const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB']\n        const i = Math.floor(Math.log(bytes) / Math.log(k))\n        \n        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n    }\n}\n\nexport default DownloadUtil\n"],"names":["render","_vm","this","_c","_self","staticClass","attrs","span","offset","_v","handlePictureCardPreview","handleRemove","handleChange","slot","dialogVisible","on","$event","dialogImageUrl","model","value","compressVal","callback","$$v","expression","staticStyle","saveFormat","_l","formatOptions","item","key","label","startCompress","directives","name","rawName","compressFileList","length","startDownload","startDownloadAsZip","_s","compressValue","k","file_url","map","it","before_size","after_size","staticRenderFns","metaInfo","title","meta","content","data","fileList","disabled","mounted","methods","forEach","idx","_this$fileList$idx","_this$fileList$idx2","originName","replace","ext","FileUtil","getExt","save_name","fileName","DownloadUtil","downloadBlob","file","loading","$loading","lock","text","spinner","background","files","_this$fileList$idx3","_this$fileList$idx4","filename","generateTimestampFilename","downloadAsZip","e","console","log","message","close","compressedFile","mimeType","raw","type","includes","ImgUtil","compressImage","imgBlob","fileToBlob","push","formatBytes","size","URL","createObjectURL","error","url","handleDownload","component","downloadText","blob","Blob","downloadJSON","JSON","stringify","downloadCSV","headers","csvContent","join","row","Array","isArray","field","values","header","Object","BOM","downloadImage","dataURL","link","document","createElement","download","href","body","appendChild","click","removeChild","downloadCanvas","canvas","format","quality","toDataURL","revokeObjectURL","downloadURL","target","downloadZip","zipName","JSZip","default","zip","generateAsync","fetchBlob","response","fetch","ok","Error","status","baseName","extension","timestamp","Date","toISOString","slice","formatFileSize","bytes","sizes","i","Math","floor","parseFloat","pow","toFixed"],"sourceRoot":""}