"use strict";(self["webpackChunkweb_tool_vue"]=self["webpackChunkweb_tool_vue"]||[]).push([[2823],{42823:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-container"},[t._m(0),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-card",{staticClass:"config-card"},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("生成配置")])]),e("el-form",{attrs:{"label-width":"120px"}},[e("el-form-item",{attrs:{label:"机器ID"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,max:1023},model:{value:t.machineId,callback:function(e){t.machineId=e},expression:"machineId"}}),e("div",{staticClass:"help-text"},[t._v("范围: 0-1023 (10位)")])],1),e("el-form-item",{attrs:{label:"数据中心ID"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,max:31},model:{value:t.datacenterId,callback:function(e){t.datacenterId=e},expression:"datacenterId"}}),e("div",{staticClass:"help-text"},[t._v("范围: 0-31 (5位)")])],1),e("el-form-item",{attrs:{label:"生成数量"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,max:1e4},model:{value:t.generateCount,callback:function(e){t.generateCount=e},expression:"generateCount"}})],1),e("el-form-item",{attrs:{label:"输出格式"}},[e("el-radio-group",{model:{value:t.outputFormat,callback:function(e){t.outputFormat=e},expression:"outputFormat"}},[e("el-radio",{attrs:{label:"decimal"}},[t._v("十进制")]),e("el-radio",{attrs:{label:"hex"}},[t._v("十六进制")]),e("el-radio",{attrs:{label:"binary"}},[t._v("二进制")])],1)],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.generateIds}},[e("i",{staticClass:"el-icon-magic-stick"}),t._v(" 生成ID ")]),e("el-button",{on:{click:t.generateSingle}},[e("i",{staticClass:"el-icon-plus"}),t._v(" 生成单个 ")]),e("el-button",{on:{click:t.clearResults}},[e("i",{staticClass:"el-icon-delete"}),t._v(" 清空 ")])],1)],1)],1),e("el-card",{staticClass:"algorithm-card",staticStyle:{"margin-top":"20px"}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("算法说明")])]),e("div",{staticClass:"algorithm-info"},[e("div",{staticClass:"algorithm-structure"},[e("h4",[t._v("雪花ID结构 (64位)")]),e("div",{staticClass:"bit-structure"},[e("div",{staticClass:"bit-section timestamp"},[e("div",{staticClass:"bit-label"},[t._v("时间戳")]),e("div",{staticClass:"bit-range"},[t._v("41位")])]),e("div",{staticClass:"bit-section datacenter"},[e("div",{staticClass:"bit-label"},[t._v("数据中心")]),e("div",{staticClass:"bit-range"},[t._v("5位")])]),e("div",{staticClass:"bit-section machine"},[e("div",{staticClass:"bit-label"},[t._v("机器ID")]),e("div",{staticClass:"bit-range"},[t._v("5位")])]),e("div",{staticClass:"bit-section sequence"},[e("div",{staticClass:"bit-label"},[t._v("序列号")]),e("div",{staticClass:"bit-range"},[t._v("12位")])]),e("div",{staticClass:"bit-section sign"},[e("div",{staticClass:"bit-label"},[t._v("符号位")]),e("div",{staticClass:"bit-range"},[t._v("1位")])])])]),e("div",{staticClass:"algorithm-features"},[e("h4",[t._v("特性")]),e("ul",[e("li",[t._v("全局唯一：在分布式环境下保证ID唯一性")]),e("li",[t._v("趋势递增：大致按照时间递增，有利于数据库索引")]),e("li",[t._v("高性能：单机每秒可生成400万个ID")]),e("li",[t._v("无依赖：不依赖数据库等第三方系统")])])])])])],1),e("el-col",{attrs:{span:12}},[e("el-card",{staticClass:"result-card"},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("生成结果")]),e("div",{staticStyle:{float:"right"}},[e("el-button",{attrs:{size:"mini"},on:{click:t.copyAllIds}},[e("i",{staticClass:"el-icon-copy-document"}),t._v(" 复制全部 ")]),e("el-button",{attrs:{size:"mini"},on:{click:t.exportIds}},[e("i",{staticClass:"el-icon-download"}),t._v(" 导出 ")])],1)]),t.generatedIds.length>0?e("div",{staticClass:"id-list"},t._l(t.generatedIds,(function(a,s){return e("div",{key:s,staticClass:"id-item"},[e("div",{staticClass:"id-display"},[e("span",{staticClass:"id-value"},[t._v(t._s(t.formatId(a.id)))]),e("div",{staticClass:"id-actions"},[e("el-button",{attrs:{size:"mini"},on:{click:function(e){t.copyId(t.formatId(a.id))}}},[e("i",{staticClass:"el-icon-copy-document"})]),e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.analyzeId(a)}}},[e("i",{staticClass:"el-icon-view"})])],1)]),e("div",{staticClass:"id-info"},[e("span",{staticClass:"id-time"},[t._v(t._s(t.formatTime(a.timestamp)))]),e("span",{staticClass:"id-sequence"},[t._v("序列: "+t._s(a.sequence))])])])})),0):e("div",{staticClass:"no-result"},[e("i",{staticClass:"el-icon-coin"}),e("p",[t._v("点击生成按钮开始生成雪花ID")])])]),e("el-card",{staticClass:"stats-card",staticStyle:{"margin-top":"20px"}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("生成统计")])]),t.stats.totalGenerated>0?e("div",{staticClass:"stats-info"},[e("div",{staticClass:"stat-item"},[e("div",{staticClass:"stat-label"},[t._v("总生成数量")]),e("div",{staticClass:"stat-value"},[t._v(t._s(t.stats.totalGenerated))])]),e("div",{staticClass:"stat-item"},[e("div",{staticClass:"stat-label"},[t._v("当前机器ID")]),e("div",{staticClass:"stat-value"},[t._v(t._s(t.machineId))])]),e("div",{staticClass:"stat-item"},[e("div",{staticClass:"stat-label"},[t._v("数据中心ID")]),e("div",{staticClass:"stat-value"},[t._v(t._s(t.datacenterId))])]),e("div",{staticClass:"stat-item"},[e("div",{staticClass:"stat-label"},[t._v("最大序列号")]),e("div",{staticClass:"stat-value"},[t._v(t._s(t.stats.maxSequence))])]),e("div",{staticClass:"stat-item"},[e("div",{staticClass:"stat-label"},[t._v("生成速率")]),e("div",{staticClass:"stat-value"},[t._v(t._s(t.stats.generateRate)+" ID/秒")])]),e("div",{staticClass:"stat-item"},[e("div",{staticClass:"stat-label"},[t._v("时间跨度")]),e("div",{staticClass:"stat-value"},[t._v(t._s(t.stats.timeSpan))])])]):e("div",{staticClass:"no-stats"},[e("p",[t._v("暂无统计数据")])])])],1)],1),e("el-dialog",{attrs:{title:"雪花ID分析",visible:t.showAnalysisDialog,width:"600px"},on:{"update:visible":function(e){t.showAnalysisDialog=e}}},[t.analysisResult?e("div",[e("el-form",{attrs:{"label-width":"120px"}},[e("el-form-item",{attrs:{label:"原始ID:"}},[e("el-input",{attrs:{value:t.formatId(t.analysisResult.id),readonly:""}})],1),e("el-form-item",{attrs:{label:"二进制:"}},[e("el-input",{attrs:{value:t.analysisResult.binary,readonly:"",type:"textarea",rows:2}})],1),e("el-form-item",{attrs:{label:"时间戳:"}},[e("span",[t._v(t._s(t.analysisResult.timestamp)+" ("+t._s(t.formatTime(t.analysisResult.timestamp))+")")])]),e("el-form-item",{attrs:{label:"数据中心ID:"}},[e("span",[t._v(t._s(t.analysisResult.datacenterId))])]),e("el-form-item",{attrs:{label:"机器ID:"}},[e("span",[t._v(t._s(t.analysisResult.machineId))])]),e("el-form-item",{attrs:{label:"序列号:"}},[e("span",[t._v(t._s(t.analysisResult.sequence))])]),e("el-form-item",{attrs:{label:"生成时间:"}},[e("span",[t._v(t._s(t.formatTime(t.analysisResult.timestamp)))])])],1)],1):t._e()])],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"tool-header"},[e("h1",[t._v("❄️ 雪花ID生成器")]),e("p",[t._v("生成分布式系统中常用的雪花算法ID，保证全局唯一性")])])}],n=(a(16280),a(44114),a(46834)),r=a(95866),o={name:"SnowflakeIdView",metaInfo:{title:"雪花ID生成器 - 分布式唯一ID生成工具",meta:[{name:"description",content:"雪花算法ID生成器，用于生成分布式系统中的全局唯一ID，支持自定义机器ID和数据中心ID。"},{name:"keywords",content:"雪花ID,分布式ID,唯一ID生成器,Snowflake算法,全局ID"}]},data(){return{machineId:1,datacenterId:1,generateCount:10,outputFormat:"decimal",generatedIds:[],sequence:0,lastTimestamp:0,showAnalysisDialog:!1,analysisResult:null,stats:{totalGenerated:0,maxSequence:0,generateRate:0,timeSpan:"0秒"},startTime:null,EPOCH:1288834974657,MACHINE_ID_BITS:5,DATACENTER_ID_BITS:5,SEQUENCE_BITS:12,MAX_MACHINE_ID:31,MAX_DATACENTER_ID:31,MAX_SEQUENCE:4095,MACHINE_ID_SHIFT:12,DATACENTER_ID_SHIFT:17,TIMESTAMP_SHIFT:22}},methods:{generateIds(){this.startTime||(this.startTime=Date.now()),this.generatedIds=[];for(let t=0;t<this.generateCount;t++){const t=this.generateSnowflakeId();this.generatedIds.push(t)}this.updateStats(),this.$message.success(`成功生成 ${this.generateCount} 个雪花ID`)},generateSingle(){this.startTime||(this.startTime=Date.now());const t=this.generateSnowflakeId();this.generatedIds.unshift(t),this.generatedIds.length>1e3&&(this.generatedIds=this.generatedIds.slice(0,1e3)),this.updateStats()},generateSnowflakeId(){let t=Date.now();if(t<this.lastTimestamp)throw new Error("系统时钟回退，无法生成ID");t===this.lastTimestamp?(this.sequence=this.sequence+1&this.MAX_SEQUENCE,0===this.sequence&&(t=this.waitNextMillis(this.lastTimestamp))):this.sequence=0,this.lastTimestamp=t;const e=t-this.EPOCH<<this.TIMESTAMP_SHIFT|this.datacenterId<<this.DATACENTER_ID_SHIFT|this.machineId<<this.MACHINE_ID_SHIFT|this.sequence;return{id:e,timestamp:t,datacenterId:this.datacenterId,machineId:this.machineId,sequence:this.sequence}},waitNextMillis(t){let e=Date.now();while(e<=t)e=Date.now();return e},formatId(t){switch(this.outputFormat){case"hex":return"0x"+t.toString(16).toUpperCase();case"binary":return"0b"+t.toString(2).padStart(64,"0");default:return t.toString()}},formatTime(t){return new Date(t).toLocaleString("zh-CN")},updateStats(){this.stats.totalGenerated=this.generatedIds.length,this.stats.maxSequence=Math.max(this.stats.maxSequence,this.sequence);const t=(Date.now()-this.startTime)/1e3;this.stats.generateRate=Math.round(this.stats.totalGenerated/t),this.stats.timeSpan=t<60?`${t.toFixed(1)}秒`:`${Math.floor(t/60)}分${Math.floor(t%60)}秒`},analyzeId(t){this.analysisResult={...t,binary:"0b"+t.id.toString(2).padStart(64,"0")},this.showAnalysisDialog=!0},async copyId(t){try{const e=await n.V.copyText(t);e?this.$message.success("ID已复制到剪贴板"):this.$message.error("复制失败")}catch(e){this.$message.error("复制失败: "+e.message)}},async copyAllIds(){if(0!==this.generatedIds.length)try{const t=this.generatedIds.map((t=>this.formatId(t.id))).join("\n"),e=await n.V.copyText(t);e?this.$message.success("所有ID已复制到剪贴板"):this.$message.error("复制失败")}catch(t){this.$message.error("复制失败: "+t.message)}else this.$message.warning("没有可复制的ID")},exportIds(){if(0===this.generatedIds.length)return void this.$message.warning("没有可导出的ID");const t={config:{machineId:this.machineId,datacenterId:this.datacenterId,outputFormat:this.outputFormat},ids:this.generatedIds.map((t=>({id:this.formatId(t.id),timestamp:t.timestamp,time:this.formatTime(t.timestamp),sequence:t.sequence}))),stats:this.stats,exportTime:(new Date).toISOString()},e=r.A.generateTimestampFilename("雪花ID","json");r.A.downloadJSON(t,e),this.$message.success("ID数据导出成功")},clearResults(){this.generatedIds=[],this.sequence=0,this.lastTimestamp=0,this.stats={totalGenerated:0,maxSequence:0,generateRate:0,timeSpan:"0秒"},this.startTime=null}}},l=o,c=a(81656),d=(0,c.A)(l,s,i,!1,null,"00419b31",null),m=d.exports},46834:function(t,e,a){a.d(e,{V:function(){return s}});a(16280);class s{static async copyText(t){try{if("string"!==typeof t)throw new Error("复制的内容必须是字符串");if(""===t.trim())throw new Error("复制的内容不能为空");return navigator.clipboard&&window.isSecureContext?(await navigator.clipboard.writeText(t),!0):this.fallbackCopyText(t)}catch(e){return console.error("复制文本失败:",e),!1}}static fallbackCopyText(t){let e=null;try{e=document.createElement("textarea"),e.value=t,e.style.position="fixed",e.style.left="-9999px",e.style.top="-9999px",e.style.opacity="0",e.style.pointerEvents="none",document.body.appendChild(e),e.focus(),e.select(),e.setSelectionRange(0,t.length);const a=document.execCommand("copy");return a}catch(a){return console.error("兼容模式复制失败:",a),!1}finally{e&&e.parentNode&&document.body.removeChild(e)}}static async copyImage(t){try{if(!navigator.clipboard||!navigator.clipboard.write)throw new Error("浏览器不支持图片复制功能");let e;if(t instanceof Blob)e=t;else if(t instanceof HTMLCanvasElement)e=await this.canvasToBlob(t);else{if("string"!==typeof t)throw new Error("不支持的图片源类型");e=await this.dataURLToBlob(t)}const a=new ClipboardItem({[e.type]:e});return await navigator.clipboard.write([a]),!0}catch(e){return console.error("复制图片失败:",e),!1}}static canvasToBlob(t,e="image/png",a=1){return new Promise((s=>{t.toBlob(s,e,a)}))}static async dataURLToBlob(t){try{const e=await fetch(t);return await e.blob()}catch(e){throw console.error("DataURL转Blob失败:",e),e}}static async readText(){try{if(navigator.clipboard&&navigator.clipboard.readText)return await navigator.clipboard.readText();throw new Error("浏览器不支持读取剪贴板")}catch(t){throw console.error("读取剪贴板失败:",t),t}}static async readImage(){try{if(!navigator.clipboard||!navigator.clipboard.read)throw new Error("浏览器不支持读取剪贴板图片");const t=await navigator.clipboard.read();for(const e of t)for(const t of e.types)if(t.startsWith("image/"))return await e.getType(t);throw new Error("剪贴板中没有图片")}catch(t){throw console.error("读取剪贴板图片失败:",t),t}}static checkSupport(){return{writeText:!(!navigator.clipboard||!navigator.clipboard.writeText),readText:!(!navigator.clipboard||!navigator.clipboard.readText),writeImage:!(!navigator.clipboard||!navigator.clipboard.write),readImage:!(!navigator.clipboard||!navigator.clipboard.read),isSecureContext:window.isSecureContext}}static async copyLines(t){const e=Array.isArray(t)?t.join("\n"):String(t);return await this.copyText(e)}static async copyJSON(t,e=2){try{const a=JSON.stringify(t,null,e);return await this.copyText(a)}catch(a){return console.error("复制JSON失败:",a),!1}}static async copyTable(t,e=null){try{let a="";return e&&e.length>0&&(a+=e.join("\t")+"\n"),t.forEach((t=>{if(Array.isArray(t))a+=t.join("\t")+"\n";else if("object"===typeof t){const s=e?e.map((e=>t[e]||"")):Object.values(t);a+=s.join("\t")+"\n"}})),await this.copyText(a.trim())}catch(a){return console.error("复制表格失败:",a),!1}}}},95866:function(t,e,a){a(16280),a(14603),a(47566),a(98721);class s{static downloadText(t,e,a="text/plain"){const s=new Blob([t],{type:a});this.downloadBlob(s,e)}static downloadJSON(t,e="data.json"){const a=JSON.stringify(t,null,2);this.downloadText(a,e,"application/json")}static downloadCSV(t,e="data.csv",a=null){let s="";a&&a.length>0&&(s+=a.join(",")+"\n"),t.forEach((t=>{if(Array.isArray(t))s+=t.map((t=>`"${t}"`)).join(",")+"\n";else if("object"===typeof t){const e=a?a.map((e=>t[e]||"")):Object.values(t);s+=e.map((t=>`"${t}"`)).join(",")+"\n"}}));const i="\ufeff";this.downloadText(i+s,e,"text/csv;charset=utf-8")}static downloadImage(t,e="image.png"){const a=document.createElement("a");a.download=e,a.href=t,document.body.appendChild(a),a.click(),document.body.removeChild(a)}static downloadCanvas(t,e="canvas.png",a="image/png",s=1){const i=t.toDataURL(a,s);this.downloadImage(i,e)}static downloadBlob(t,e){const a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a)}static downloadURL(t,e){const a=document.createElement("a");a.href=t,a.download=e,a.target="_blank",document.body.appendChild(a),a.click(),document.body.removeChild(a)}static async downloadZip(t,e="files.zip"){const s=(await a.e(4813).then(a.t.bind(a,44813,23))).default,i=new s;t.forEach((t=>{t.content,Blob,i.file(t.name,t.content)}));try{const t=await i.generateAsync({type:"blob"});return this.downloadBlob(t,e),!0}catch(n){return console.error("生成ZIP文件失败:",n),!1}}static async fetchBlob(t){try{const e=await fetch(t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.blob()}catch(e){throw console.error("获取文件失败:",e),e}}static generateTimestampFilename(t,e){const a=(new Date).toISOString().replace(/[:.]/g,"-").slice(0,-5);return`${t}_${a}.${e}`}static formatFileSize(t){if(0===t)return"0 Bytes";const e=1024,a=["Bytes","KB","MB","GB","TB"],s=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,s)).toFixed(2))+" "+a[s]}}e.A=s}}]);